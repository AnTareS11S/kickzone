import{r as i,j as e}from"./react-DBUcqle2.js";import{c as ir}from"./react-dom-X2Ryj6od.js";import{L as F,B as or}from"./react-router-dom-NZ7CEir5.js";import{T as Ee,F as lr,a as Gs,b as cr,c as dr,d as mr,e as xr,f as da,g as ur,h as ss,i as Os,j as We,k as hr,l as ma,M as pr,m as fr,n as gr,o as jr,p as yr,q as br,r as Hs,s as ds,t as Ye,u as Nr,v as yt,w as Bs,x as wr,y as bt,z as xa,A as ua,B as vr,C as ms,D as Vs,E as Sr,G as Es,H as ha,I as Cr,J as ts,K as pa,L as fa,N as xs,O as us,P as Tr,Q as kr,R as Nt,S as ga,U as Pr,V as Fr,W as ht,X as Ot,Y as Er,Z as Bt,_ as Rr,$ as Dr,a0 as Vt,a1 as Ir,a2 as Ar,a3 as $r,a4 as _r,a5 as ja,a6 as Mr,a7 as ya,a8 as Lr,a9 as Or,aa as ba,ab as Br,ac as Vr,ad as zr,ae as wt,af as zt,ag as qr,ah as Na,ai as Gr,aj as Hr,ak as qt,al as Gt,am as Ur,an as Jr,ao as Wr,ap as Yr,aq as Qr,ar as Zr,as as Kr,at as Xr,au as ei,av as si,aw as ti,ax as ai,ay as ni,az as ri,aA as hs,aB as ii,aC as oi,aD as vt,aE as li,aF as ci,aG as wa}from"./react-icons-DGGwRo-d.js";import{S as va,O as Sa,C as Ca,T as Ta,D as ka,A as Pa,a as Fa,P as di,R as mi,b as xi,c as Ea,d as Ra,e as Da,f as Ia,g as Aa,h as $a,i as _a,j as ui,k as hi,l as pi,m as Ma,I as fi,n as gi,o as La,p as ji,q as Oa,r as yi,s as bi,t as Ba,V as Ni,L as Va,u as za,v as wi,w as St,x as vi,y as qa,z as Si,B as Ci,G as Ti,E as Ga,F as ki,H as Ha,J as Pi,K as Ua,M as Ja,N as Wa,Q as Ya,U as Qa,W as Fi,X as Za,Y as Ka,Z as Ei,_ as Ri,$ as Di,a0 as Xa,a1 as en,a2 as sn,a3 as tn,a4 as an,a5 as Ii,a6 as nn,a7 as rn,a8 as Ai,a9 as $i,aa as _i,ab as Mi,ac as Li,ad as Oi,ae as on,af as ln,ag as cn,ah as Bi,ai as ps,aj as Vi,ak as dn,al as mn,am as xn,an as un,ao as hn,ap as pn,aq as zi,ar as qi,as as Gi,at as fn,au as Hi,av as Ui}from"./@radix-ui-14UXwVC2.js";import{c as Ji}from"./clsx-B-dksMZM.js";import{t as Wi}from"./tailwind-merge-D696Ktp4.js";import{c as fs}from"./class-variance-authority-Dp3B9jqt.js";import{m as $,A as gs}from"./framer-motion-BbmLq0Cl.js";import{l as Yi}from"./socket.io-client-CDVIIGn8.js";import{a as ge,b as Us,O as Me,d as Ve,e as te,f as Qi,g as S}from"./react-router-BFpToC45.js";import{u as q,a as Ue,P as Zi}from"./react-redux-BncAA63Z.js";import{W as Ki,q as Xi}from"./styled-components-CXXm4YiO.js";import"./hoist-non-react-statics-YaBvUGjL.js";import{c as eo,a as so,b as to}from"./@reduxjs-CJKGicFz.js";import{i as ao,g as no,G as ro,a as io,s as oo}from"./@firebase-CPC_Icac.js";import"./firebase-7R8iuKhc.js";import{u as lo,F as co,C as mo,b as ie}from"./react-hook-form-C2RIOGd4.js";import{t as oe}from"./@hookform-B9qcwMQs.js";import{o as ee,s as P,z as V,c as he,a as Le,i as js,b as xo}from"./zod-DuuFWEo9.js";import{e as uo}from"./react-datepicker-DO2Xantx.js";import{c as Ct}from"./classnames-C9FZUsQl.js";import{X as ho}from"./react-data-table-component-u-gqB3iy.js";import{b as po}from"./react-lazy-load-image-component-CX4kNI_A.js";import{A as fo,M as go,a as jo,I as yo}from"./@vis.gl-DHUIlKkL.js";import{u as bo}from"./embla-carousel-react-DOSwyVa-.js";import{p as No,a as wo,d as vo,P as So}from"./redux-persist-BactGK9Q.js";import{c as Co}from"./redux-148_fjri.js";import"./@remix-run-Dpdp2-eB.js";import"./react-remove-scroll-DakWl3RR.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C03ZW7um.js";import"./react-style-singleton-DOr91S0R.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BplmOTK8.js";import"./use-callback-ref-BxldKb1E.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-BZK1B8kt.js";import"./motion-utils-C_SlKRoS.js";import"./motion-dom-CBdO-PDy.js";import"./engine.io-client-C44f3zIw.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./use-sync-external-store-CizGdDK-.js";import"./react-is-D81haKYo.js";import"./@emotion-DfCv5vWB.js";import"./immer-C0GRqQ_d.js";import"./redux-thunk-CY0Q9z1Q.js";import"./idb-BXWtuYvb.js";import"./date-fns-DProGQ4x.js";import"./@babel-qzA2xDUI.js";import"./react-onclickoutside-SP4i7iMj.js";import"./react-popper-BRbXPTEq.js";import"./react-fast-compare-Cj-lYxGw.js";import"./@popperjs-BQBsAJpH.js";import"./warning-gh-g--Ws.js";import"./fast-deep-equal-BRC8syP0.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-ByjS_mI5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();function C(...s){return Wi(Ji(s))}const Js=s=>{const t=new Date-new Date(s),a=Math.floor(t/6e4),n=Math.floor(a/60),r=Math.floor(n/24);return r>0?`${r} days ago`:n>0?`${n} hours ago`:a>0?`${a} minutes ago`:"Just now"},To=s=>{const t=new Date,a=new Date(s),n=Math.ceil((a-t)/(1e3*60*60*24)),r=Math.ceil((a-t)/(1e3*60*60));return n>0?`${n} day${n>1?"s":""}`:`${r} hour${r>1?"s":""}`},Ws=fs("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),k=i.forwardRef(({className:s,variant:t,size:a,asChild:n=!1,...r},o)=>{const d=n?va:"button";return e.jsx(d,{className:C(Ws({variant:t,size:a,className:s})),ref:o,...r})});k.displayName="Button";const Ys=mi,gn=xi,ko=di,jn=i.forwardRef(({className:s,...t},a)=>e.jsx(Sa,{className:C("fixed inset-0 z-50 bg-background/80 backdrop-blur-2xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));jn.displayName=Sa.displayName;const Qs=i.forwardRef(({className:s,...t},a)=>e.jsxs(ko,{children:[e.jsx(jn,{}),e.jsx(Ca,{ref:a,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Qs.displayName=Ca.displayName;const Zs=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",s),...t});Zs.displayName="AlertDialogHeader";const Ks=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Ks.displayName="AlertDialogFooter";const ys=i.forwardRef(({className:s,...t},a)=>e.jsx(Ta,{ref:a,className:C("text-lg font-semibold",s),...t}));ys.displayName=Ta.displayName;const bs=i.forwardRef(({className:s,...t},a)=>e.jsx(ka,{ref:a,className:C("text-sm text-muted-foreground",s),...t}));bs.displayName=ka.displayName;const Xs=i.forwardRef(({className:s,...t},a)=>e.jsx(Pa,{ref:a,className:C(Ws(),s),...t}));Xs.displayName=Pa.displayName;const et=i.forwardRef(({className:s,...t},a)=>e.jsx(Fa,{ref:a,className:C(Ws({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));et.displayName=Fa.displayName;const Po=$.create(Ea),st=({title:s,description:t,handleClick:a,type:n,isDeleting:r})=>e.jsxs(Ys,{children:[e.jsx(gn,{asChild:!0,children:n==="button"?e.jsxs(k,{variant:"outline",className:"relative overflow-hidden group bg-red-600 text-white hover:bg-red-700 hover:text-white rounded-md transition-all duration-200 ease-in-out",children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[r&&e.jsx(Ee,{className:"w-5 h-5 animate-spin"}),s]}),e.jsx("div",{className:"absolute inset-0 bg-red-700 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-200 ease-out"})]}):e.jsx("div",{className:"relative inline-block",children:e.jsx(Po,{className:"w-5 h-5 cursor-pointer text-red-600 hover:text-red-700 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.95}})})}),e.jsxs(Qs,{className:"sm:max-w-[425px] bg-white dark:bg-gray-800 shadow-2xl",children:[e.jsxs(Zs,{children:[e.jsx(ys,{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Are you absolutely sure?"}),e.jsx(bs,{className:"text-gray-600 dark:text-gray-300 mt-2",children:t})]}),e.jsxs(Ks,{className:"mt-6 gap-2",children:[e.jsx(et,{disabled:r,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 transition-colors duration-200",children:"Cancel"}),e.jsx(Xs,{className:"relative overflow-hidden bg-red-600 hover:bg-red-700 focus:ring-red-600 text-white transition-all duration-200 ease-in-out disabled:opacity-70 disabled:cursor-not-allowed",onClick:a,disabled:r,children:e.jsx($.span,{className:"flex items-center justify-center gap-2",initial:!1,animate:{opacity:r?.8:1,scale:r?.98:1},children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Delete"})})})})]})]})]}),Fo=2,Eo=100;let ot=0;function Ro(){return ot=(ot+1)%Number.MAX_SAFE_INTEGER,ot.toString()}const lt=new Map,Ht=s=>{if(lt.has(s))return;const t=setTimeout(()=>{lt.delete(s),ls({type:"REMOVE_TOAST",toastId:s})},Eo);lt.set(s,t)},Do=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Fo)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Ht(a):s.toasts.forEach(n=>{Ht(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===a||a===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},Ms=[];let Ls={toasts:[]};function ls(s){Ls=Do(Ls,s),Ms.forEach(t=>{t(Ls)})}function Io({...s}){const t=Ro(),a=r=>ls({type:"UPDATE_TOAST",toast:{...r,id:t}}),n=()=>ls({type:"DISMISS_TOAST",toastId:t});return ls({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:r=>{r||n()}}}),{id:t,dismiss:n,update:a}}function Y(){const[s,t]=i.useState(Ls);return i.useEffect(()=>(Ms.push(t),()=>{const a=Ms.indexOf(t);a>-1&&Ms.splice(a,1)}),[s]),{...s,toast:Io,dismiss:a=>ls({type:"DISMISS_TOAST",toastId:a})}}let Rs=null;const Te=()=>{const s=i.useRef(null),[t,a]=i.useState(!1);i.useEffect(()=>{Rs||(Rs=Yi("https://kickzone-api.onrender.com",{withCredentials:!0,transports:["websocket","polling"]})),s.current=Rs;const d=()=>{console.log("Connected to server"),i.startTransition(()=>{a(!0)})},l=()=>{console.log("Disconnected from server"),i.startTransition(()=>{a(!1)})};return s.current.on("connect",d),s.current.on("disconnect",l),s.current.connected&&a(!0),()=>{s.current&&(s.current.off("connect",d),s.current.off("disconnect",l),document.hidden&&(s.current.disconnect(),Rs=null,s.current=null))}},[]);const n=(d,l)=>{s.current&&t?s.current.emit(d,l):console.warn("Socket is not connected, cannot emit:",d)},r=(d,l)=>{if(s.current)return s.current.on(d,l),()=>{var c;(c=s.current)==null||c.off(d,l)}},o=(d,l)=>{s.current&&(l?s.current.off(d,l):s.current.off(d))};return{socket:s.current,emit:n,subscribe:r,unsubscribe:o,isConnected:t}},Ao=({postId:s,parentId:t,isComment:a,setDeleteSuccess:n,authorId:r,userId:o})=>{const d=ge(),{toast:l}=Y(),{emit:c}=Te(),[u,x]=i.useState(!1),h=async()=>{x(!0);try{(await fetch(`/api/post/delete/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(c("newUnreadNotification",{userId:o,authorId:r,postId:s,type:"comment",action:"delete"}),l({title:"Success!",description:"Post deleted successfully"}),n(!0),(!t||!a)&&setTimeout(()=>{d("/")},500)):l({title:"Error!",description:"Failed to delete post",variant:"destructive"})}catch(p){console.log(p),x(!1)}};return e.jsx(st,{description:"Are you sure you want to delete this post?",type:"button",title:"Delete Post",handleClick:()=>{h(),n(!1)},isDeleting:u})},fe=({to:s})=>{const t=ge();return e.jsxs("button",{onClick:()=>t(s||-1),className:"inline-flex items-center px-3 py-2 mb-4 text-sm font-medium transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300",children:[e.jsx(lr,{className:"w-4 h-4 mr-2"}),"Back"]})},De=hi,as=pi,$o=ui,_o=Ia,yn=i.forwardRef(({className:s,...t},a)=>e.jsx(Ra,{ref:a,className:C("fixed inset-0 z-50 bg-background/80 backdrop-blur-2xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));yn.displayName=Ra.displayName;const Ae=i.forwardRef(({className:s,children:t,...a},n)=>e.jsxs($o,{children:[e.jsx(yn,{}),e.jsxs(Da,{ref:n,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(Ia,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ae.displayName=Da.displayName;const $e=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});$e.displayName="DialogHeader";const Oe=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Oe.displayName="DialogFooter";const _e=i.forwardRef(({className:s,...t},a)=>e.jsx($a,{ref:a,className:C("text-lg font-semibold leading-none tracking-tight",s),...t}));_e.displayName=$a.displayName;const Ge=i.forwardRef(({className:s,...t},a)=>e.jsx(_a,{ref:a,className:C("text-sm text-muted-foreground",s),...t}));Ge.displayName=_a.displayName;const Be=i.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:C("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));Be.displayName="Textarea";const Pe=Si,Ut=Ti,Fe=Ci,Se=i.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Ma,{ref:n,className:C("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(fi,{asChild:!0,children:e.jsx(gi,{className:"h-4 w-4 opacity-50"})})]}));Se.displayName=Ma.displayName;const bn=i.forwardRef(({className:s,...t},a)=>e.jsx(La,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ji,{})}));bn.displayName=La.displayName;const Nn=i.forwardRef(({className:s,...t},a)=>e.jsx(Oa,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(yi,{})}));Nn.displayName=Oa.displayName;const Ce=i.forwardRef(({className:s,children:t,position:a="popper",...n},r)=>e.jsx(bi,{children:e.jsxs(Ba,{ref:r,className:C("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...n,children:[e.jsx(bn,{}),e.jsx(Ni,{className:C("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Nn,{})]})}));Ce.displayName=Ba.displayName;const Mo=i.forwardRef(({className:s,...t},a)=>e.jsx(Va,{ref:a,className:C("px-2 py-1.5 text-sm font-semibold",s),...t}));Mo.displayName=Va.displayName;const se=i.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(za,{ref:n,className:C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(wi,{children:e.jsx(St,{className:"h-4 w-4"})})}),e.jsx(vi,{children:t})]}));se.displayName=za.displayName;const Lo=i.forwardRef(({className:s,...t},a)=>e.jsx(qa,{ref:a,className:C("-mx-1 my-1 h-px bg-muted",s),...t}));Lo.displayName=qa.displayName;const Oo={Inappropriate_content:"Inappropriate Content",Harassment:"Harassment",Spam:"Spam",Misinformation:"Misinformation",Hate_speech:"Hate Speech",Violence:"Violence",Copyright_infringement:"Copyright Infringement",Impersonation:"Impersonation",Other:"Other"},wn=({currentUserId:s,reportedUserId:t,contentType:a,contentId:n})=>{const[r,o]=i.useState(!1),[d,l]=i.useState(""),[c,u]=i.useState(""),x=ge(),{toast:h}=Y(),p=async()=>{if(!s){x("/sign-in");return}try{if((await fetch("/api/admin/add-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportedBy:s,reportedUser:t,contentType:a,contentId:n,reason:c,description:d})})).ok)h({title:"Report Submitted",description:"Thank you for helping us maintain a safe community."}),o(!1),l("");else throw new Error("Failed to submit report")}catch{h({title:"Error",description:"Failed to submit report. Please try again.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(!0),children:e.jsx(Gs,{className:"text-gray-500 w-4 h-4"})}),e.jsx(De,{open:r,onOpenChange:o,children:e.jsxs(Ae,{children:[e.jsxs($e,{children:[e.jsxs(_e,{children:["Report ",a]}),e.jsxs(Ge,{children:["Help us understand why you are reporting this ",a]})]}),e.jsxs(Pe,{onValueChange:u,value:c,children:[e.jsx(Se,{children:e.jsx(Fe,{placeholder:"Select a reason"})}),e.jsx(Ce,{children:Object.entries(Oo).map(([m,g])=>e.jsx(se,{value:m,children:g},m))})]}),e.jsx(Be,{placeholder:`Please provide details about why you are reporting this ${a}`,value:d,onChange:m=>l(m.target.value),className:"mt-4"}),e.jsxs(Oe,{children:[e.jsx(k,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(k,{onClick:p,disabled:!d.trim(),className:"bg-primary-500 hover:bg-purple-500",children:"Submit Report"})]})]})})]})},Jt=100,Bo=300,Vo={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}},zo={initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},pt=({id:s,currentUserId:t,parentId:a,content:n="",postPhoto:r,title:o,createdAt:d,initialLikes:l=[],author:c,comments:u=[],isComment:x,setDeleteSuccess:h,mainPostAuthorId:p,currentUserImg:m,currentUsername:g})=>{const[f,j]=i.useState(l),[y,N]=i.useState(!1),[b,v]=i.useState(!1),[R,I]=i.useState(!1),[w,A]=i.useState(!1),U=ge(),{socket:re,emit:B}=Te();i.useEffect(()=>{N(!!(t&&(l!=null&&l.includes(t))))},[t,l]);const z=i.useCallback(async O=>{!re||t===(c==null?void 0:c._id)||B("newUnreadNotification",{userId:t,authorId:c==null?void 0:c._id,postId:s,type:"like",userImg:m,username:g,action:O?"create":"delete"})},[re,t,c==null?void 0:c._id,s,B,m,g]),je=i.useCallback(async()=>{if(!t){U("/sign-in");return}if(!w){A(!0);try{const O=!y,Z=`/api/post/${O?"like":"unlike"}/${s}`;(await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})).ok&&(N(ve=>!ve),j(ve=>O?[...ve,t]:ve.filter(Fs=>Fs!==t)),await z(O))}catch(O){console.error("Error toggling like:",O)}finally{setTimeout(()=>A(!1),Bo)}}},[t,s,y,w,U,z]),K=O=>new Date(O).toLocaleString("en-UK",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"}),le=i.useCallback((O,Z)=>O.length<=Z?O:`${O.substr(0,Z)}...`,[]),W=()=>e.jsx("div",{children:e.jsxs(F,{to:`/post/${s}`,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-white",children:o}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:b?n:le(n,Jt)}),n.length>Jt&&e.jsx("button",{onClick:O=>{O.preventDefault(),v(!b)},className:"text-primary-500 hover:text-primary-600 text-sm font-medium",children:b?"Show less":"Read more"})]})}),ue=()=>e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(F,{to:`/profile/${c==null?void 0:c._id}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:(c==null?void 0:c.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:c==null?void 0:c.username,className:"w-8 h-8 rounded-full border-2 border-primary-500",loading:"lazy"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:c==null?void 0:c.username})]})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:K(d)})]}),G=()=>e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs($.button,{whileTap:{scale:.9},onClick:je,className:`flex items-center space-x-1 ${y?"text-red-500":"text-gray-500 dark:text-gray-400"} ${!t||w?"opacity-50 cursor-not-allowed":""}`,disabled:!t||w,children:[y?e.jsx(cr,{}):e.jsx(dr,{}),e.jsx("span",{children:(f==null?void 0:f.length)||0})]}),e.jsxs(F,{to:`/post/${s}`,className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[e.jsx(mr,{}),e.jsx("span",{children:(u==null?void 0:u.length)||0})]}),t&&t!==(c==null?void 0:c._id)&&e.jsx(wn,{currentUserId:t,reportedUserId:c==null?void 0:c._id,contentType:x?"Comment":"Post",contentId:s})]}),t===(c==null?void 0:c._id)&&e.jsxs("div",{className:"relative",children:[e.jsx(xr,{onClick:()=>I(!R),className:"cursor-pointer text-gray-500 dark:text-gray-400"}),e.jsx(gs,{children:R&&e.jsxs($.div,{...zo,className:"absolute right-3 bottom-5 w-30 bg-white dark:bg-gray-700 rounded-md shadow-lg border border-gray-300 dark:border-gray-600 z-50",children:[e.jsx(F,{to:x?`/post/comment/edit/${s}`:`/post/edit/${s}`,className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600",children:"Edit Post"}),e.jsx(Ao,{postId:s,parentId:a,isComment:x,authorId:x?p:c==null?void 0:c._id,userId:t,setDeleteSuccess:h})]})})]})]});return e.jsxs(e.Fragment,{children:[a&&!p&&e.jsx("div",{children:e.jsx(fe,{to:`/post/${a}`})}),e.jsx($.div,{...Vo,className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[r&&e.jsxs("div",{className:"md:w-1/3 relative",children:[e.jsx("img",{src:r,alt:"Post",className:"w-full h-48 md:h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[ue(),W(),G()]})]})})]})},qo=Ki`
  from {
   transform: rotate(0deg);
 }

  to {
    transform: rotate(360deg);
  }
`,Go=Xi.div`
  margin: 16px;
  animation: ${qo} 1s linear infinite;
  transform: translateZ(0);
  border-top: 2px solid grey;
  border-right: 2px solid grey;
  border-bottom: 2px solid grey;
  border-left: 4px solid black;
  background: transparent;
  width: 100px;
  height: 100px;
  border-radius: 50%;
`,D=()=>e.jsx("div",{className:"flex p-6 items-center justify-center h-full",children:e.jsx(Go,{})}),Ho=()=>{const[s,t]=i.useState([]),{currentUser:a}=q(h=>h.user),[n,r]=i.useState(!1),[o,d]=i.useState(!1),[l,c]=i.useState("default");i.useEffect(()=>{(async()=>{try{r(!0);const m=await(await fetch("/api/post/all")).json();t(m)}catch(p){console.log(p)}finally{r(!1)}})()},[o]);const u=i.useMemo(()=>{let h=[...s];switch(l){case"popular":h.sort((p,m)=>m.likes.length-p.likes.length);break;case"oldest":h.sort((p,m)=>new Date(p.createdAt)-new Date(m.createdAt));break;default:h.sort((p,m)=>new Date(m.createdAt)-new Date(p.createdAt));break}return h},[s,l]),x=h=>{c(h)};return n?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 justify-between mb-2",children:[e.jsx("div",{}),e.jsxs(Pe,{value:l,onValueChange:x,children:[e.jsx(Se,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Filters"})}),e.jsxs(Ce,{children:[e.jsx(se,{value:"default",children:"Default"}),e.jsx(se,{value:"popular",children:"Most Popular"}),e.jsx(se,{value:"oldest",children:"Oldest First"})]})]})]}),e.jsx("section",{className:"mt-9 flex flex-col gap-10",children:u.length===0?e.jsx("p",{className:"no-result",children:"No posts found"}):e.jsx(e.Fragment,{children:u.map(h=>e.jsx(pt,{id:h._id,currentUserId:(a==null?void 0:a._id)||"",currentUserImg:a==null?void 0:a.imageUrl,currentUsername:a==null?void 0:a.username,parentId:h.parentId,title:h.title,initialLikes:h.likes,content:h.postContent,postPhoto:h.imageUrl,author:h.author,createdAt:h.createdAt,comments:h.children,setDeleteSuccess:d},h._id))})})]})},cs=eo("user/fetchUserData",async(s,{rejectWithValue:t})=>{try{const a=await fetch(`/api/user/get/${s}`);if(!a.ok)throw new Error("Failed to fetch user data");return await a.json()}catch(a){return t(a.message)}}),Uo={currentUser:null,loading:!1,error:null},vn=so({name:"user",initialState:Uo,reducers:{signInStart:s=>{s.loading=!0},signInSuccess:(s,t)=>{s.currentUser=t.payload,s.loading=!1,s.error=null},signInFailure:(s,t)=>{s.loading=!1,s.error=t.payload},updateUserStart:s=>{s.loading=!0},updateUserSuccess:(s,t)=>{s.currentUser=t.payload,s.loading=!1,s.error=null},updateUserFailure:(s,t)=>{s.loading=!1,s.error=t.payload},deleteUserStart:s=>{s.loading=!0},deleteUserSuccess:s=>{s.currentUser=null,s.loading=!1,s.error=null},deleteUserFailure:(s,t)=>{s.loading=!1,s.error=t.payload},signOutUserStart:s=>{s.loading=!0},signOutUserSuccess:s=>{s.currentUser=null,s.loading=!1,s.error=null},signOutUserFailure:(s,t)=>{s.loading=!1,s.error=t.payload},updateOnboarding(s,t){s.currentUser&&(s.currentUser.isOnboardingCompleted=t.payload)},updateProfileFilled(s,t){s.currentUser&&(s.currentUser.isProfileFilled=t.payload)},extraReducers:s=>{s.addCase(cs.pending,t=>{t.loading=!0}).addCase(cs.fulfilled,(t,a)=>{t.currentUser=a.payload,t.loading=!1,t.error=null}).addCase(cs.rejected,(t,a)=>{t.loading=!1,t.error=a.payload})}}}),{signInStart:Jo,signInSuccess:Sn,signInFailure:ct,updateUserStart:yu,updateUserSuccess:bu,updateUserFailure:Nu,deleteUserStart:Wo,deleteUserSuccess:Yo,deleteUserFailure:Wt,signOutUserStart:Qo,signOutUserSuccess:Cn,signOutUserFailure:Yt,updateOnboarding:Zo,updateProfileFilled:Ko}=vn.actions,Xo=vn.reducer,el={apiKey:"AIzaSyCoSjgd-AFJhu0QV623MpdoeX_szMxHLAg",authDomain:"futbolistapro.firebaseapp.com",projectId:"futbolistapro",storageBucket:"futbolistapro.appspot.com",messagingSenderId:"534782489819",appId:"1:534782489819:web:74ba244a8d9d098a5ec8fe",measurementId:"G-ZEB5F3MEZ7"},Tn=ao(el);no(Tn);const sl={logo:s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...s,children:[e.jsx("rect",{width:"256",height:"256",fill:"none"}),e.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:s=>e.jsx("svg",{...s,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:s=>e.jsx("svg",{viewBox:"0 0 438.549 438.549",...s,children:e.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:s=>e.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...s,children:[e.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),e.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),e.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:s=>e.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...s,children:e.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:s=>e.jsx("svg",{role:"img",viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:s=>e.jsx("svg",{role:"img",viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:s=>e.jsx("svg",{role:"img",viewBox:"0 0 24 24",...s,children:e.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:s=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},kn=()=>{const s=Ue(),t=ge(),a=async()=>{try{const n=new ro,r=io(Tn),o=await oo(r,n),l=await(await fetch("/api/auth/google-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.user.displayName,email:o.user.email,photo:o.user.photoURL})})).json();s(Sn(l)),t("/")}catch(n){console.log("Could not sign in with Google",n)}};return e.jsxs(k,{type:"button",variant:"outline",onClick:a,children:[e.jsx(sl.google,{className:"mr-2 h-4 w-4"}),"Google"]})},E=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("rounded-xl border bg-card text-card-foreground shadow",s),...t}));E.displayName="Card";const H=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex flex-col space-y-1.5 p-6",s),...t}));H.displayName="CardHeader";const J=i.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:C("font-semibold leading-none tracking-tight",s),...t}));J.displayName="CardTitle";const He=i.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:C("text-sm text-muted-foreground",s),...t}));He.displayName="CardDescription";const L=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("p-6 pt-0",s),...t}));L.displayName="CardContent";const tt=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex items-center p-6 pt-0",s),...t}));tt.displayName="CardFooter";const Pn=Ei,Fn=Ri,En=Di,tl=i.forwardRef(({className:s,inset:t,children:a,...n},r)=>e.jsxs(Ga,{ref:r,className:C("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...n,children:[a,e.jsx(ki,{className:"ml-auto h-4 w-4"})]}));tl.displayName=Ga.displayName;const al=i.forwardRef(({className:s,...t},a)=>e.jsx(Ha,{ref:a,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));al.displayName=Ha.displayName;const Tt=i.forwardRef(({className:s,sideOffset:t=4,...a},n)=>e.jsx(Pi,{children:e.jsx(Ua,{ref:n,sideOffset:t,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));Tt.displayName=Ua.displayName;const Je=i.forwardRef(({className:s,inset:t,...a},n)=>e.jsx(Ja,{ref:n,className:C("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));Je.displayName=Ja.displayName;const nl=i.forwardRef(({className:s,children:t,checked:a,...n},r)=>e.jsxs(Wa,{ref:r,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ya,{children:e.jsx(St,{className:"h-4 w-4"})})}),t]}));nl.displayName=Wa.displayName;const rl=i.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Qa,{ref:n,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ya,{children:e.jsx(Fi,{className:"h-4 w-4 fill-current"})})}),t]}));rl.displayName=Qa.displayName;const kt=i.forwardRef(({className:s,inset:t,...a},n)=>e.jsx(Za,{ref:n,className:C("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));kt.displayName=Za.displayName;const zs=i.forwardRef(({className:s,...t},a)=>e.jsx(Ka,{ref:a,className:C("-mx-1 my-1 h-px bg-muted",s),...t}));zs.displayName=Ka.displayName;const Ns=i.forwardRef(({className:s,...t},a)=>e.jsx(Xa,{ref:a,className:C("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ns.displayName=Xa.displayName;const ws=i.forwardRef(({className:s,...t},a)=>e.jsx(en,{ref:a,className:C("aspect-square h-full w-full",s),...t}));ws.displayName=en.displayName;const Rn=i.forwardRef(({className:s,...t},a)=>e.jsx(sn,{ref:a,className:C("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Rn.displayName=sn.displayName;const ze=(s,t=null)=>{const{currentUser:a}=q(l=>l.user),[n,r]=i.useState([]),[o,d]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{if(!(a!=null&&a._id)&&!t)return;const u=await(await fetch(`/api/user/get/${t||(a==null?void 0:a._id)}`)).json();r(u),d(!1)}catch(c){console.log(c),d(!1)}finally{d(!1)}})()},[a==null?void 0:a._id,s,t]),{user:n,loading:o,currentUser:a}},at=()=>{var R;const{user:s,currentUser:t}=ze(),a=Ue(),n=ge(),{toast:r}=Y(),[o,d]=i.useState(!1),[l,c]=i.useState(null),[u,x]=i.useState(0),[h,p]=i.useState(0),[m,g]=i.useState({hasRoleChangeNotification:!1,hasDeletedContentNotification:!1}),{subscribe:f,unsubscribe:j,isConnected:y}=Te();i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t.isProfileFilled))return;const w=await fetch(`/api/user/get-account-id/${t==null?void 0:t._id}`);if(!w.ok)throw new Error("Failed to fetch account id");const A=await w.json();c(A)}catch(w){console.error("Error fetching account id:",w)}})()},[t]),i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id))return;const w=await fetch(`/api/notifications/unread-count/${t._id}`);if(!w.ok)throw new Error("Failed to fetch notifications");const A=await w.json();p(A.unreadCount||0)}catch(w){console.error("Error fetching notifications:",w)}})()},[t]),i.useEffect(()=>{(async()=>{try{if(!l)return;const w=await fetch(`/api/conversations/unread/${l}`);if(!w.ok)throw new Error("Failed to fetch unread messages");const A=await w.json();x(A||0)}catch(w){console.error("Error fetching unread messages:",w)}})()},[l]),i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id))return;const w=await fetch(`/api/user/has-admin-notification/${t==null?void 0:t._id}`);if(!w.ok)throw new Error("Failed to fetch admin notifications");const A=await w.json();g({hasRoleChangeNotification:A.hasRoleChangeNotification,hasDeletedContentNotification:A.hasDeletedContentNotification})}catch(w){console.error("Error checking admin notifications: ",w)}})()},[t]),i.useEffect(()=>{if(y)return f("getUnreadNotificationCount",I=>{p(I)}),f("getUnreadMessageCount",I=>{x(I)}),f("getUnreadCount",I=>{x(I)}),f("getCount",I=>{p(I)}),()=>{j("getUnreadNotificationCount"),j("getUnreadMessageCount"),j("getUnreadCount"),j("getCount")}},[f,j,y]);const N=async()=>{try{a(Qo());const I=await fetch("/api/auth/signout",{method:"POST",credentials:"include"}),w=await I.json();I.ok?(r({title:"Success!",description:"Logged out successfully"}),a(Cn()),n("/")):(r({title:"Error!",description:"Failed to log out",variant:"destructive"}),a(Yt(w.message)))}catch(I){a(Yt(I.message))}},b=({mobile:I=!1})=>e.jsxs(e.Fragment,{children:[e.jsx(F,{to:"/explore",className:`text-gray-600 hover:text-primary-500 transition-colors ${I?"block py-2 px-4 text-base":""}`,onClick:I?()=>d(!1):void 0,children:"Explore"}),e.jsx(F,{to:"/about",className:`text-gray-600 hover:text-primary-500 transition-colors ${I?"block py-2 px-4 text-base":""}`,onClick:I?()=>d(!1):void 0,children:"About"}),t&&!I&&e.jsxs(e.Fragment,{children:[e.jsxs(F,{to:"/notifications",className:"text-gray-600 hover:text-primary-500 transition-colors relative",children:[e.jsx(ss,{className:"w-5 h-5"}),h>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:h})]}),e.jsxs(F,{to:"/messages",className:"text-gray-600 hover:text-primary-500 transition-colors relative",children:[e.jsx(Os,{className:"w-5 h-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:u})]})]})]}),v=()=>m.hasRoleChangeNotification&&m.hasDeletedContentNotification&&t&&e.jsx(F,{to:"/admin-alerts",className:"text-gray-600 hover:text-primary-500 transition-colors relative",children:e.jsx(jr,{className:"w-5 h-5 text-red-500"})});return e.jsxs("nav",{className:"bg-white shadow-sm",children:[e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(F,{to:"/",className:"flex-shrink-0 flex items-center",onClick:()=>d(!1),children:[e.jsx("img",{src:"/logo_black.png",alt:"logo",className:"h-8 w-auto"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"KickZone"})]})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-8",children:e.jsx(b,{})}),e.jsx(v,{})]}),e.jsx("div",{className:"flex items-center",children:t?e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Pn,{children:[e.jsx(Fn,{asChild:!0,children:e.jsx(k,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs(Ns,{className:"h-8 w-8",children:[e.jsx(ws,{src:(s==null?void 0:s.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:"Profile photo"}),e.jsx(Rn,{children:(R=s==null?void 0:s.username)==null?void 0:R.charAt(0).toUpperCase()})]})})}),e.jsxs(Tt,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(kt,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium leading-none",children:[s.username," ",e.jsxs("span",{className:"text-xs text-gray-500",children:["[",s.role,"]"]})]}),e.jsx("p",{className:"text-xs leading-none text-gray-500",children:s.email})]})}),e.jsx(zs,{}),e.jsxs(En,{children:[e.jsx(Je,{asChild:!0,children:e.jsx(F,{to:"/user/profile",children:"Profile"})}),e.jsx(Je,{asChild:!0,children:e.jsx(F,{to:"/user/settings",children:"Settings"})})]}),e.jsx(zs,{}),e.jsx(Je,{onClick:N,children:"Log out"})]})]})}):e.jsx(F,{to:"/sign-in",className:"hidden sm:inline-block text-gray-600 hover:text-primary-500 transition-colors font-medium",children:"Log In"})}),e.jsx("div",{className:"flex items-center sm:hidden",children:e.jsxs(k,{variant:"ghost",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>d(!o),children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),o?e.jsx(da,{className:"block h-6 w-6","aria-hidden":"true"}):e.jsx(ur,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),o&&e.jsx("div",{className:"sm:hidden bg-white border-t border-gray-200",children:e.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[e.jsx(b,{mobile:!0}),t?e.jsxs(e.Fragment,{children:[e.jsxs(F,{to:"/notifications",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(ss,{className:"w-5 h-5 mr-3"}),"Notifications"]}),e.jsxs(F,{to:"/messages",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(Os,{className:"w-5 h-5 mr-3"}),"Messages"]}),e.jsxs(F,{to:"/user/profile",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(We,{className:"w-5 h-5 mr-3"}),"Profile"]}),e.jsxs(F,{to:"/user/settings",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(hr,{className:"w-5 h-5 mr-3"}),"Settings"]}),e.jsxs("button",{onClick:N,className:"flex items-center w-full text-left text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",children:[e.jsx(ma,{className:"w-5 h-5 mr-3"}),"Log out"]})]}):e.jsx(F,{to:"/sign-in",className:"block text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base font-medium",children:"Log In"}),e.jsxs(F,{to:"/terms",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(pr,{className:"w-5 h-5 mr-3"}),"Terms"]}),e.jsxs(F,{to:"/privacy",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(fr,{className:"w-5 h-5 mr-3"}),"Privacy"]}),e.jsxs(F,{to:"/contact",className:"flex items-center text-gray-600 hover:text-primary-500 transition-colors py-2 px-4 text-base",onClick:()=>d(!1),children:[e.jsx(gr,{className:"w-5 h-5 mr-3"}),"Contact"]})]})})]})},il=fs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Dn=i.forwardRef(({className:s,...t},a)=>e.jsx(tn,{ref:a,className:C(il(),s),...t}));Dn.displayName=tn.displayName;const xe=co,In=i.createContext({}),ol=({...s})=>e.jsx(In.Provider,{value:{name:s.name},children:e.jsx(mo,{...s})}),nt=()=>{const s=i.useContext(In),t=i.useContext(An),{getFieldState:a,formState:n}=lo(),r=a(s.name,n);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:s.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...r}},An=i.createContext({}),$n=i.forwardRef(({className:s,...t},a)=>{const n=i.useId();return e.jsx(An.Provider,{value:{id:n},children:e.jsx("div",{ref:a,className:C("space-y-2",s),...t})})});$n.displayName="FormItem";const _n=i.forwardRef(({className:s,...t},a)=>{const{error:n,formItemId:r}=nt();return e.jsx(Dn,{ref:a,className:C(n&&"text-destructive",s),htmlFor:r,...t})});_n.displayName="FormLabel";const Pt=i.forwardRef(({...s},t)=>{const{error:a,formItemId:n,formDescriptionId:r,formMessageId:o}=nt();return e.jsx(va,{ref:t,id:n,"aria-describedby":a?`${r} ${o}`:`${r}`,"aria-invalid":!!a,...s})});Pt.displayName="FormControl";const ll=i.forwardRef(({className:s,...t},a)=>{const{formDescriptionId:n}=nt();return e.jsx("p",{ref:a,id:n,className:C("text-[0.8rem] text-muted-foreground",s),...t})});ll.displayName="FormDescription";const Mn=i.forwardRef(({className:s,children:t,...a},n)=>{const{error:r,formMessageId:o}=nt(),d=r?String(r==null?void 0:r.message):t;return d?e.jsx("p",{ref:n,id:o,className:C("text-[0.8rem] font-medium text-destructive",s),...a,children:d}):null});Mn.displayName="FormMessage";const cl=()=>ee({username:P().trim().min(4,{message:"Username must be at least 4 characters."}).max(30,{message:"Username must not be longer than 30 characters."}),email:P().email({message:"Invalid email."}).trim(),password:P().trim().min(6,{message:"Password must be at least 6 characters."}).max(30,{message:"Password must not be longer than 30 characters."}),confirmPassword:P().trim()}).refine(s=>s.password===s.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}).refine(s=>s.username!==s.password,{message:"Username and password must be different.",path:["password"]}),dl=()=>ee({email:P().email({message:"Invalid email."}).trim(),password:P().trim().min(1,{message:"Password is required."})}),ml=()=>ee({username:P().trim().min(3,{message:"Username must be at least 3 characters."}),bio:P().trim().min(1,{message:"Bio is required."}).max(50,{message:"Bio must not be longer than 50 characters."}),wantedRole:P().min(1,{message:"Role is required"})}),xl=({onChange:s,initialDate:t,time:a,isPortal:n=!0,isEdit:r,placeholderText:o="Select date",...d})=>{const[l,c]=i.useState(r?new Date(t):null);return e.jsx(uo,{className:"border p-2 ml-2 h-[36px] rounded-md w-full shadow-sm ring-2 ring-white hover:ring-primary-500 transition duration-300",showTimeSelect:a,showMonthDropdown:!0,showYearDropdown:!0,autoComplete:"off",scrollableYearDropdown:!0,yearDropdownItemNumber:120,placeholderText:o,selected:l,onChange:u=>{c(u),s(u)},withPortal:n,...d})},ul=({placeholder:s,items:t,onChange:a,isDisabled:n,defaultValue:r,idFlag:o,isEdit:d})=>e.jsxs(Pe,{onValueChange:a,children:[e.jsx(Pt,{children:e.jsx(Se,{disabled:n,className:"w-full h-[36px] shadow-sm resize-none ring-2 ring-white hover:ring-primary-500 transition duration-300",children:e.jsx(Fe,{className:"w-full",placeholder:d?r:s})})}),e.jsx(Ce,{children:Array.isArray(t)&&t.length>0?e.jsx(Ut,{className:t.length>4?"h-48":"",children:t==null?void 0:t.map(l=>e.jsx(se,{value:o?(l==null?void 0:l.id)||"unknown-id":(l==null?void 0:l.name)||"unknown-name",children:l.name||"Unnamed"},(l==null?void 0:l.id)||(l==null?void 0:l.name)||Math.random()))}):e.jsx(Ut,{children:e.jsx(se,{value:"no-data",disabled:!0,children:"No data available"})})})]}),Ln=i.forwardRef(({className:s,...t},a)=>e.jsx(an,{ref:a,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Ii,{className:C("flex items-center justify-center text-current"),children:e.jsx(St,{className:"h-4 w-4"})})}));Ln.displayName=an.displayName;const qe=i.forwardRef(({className:s,type:t,...a},n)=>e.jsx("input",{type:t,className:C("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...a}));qe.displayName="Input";const T=({label:s,type:t,fileRef:a,currentUserPhoto:n,form:r,name:o,idFlag:d,isEdit:l,items:c,time:u,setFile:x,labelName:h,placeholder:p,isPortal:m,onChange:g,defaultValue:f,initialDate:j,isDisabled:y,styles:N,icon:b,...v})=>{const[R,I]=i.useState(!1);return e.jsx(ol,{control:r.control,name:o,render:({field:w})=>e.jsxs($n,{className:"mb-6",children:[e.jsx(_n,{className:"mb-2 text-sm font-semibold text-gray-700",children:s}),e.jsx(Pt,{children:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-4",children:[b&&e.jsx("span",{className:"text-gray-400",children:b}),t==="password"?e.jsxs("div",{className:"relative w-full",children:[e.jsx(qe,{...w,id:o,type:R?"text":"password",className:Ct("w-full pr-10 rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition duration-300",N),disabled:y,placeholder:p,...v}),e.jsx("button",{type:"button",onClick:()=>I(!R),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:R?e.jsx(yr,{className:"h-5 w-5"}):e.jsx(br,{className:"h-5 w-5"})})]}):t==="file"?e.jsx(hl,{field:w,fileRef:a,setFile:x,onChange:g,name:o,currentUserPhoto:n,...v}):t==="textarea"?e.jsx(pl,{field:w,name:o,placeholder:p,...v}):t==="select"?e.jsx(fl,{field:w,name:o,items:c,isDisabled:y,defaultValue:f,placeholder:p,idFlag:d,isEdit:l}):t==="date"?e.jsx(gl,{field:w,name:o,initialDate:j,time:u,placeholder:p,isPortal:m,isEdit:l}):t==="checkbox"?e.jsx(jl,{field:w,name:o,labelName:h}):e.jsx(yl,{field:w,type:t,name:o,isDisabled:y,placeholder:p,styles:N,...v})]})}),e.jsx(Mn,{className:"mt-1 text-xs text-red-500"})]})})},hl=({field:s,fileRef:t,setFile:a,name:n,onChange:r,currentUserPhoto:o,...d})=>e.jsxs("div",{className:"flex flex-col items-center",children:[n==="logo"||n==="postPhoto"?null:e.jsx("img",{src:o||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",className:"mb-4 h-32 w-32 cursor-pointer rounded-full object-cover ring-2 ring-white transition duration-300 hover:ring-primary-500",onClick:()=>t.current.click(),alt:"Profile Picture"}),e.jsx(qe,{id:n,type:"file",ref:t,accept:"image/*",onChange:l=>{var c;r&&r(l),a&&a(l.target.files[0]),s.onChange(((c=l.target.files)==null?void 0:c[0])??void 0)},className:"file:mr-4 file:py-0 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100",...d})]}),pl=({field:s,name:t,placeholder:a,...n})=>e.jsx(Be,{...s,id:t,placeholder:a,rows:t==="postContent"||t==="content"?15:t==="message"?5:3,className:Ct("w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition duration-300",t==="postContent"&&"h-64",t==="message"&&"h-32"),...n}),fl=({field:s,name:t,items:a,defaultValue:n,placeholder:r,isDisabled:o,idFlag:d,isEdit:l})=>e.jsx(ul,{id:t,items:a,defaultValue:n||null,placeholder:r,isDisabled:o,idFlag:d,onChange:s.onChange,isEdit:l,className:"w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition duration-300"}),gl=({field:s,name:t,initialDate:a,time:n,placeholder:r,isPortal:o,isEdit:d})=>e.jsx(xl,{id:t,initialDate:a,time:n,onChange:l=>s.onChange(l),placeholderText:r,isPortal:o,isEdit:d,className:"w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition duration-300"}),jl=({field:s,name:t,labelName:a})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ln,{id:t,checked:s.value,onCheckedChange:s.onChange,className:"w-5 h-5"}),e.jsx("label",{className:"text-sm text-white",children:a})]}),yl=({field:s,type:t,name:a,isDisabled:n,placeholder:r,styles:o,...d})=>e.jsx(qe,{...s,id:a,type:t,className:Ct("w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 transition duration-300",o),disabled:n||!1,placeholder:r,...d}),bl=fs("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),On=i.forwardRef((s,t)=>{const{className:a,variant:n,...r}=s;return e.jsx("div",{ref:t,role:"alert",className:C(bl({variant:n}),a),...r})});On.displayName="Alert";const Bn=i.forwardRef((s,t)=>{const{className:a,...n}=s;return e.jsx("h5",{ref:t,className:C("mb-1 font-medium leading-none tracking-tight",a),...n})});Bn.displayName="AlertTitle";const Vn=i.forwardRef((s,t)=>{const{className:a,...n}=s;return e.jsx("div",{ref:t,className:C("text-sm [&_p]:leading-relaxed",a),...n})});Vn.displayName="AlertDescription";const Nl=()=>{const s=Ue(),t=ge(),{toast:a}=Y(),[n,r]=i.useState(null),[o,d]=i.useState(!1),l=ie({resolver:oe(dl()),defaultValues:{email:"",password:""},mode:"onChange"}),c=async u=>{try{if(d(!0),!(await(await fetch(`/api/auth/check-email?email=${u.email}`)).json()).exists){l.setError("email",{type:"manual",message:"Email does not exist"});return}s(Jo());const p=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),m=await p.json();if(m.statusCode===405&&m.banInfo&&r(m.banInfo),m.statusCode===403){l.setError("password",{type:"manual",message:"Invalid password"});return}if(m.success===!1){s(ct(m.message));return}p.ok?(a({title:"Success!",description:"Logged in successfully"}),d(!1),s(Sn(m)),m.isOnboardingCompleted?t("/"):t("/onboarding")):(a({title:"Error!",description:"Failed to log in",variant:"destructive"}),s(ct(m.message)))}catch(x){s(ct(x.message))}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(at,{}),e.jsxs("div",{className:"flex flex-col p-3 max-w-lg mx-auto mt-28",children:[n&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-6",children:e.jsxs(On,{variant:"destructive",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsxs(Bn,{className:"flex items-center gap-2",children:[e.jsx(ds,{})," Account Suspended"]}),e.jsxs(Vn,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{}),e.jsxs("span",{children:["Ban expires in: ",To(n.endDate)]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Reason:"})," ",n.reason]}),n.endDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Until:"})," ",new Date(n.endDate).toLocaleString()]}),n.bannedBy&&e.jsxs("div",{children:[e.jsx("strong",{children:"Banned by:"})," ",n.bannedBy.username]})]})]})})}),e.jsx(xe,{...l,children:e.jsx("form",{onSubmit:l.handleSubmit(c),children:e.jsxs(E,{children:[e.jsxs(H,{className:"space-y-1",children:[e.jsx(J,{className:"text-2xl",children:"Log in to KickZone"}),e.jsx(He,{children:"Enter your credentials below to log in to your account"})]}),e.jsxs(L,{className:"grid gap-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(kn,{})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background text-muted-foreground",children:"Or continue with"})})]}),e.jsx("div",{children:e.jsx(T,{id:"email",label:"Email",type:"email",form:l,name:"email",placeholder:"m@example.com"})}),e.jsx("div",{children:e.jsx(T,{id:"password",label:"Password",type:"password",form:l,name:"password"})})]}),e.jsx(tt,{children:e.jsx(k,{type:"submit",className:"w-full bg-primary-500 hover:bg-purple-500",disabled:!!n||o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Login in..."})]}):e.jsx("span",{children:"Log In"})})}),e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("span",{className:"text-gray-600 px-2",children:"Not a member yet?"}),e.jsx(F,{to:"/sign-up",className:"text-blue-700 underline",children:"Sign up"})]})]})})})]})]})},wl=()=>{const[s,t]=i.useState(!1),a=ge(),{toast:n}=Y(),r=ie({resolver:oe(cl()),defaultValues:{username:"",email:"",password:"",confirmPassword:""},mode:"onChange"}),o=async d=>{try{const l=await fetch(`/api/auth/check-username?username=${d.username}`),c=await fetch(`/api/auth/check-email?email=${d.email}`),u=await l.json(),x=await c.json();if(u.exists){r.setError("username",{type:"manual",message:"Username already exists"}),t(!1);return}if(x.exists){r.setError("email",{type:"manual",message:"Email already exists"}),t(!1);return}(await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok?(n({title:"Account created successfully",description:"You can now sign in to your account"}),t(!0),a("/sign-in")):(n({title:"Error!",description:"Failed to create account",variant:"destructive"}),t(!1))}catch{t(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(at,{}),e.jsx("div",{className:"flex flex-col p-3 max-w-lg mx-auto mt-28",children:e.jsx(xe,{...r,children:e.jsx("form",{onSubmit:r.handleSubmit(o),children:e.jsxs(E,{children:[e.jsxs(H,{className:"space-y-1",children:[e.jsx(J,{className:"text-2xl",children:"Create an account"}),e.jsx(He,{children:"Enter your credentials below to create your account"})]}),e.jsxs(L,{className:"grid gap-1",children:[e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(kn,{})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative py-3 flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background text-muted-foreground",children:"Or continue with"})})]}),e.jsx("div",{children:e.jsx(T,{id:"username",label:"Username",type:"text",form:r,name:"username"})}),e.jsx("div",{children:e.jsx(T,{id:"email",label:"Email",type:"email",form:r,name:"email",placeholder:"m@example.com"})}),e.jsx("div",{children:e.jsx(T,{id:"password",label:"Password",type:"password",form:r,name:"password"})}),e.jsx("div",{children:e.jsx(T,{id:"confirmPassword",label:"Confirm Password",type:"password",form:r,name:"confirmPassword"})})]}),e.jsx(tt,{children:e.jsx(k,{type:"submit",className:"w-full bg-primary-500 hover:bg-purple-500",disabled:s,children:s?"Creating...":"Create account"})}),e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("span",{className:"text-gray-600 px-2",children:"Already have an account?"}),e.jsx(F,{to:"/sign-in",className:"text-blue-700 underline",children:"Sign in"})]})]})})})})]})},Q=i.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...n},r)=>e.jsx(nn,{ref:r,decorative:a,orientation:t,className:C("shrink-0 bg-border bg-primary-500 my-3",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));Q.displayName=nn.displayName;const vl=[{title:"Profile",href:"/user/profile"},{title:"Player Profile",href:"/user/player/profile",role:"Player"},{title:"Referee Profile",href:"/user/referee/profile",role:"Referee"},{title:"Coach Profile",href:"/user/coach/profile",role:"Coach"},{title:"Admin Profile",href:"/user/admin/profile",role:"Admin"},{title:"Settings",href:"/user/settings"}],Sl=({className:s,...t})=>{const{currentUser:a}=q(r=>r.user),{pathname:n}=Us();return e.jsx("nav",{className:C("flex flex-col lg:space-x-0 lg:space-y-1 max-sm:grid max-sm:grid-cols-2 max-sm:gap-3 max-md:grid max-md:grid-cols-3 max-md:gap-2 max-lg:grid max-lg:grid-cols-4 max-lg:gap-2 ",s),...t,children:vl.map(r=>(a==null?void 0:a.role)===r.role||!r.role?e.jsx(F,{to:r.href,className:C(Ws({variant:"ghost"}),n===r.href?"bg-primary-500 text-white hover:bg-primary-500 hover:text-white w-full":"hover:bg-transparent hover:underline ","justify-start "),children:r.title},r.href):null)})};function Cl(){const{currentUser:s}=q(t=>t.user);return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx(at,{}),e.jsxs("div",{className:"space-y-6 p-4 pb-16 pt-24",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings."})]}),e.jsx(Q,{className:"my-6"}),e.jsxs("div",{className:"flex flex-col lg:flex-row ",children:[e.jsx("aside",{className:"pr-12",children:e.jsx(Sl,{})}),e.jsx("div",{className:"flex-1 max-sm:py-10 max-md:py-10 max-lg:py-10 ",children:e.jsx(Me,{})})]})]})]}):e.jsx(Ve,{to:"/sign-in"})})}const ft=Ai,gt=$i,qs=i.forwardRef(({className:s,align:t="center",sideOffset:a=4,...n},r)=>e.jsx(rn,{ref:r,align:t,sideOffset:a,className:C("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n}));qs.displayName=rn.displayName;const Tl=V.object({username:V.string().min(4,{message:"Username must be at least 4 characters."}).max(30,{message:"Username must not be longer than 30 characters."}),email:V.string().email().min(4,{message:"Email must be valid."}),bio:V.string().min(4,{message:"Bio must be at least 4 characters."}).max(160,{message:"Bio must not be longer than 160 characters."}),wantedRole:V.string()}),kl=()=>{const s=i.useRef(null),[t,a]=i.useState(),[n,r]=i.useState(!1),{user:o,loading:d}=ze(n),{toast:l}=Y(),c=ie({resolver:oe(Tl),defaultValues:{name:"",email:"",bio:"",photo:"",wantedRole:""},mode:"onChange"});i.useEffect(()=>{o&&c.reset({username:(o==null?void 0:o.username)||"",email:(o==null?void 0:o.email)||"",bio:(o==null?void 0:o.bio)||"",photo:(o==null?void 0:o.imageUrl)||"",wantedRole:(o==null?void 0:o.role)||""})},[o,n]);const u=async x=>{const h=new FormData;h.append("photo",t||(o==null?void 0:o.photo)),h.append("username",x.username),h.append("email",x.email),h.append("bio",x.bio),h.append("wantedRole",x.wantedRole);try{(await fetch(`/api/user/add/${o==null?void 0:o._id}`,{method:"POST",body:h})).ok?(l({title:"Success!",description:"User profile updated successfully"}),r(!n)):l({title:"Error!",description:"Failed to update user profile",variant:"destructive"})}catch(p){console.log(p)}};return d?e.jsx(D,{}):e.jsx(E,{className:"p-6 bg-white shadow-md rounded-lg",children:e.jsx(xe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(T,{id:"username",label:"Username",type:"text",form:c,name:"username",icon:e.jsx(Nr,{className:"text-gray-500"})}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{id:"wantedRole",label:"Role",type:"select",form:c,items:[{id:1,name:"Player"},{id:2,name:"Coach"},{id:3,name:"Referee"}],name:"wantedRole",placeholder:(o==null?void 0:o.role)||"Select role",icon:e.jsx(yt,{className:"text-gray-500"})}),e.jsx("div",{className:"absolute top-0 right-0 flex items-center justify-center w-6 h-6 bg-gray-200 rounded-full cursor-pointer group",children:e.jsxs(ft,{children:[e.jsx(gt,{children:e.jsx(Bs,{className:"text-gray-500"})}),e.jsx(qs,{children:"You can change your role here and wait for an admin to approve it."})]})})]})]}),e.jsx(T,{id:"email",label:"Email",type:"email",form:c,name:"email",icon:e.jsx(Os,{className:"text-gray-500"})}),e.jsx(T,{id:"bio",label:"Bio",type:"textarea",form:c,name:"bio",icon:e.jsx(ds,{className:"text-gray-500"})}),e.jsx(T,{id:"photo",label:"Photo",type:"file",form:c,name:"photo",fileRef:s,setFile:a,currentUserPhoto:(o==null?void 0:o.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",icon:e.jsx(wr,{className:"text-gray-500"})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-primary-600 text-white px-6 py-3 rounded-md shadow transition-colors duration-300",children:"Save"})})]})})})},Pl=()=>e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This is how others will see you on the site."})]}),e.jsx(Q,{}),e.jsx(kl,{})]}),Fl=V.object({currentPassword:V.string().min(6,{message:"Password must be at least 6 characters."}),newPassword:V.string().min(6,{message:"Password must be at least 6 characters."}).max(20,{message:"Password must not be longer than 20 characters."}),confirmPassword:V.string().min(6,{message:"Password must be at least 6 characters."}).max(20,{message:"Password must not be longer than 20 characters."})}).refine(s=>s.newPassword===s.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]}),El=()=>{const{currentUser:s}=q(r=>r.user),{toast:t}=Y(),a=ie({resolver:oe(Fl),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""},mode:"onChange"}),n=async r=>{try{const o=await fetch(`/api/user/change-password/${s._id}`,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});(await o.json()).statusCode===403&&a.setError("currentPassword",{type:"manual",message:"Invalid password"}),o.status===200?(t({title:"Success!",description:"Password updated successfully"}),a.reset()):t({title:"Error!",description:"Failed to update password",variant:"destructive"})}catch(o){console.log(o)}};return e.jsxs(E,{className:"px-4 py-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Change Password"}),e.jsx(xe,{...a,children:e.jsxs("form",{className:"space-y-4",onSubmit:a.handleSubmit(n),children:[e.jsx(T,{id:"currentPassword",label:"Current Password",type:"password",form:a,name:"currentPassword"}),e.jsx(T,{id:"newPassword",label:"New Password",type:"password",form:a,name:"newPassword"}),e.jsx(T,{id:"confirmPassword",label:"Confirm Password",type:"password",form:a,name:"confirmPassword"}),e.jsx(k,{type:"submit",className:"w-full bg-primary-500 hover:bg-purple-500 text-white font-bold py-2 px-4 rounded",children:"Save"})]})})]})},Rl=()=>{const{currentUser:s}=q(r=>r.user),t=Ue(),a=ge(),n=async()=>{try{t(Wo());const o=await(await fetch(`/api/user/delete/${s._id}`,{method:"DELETE"})).json();if(o.success===!1){t(Wt(o.message));return}t(Yo()),a("/sign-in")}catch(r){t(Wt(r.message))}};return e.jsxs(E,{className:"px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Account Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Delete Account"}),e.jsx("p",{className:"text-gray-500",children:"Delete your account and remove your data from our servers."})]}),e.jsx(st,{title:"Delete Account",description:"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",handleClick:n,type:"button",className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:"Delete Account"})]})},Dl=()=>e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your account"})]}),e.jsx(Q,{}),e.jsx(El,{}),e.jsx(Q,{}),e.jsx(Rl,{})]}),Qt=()=>{const{currentUser:s}=q(t=>t.user);return s&&s.role==="Admin"?e.jsx(Me,{}):e.jsx(Ve,{to:"/"})},dt=()=>ee({homeTeamScore:he.number().gte(0,"Goals must be a positive number"),awayTeamScore:he.number().gte(0,"Goals must be a positive number")}),Il=()=>ee({goals:he.number().gte(0,"Goals must be a positive number"),assists:he.number().gte(0,"Assists must be a positive number"),yellowCards:he.number().gte(0).lte(2,"Yellow Cards must be a positive number and cannot exceed 2"),redCards:he.number().gte(0).lte(1,"Red Cards must be a positive number and cannot exceed 1"),ownGoals:he.number().gte(0,"Own Goals must be a positive number"),cleanSheets:he.number().gte(0,"Clean Sheets must be a positive number").lte(1,"Clean Sheets cannot exceed 1").optional(),minutesPlayed:he.number().gte(0,"Minutes Played must be a positive number").lte(90,"Minutes Played cannot exceed 90")}),Al=s=>{const[t,a]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const r=await fetch(`/api/referee/season/${s}`);if(!r.ok)throw new Error("Failed to fetch season data!");const o=await r.json();a(o)}catch(r){console.log(r)}})()},[s]),t},$l=({data:s})=>{const t=te().id,a=Al(t),{toast:n}=Y(),[r,o]=i.useState(!1),[d,l]=i.useState(!0),c=ie({resolver:oe(Il()),defaultValues:{goals:0,assists:0,yellowCards:0,redCards:0,ownGoals:0,cleanSheets:0,minutesPlayed:90},mode:"onChange"});i.useEffect(()=>{(async()=>{try{const p=await fetch(`/api/referee/match-stats/${t}/${s==null?void 0:s._id}`);if(p.ok){const m=await p.json();o(!0),c.reset(m),l(!1)}else p.status===404&&(o(!1),c.reset())}catch(p){console.log(p)}finally{l(!1)}})()},[s,t]);const u=async h=>{try{const p=await fetch("/api/referee/add-match-stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,player:s==null?void 0:s._id,season:a,matchId:t})});if(p.ok)o(!0),n({title:"Success!",description:"Player stats added successfully"});else{const m=await p.json();n({title:"Error!",description:m.message||"Failed to add player stats",variant:"destructive"})}}catch(p){console.log(p)}},x=async()=>{try{(await fetch(`/api/referee/delete-stats/${t}/${s==null?void 0:s._id}`,{method:"DELETE"})).ok?(o(!1),c.reset({goals:0,assists:0,yellowCards:0,redCards:0,ownGoals:0,cleanSheets:0,minutesPlayed:90},{keepValues:!1}),n({title:"Success!",description:"Player stats removed successfully"})):n({title:"Error!",description:"Failed to remove player stats",variant:"destructive"})}catch(h){console.log(h)}};return d?e.jsx(D,{}):e.jsx("div",{className:"bg-gray-100 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Player Stats"}),e.jsx(xe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(u),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(T,{id:"minutesPlayed",label:"Minutes Played",type:"number",form:c,name:"minutesPlayed",styles:"w-full"}),e.jsx(T,{id:"goals",label:"Goals",type:"number",form:c,name:"goals",styles:"w-full"}),e.jsx(T,{id:"assists",label:"Assists",type:"number",form:c,name:"assists",styles:"w-full"}),e.jsx(T,{id:"yellowCards",label:"Yellow Cards",type:"number",form:c,name:"yellowCards",styles:"w-full"}),e.jsx(T,{id:"redCards",label:"Red Cards",type:"number",form:c,name:"redCards",styles:"w-full"}),e.jsx(T,{id:"ownGoals",label:"Own Goals",type:"number",form:c,name:"ownGoals",styles:"w-full"}),(s==null?void 0:s.position)==="Goalkeeper"&&e.jsx(T,{id:"cleanSheets",label:"Clean Sheets",type:"number",form:c,name:"cleanSheets",styles:"w-full"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(k,{type:"submit",className:"bg-primary-500 text-white hover:bg-purple-500 px-4 py-2 rounded-md",disabled:c.getValues("minutesPlayed")==="0",children:"Save"}),e.jsx(k,{type:"button",variant:"destructive",className:"bg-red-500 text-white hover:bg-red-600 px-4 py-2 rounded-md ml-4",disabled:!r,onClick:x,children:"Reset Stats"})]})]})})]})})},rt=({columns:s,data:t,isExpandable:a=!1,searchable:n=!0,pending:r=!1,pagination:o=!1,defaultSortFieldId:d})=>{const[l,c]=i.useState(""),[u,x]=i.useState(r),[h,p]=i.useState(!1);i.useEffect(()=>{const b=()=>p(window.innerWidth<768);return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=i.useMemo(()=>t==null?void 0:t.filter(b=>{var v;return(v=Object.values(b))==null?void 0:v.some(R=>typeof R=="string"&&R.toLowerCase().includes(l.toLowerCase()))}),[t,l]);i.useEffect(()=>{const b=setTimeout(()=>{x(!1)},500);return()=>clearTimeout(b)},[]);const g=(b,v)=>typeof v.selector=="function"?v.selector(b):typeof v.selector=="string"?b[v.selector]:v.cell?v.cell(b):"",f=s.filter(b=>{var v;return b.name!=="No."&&b.selector!=="index"&&!((v=b.name)!=null&&v.toLowerCase().includes("no."))}),j=({data:b})=>e.jsxs(E,{className:"mb-4 overflow-hidden border border-slate-200",children:[e.jsx("div",{className:"p-4 space-y-3",children:f.map((v,R)=>e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500",children:v.name}),e.jsx("span",{className:"text-sm text-right text-slate-900",children:g(b,v)})]},R))}),a&&e.jsx("div",{className:"border-t border-slate-200 p-3 bg-slate-50",children:e.jsxs("button",{className:"w-full flex items-center justify-center text-sm text-slate-600",children:["View Details",e.jsx(xa,{className:"ml-1 h-4 w-4"})]})})]}),y=()=>{var b;return e.jsx("div",{className:"space-y-4",children:(b=n?m:t)==null?void 0:b.map((v,R)=>e.jsx(j,{data:v},R))})},N={table:{style:{backgroundColor:"white",borderRadius:"0.75rem"}},headRow:{style:{backgroundColor:"#f8fafc",borderBottom:"2px solid #e2e8f0",minHeight:"3.5rem"}},headCells:{style:{color:"#1e293b",fontSize:"0.875rem",fontWeight:"600",padding:"1rem"}},cells:{style:{padding:"1rem",fontSize:"0.875rem",color:"#334155"}},rows:{style:{backgroundColor:"white","&:nth-of-type(odd)":{backgroundColor:"#f8fafc"},"&:hover":{backgroundColor:"#f1f5f9"},minHeight:"3.5rem"}}};return e.jsx(E,{className:"w-full overflow-hidden rounded-xl shadow-lg border border-slate-200",children:e.jsxs("div",{className:"flex flex-col",children:[n&&e.jsx("div",{className:"p-4 border-b border-slate-200 bg-white",children:e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:e.jsx(bt,{className:"h-4 w-4 text-slate-400"})}),e.jsx(qe,{type:"text",placeholder:"Search...",className:`pl-10 pr-4 py-2 w-full bg-slate-50 border-slate-200 rounded-lg\r
                         focus:ring-2 focus:ring-blue-500 focus:border-blue-500\r
                         placeholder:text-slate-400 text-sm`,value:l,onChange:b=>c(b.target.value)})]})}),e.jsx("div",{className:"relative",children:h?e.jsx("div",{className:"p-4",children:e.jsx(y,{})}):e.jsx(ho,{columns:s,data:n?m:t,customStyles:N,highlightOnHover:!0,pointerOnHover:!0,progressPending:u,progressComponent:e.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:e.jsx(D,{})}),pagination:o,paginationPerPage:10,paginationRowsPerPageOptions:[10,25,50],expandableRows:a,expandableRowsComponent:$l,expandOnRowClicked:!0,defaultSortFieldId:d,defaultSortAsc:!1,noDataComponent:e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No records to display"})})})]})})},Ft=({label:s,title:t,onSubmit:a,data:n,fields:r,edit:o,form:d,isRole:l,add:c,setFile:u,isOpen:x,onClose:h,onOpen:p,isLoading:m,loadingIcon:g})=>{const f=i.useRef(null);i.useEffect(()=>{n&&d.reset({...n})},[n]);const j=()=>{const b="hover:scale-105 transition-all duration-200";return o?e.jsx($.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(_i,{className:"w-5 h-5 cursor-pointer text-gray-600 hover:text-primary-500 transition-colors"})}):c?e.jsx($.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(Mi,{className:"w-5 h-5 cursor-pointer text-gray-600 hover:text-primary-500 transition-colors"})}):e.jsx($.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(k,{variant:"outline",className:`${b} bg-primary-500 mb-3 text-white hover:bg-primary-600 shadow-md hover:shadow-lg hover:text-white`,children:s})})},y={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,staggerChildren:.1}}},N={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return e.jsxs(De,{open:x,onOpenChange:b=>b?p():h(),children:[e.jsx(as,{asChild:!0,children:j()}),e.jsx(Ae,{className:"sm:max-w-[825px] w-full mx-auto backdrop-blur-sm bg-white/95",children:e.jsxs($.div,{className:"max-h-[80vh] overflow-y-auto p-6",initial:"hidden",animate:"visible",variants:y,children:[e.jsxs($e,{className:"space-y-3",children:[e.jsx(_e,{className:"text-2xl font-bold bg-gradient-to-r from-primary-500 to-primary-600 bg-clip-text text-transparent",children:t}),e.jsx(Ge,{className:"text-gray-500"})]}),e.jsx(xe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(a),className:"space-y-6 mt-6",children:[l&&e.jsx($.div,{variants:N,className:"bg-primary-50 p-4 rounded-lg border border-primary-200",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["User"," ",e.jsx("span",{className:"font-bold text-primary-700",children:n.username})," ","wants to have the role:"," ",e.jsx("span",{className:"italic text-primary-600",children:n.wantedRole})]})}),e.jsx($.div,{variants:N,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((b,v)=>e.jsx($.div,{variants:N,initial:"hidden",animate:"visible",transition:{delay:v*.1},children:e.jsx(T,{form:d,isEdit:o,fileRef:b.type==="file"?f:null,setFile:b.type==="file"?u:null,...b})},b.id))}),e.jsx(Oe,{children:e.jsx($.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full sm:w-auto",children:e.jsx(k,{type:"submit",disabled:m,className:"w-full sm:w-auto bg-primary-500 text-white hover:bg-primary-600 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs("div",{className:"flex items-center gap-2",children:[g||e.jsx(Ee,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):t})})})]})})]})})]})},ne=({apiPath:s,columns:t,fields:a,title:n,onEditComponent:r,onDeleteComponent:o,onAddTeamComponent:d,onRemoveTeamComponent:l,onSendMessageComponent:c,defaultValues:u,formSchema:x,isExpandable:h,objectId:p,teamId:m,isAction:g,...f})=>{const[j,y]=i.useState([]),[N,b]=i.useState(!1),[v,R]=i.useState(),[I,w]=i.useState(!1),[A,U]=i.useState(!1),{toast:re}=Y(),{emit:B}=Te(),z=ie({resolver:oe(x(!1)),defaultValues:{...u},mode:"onChange"}),je=async()=>{try{const W=p?`${s}/${p}`:s,G=await(await fetch(`/api/admin/${W}`)).json();y(G)}catch(W){console.log(W)}};i.useEffect(()=>{je(),b(!1)},[N,p]);const K=async W=>{U(!0);const ue=new FormData;for(const G in W)G==="logo"?ue.append(G,v||W.logo):ue.append(G,W[G]);s==="training"&&B("initializeTeamTrainingNotifications",{teamId:m});try{if(["team","league","country","season","position","stadium"].includes(s)){let Z=`/api/${s}/check-${s}-name?name=${W.name}`;if(s==="league"&&(Z+=`&season=${W.season}`),(await(await fetch(Z)).json()).exists){z.setError("name",{type:"manual",message:`${n} name already exists`}),re({title:"Error!",description:`${n} name already exists`,variant:"destructive"}),b(!1),U(!1);return}}const G=p?`${s}/${p}`:s,O=await fetch(`/api/admin/${G}/add`,{method:"POST",body:ue});O.ok?(re({title:"Success!",description:`${n} added successfully`}),b(!0),z.reset(),w(!1)):(console.log(O.status,O.statusText),re({title:"Error!",description:`Failed to add ${n}`,variant:"destructive"}))}catch(G){console.log(G)}finally{U(!1)}},le=()=>{je()};return e.jsxs(e.Fragment,{children:[a&&e.jsx(Ft,{label:"Add",onSubmit:K,title:`Add ${n}`,form:z,fields:a,isLoading:A,setFile:R,isOpen:I,onClose:()=>w(!1),onOpen:()=>w(!0)}),e.jsx(rt,{columns:[...t,g&&{name:"Actions",cell:W=>{var G;const ue=(G=W==null?void 0:W.teams)==null?void 0:G.map(O=>O==null?void 0:O._id);return e.jsxs("div",{className:"flex items-center space-x-4",children:[r&&e.jsx(r,{row:W,onEntityUpdated:le,apiEndpoint:s,title:n,formSchema:x,fields:a,defaultValues:u}),d&&e.jsx(d,{row:W,onEntityUpdated:le}),l&&e.jsx(l,{row:W,teams:ue,onEntityUpdated:le}),c&&e.jsx(c,{row:W,onEntityUpdated:le}),o&&e.jsx(o,{row:W,onEntityDelete:le,apiEndpoint:s,title:n})]})},grow:l||c?.5:0}],data:j,pagination:!0,pending:!0,isExpandable:h,...f})]})},Et=(s,t)=>{i.useEffect(()=>{s&&t()},[s])},ce=({row:s,onEntityDelete:t,apiEndpoint:a,title:n})=>{const[r,o]=i.useState(!1),[d,l]=i.useState(!1),{toast:c}=Y(),{emit:u}=Te();Et(r,()=>{t(),o(!1)});const x=async()=>{l(!0);try{(await fetch(`/api/admin/${a==null?void 0:a.split("/")[0]}/delete/${s._id}`,{method:"DELETE"})).ok?(c({title:"Success!",description:`${s==null?void 0:s.name} deleted successfully`}),a==="training"&&u("removeTeamTraining",{teamId:s.teamId})):(c({title:"Error!",description:`Failed to delete ${s==null?void 0:s.name}`,variant:"destructive"}),l(!1)),o(!0)}catch(h){console.log(h)}finally{l(!1)}};return e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(st,{description:`Are you sure you want to delete this ${n}?`,handleClick:x,isDeleting:d})})},X=({title:s,description:t,className:a="",sideText:n,isBack:r=!0})=>e.jsxs($.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:`space-y-6 ${a}`,children:[r&&e.jsx($.div,{whileHover:{x:-5},whileTap:{scale:.95},className:"flex items-center space-x-2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(fe,{})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs($.div,{className:"space-y-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e.jsx("h1",{className:"text-heading4-medium font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:s}),t&&e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:t})]}),n&&e.jsx($.div,{className:"flex items-center space-x-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:n})]}),e.jsx($.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.5,delay:.6},style:{transformOrigin:"left"},children:e.jsx(Q,{className:"bg-gradient-to-r from-foreground/20 via-foreground/40 to-foreground/20"})})]}),vs=s=>ee({name:P().min(1,{message:"Name must be at least 4 characters."}).max(30,{message:"Name must not be longer than 30 characters."}),surname:P().min(1,{message:"Surname must be at least 4 characters."}).max(30,{message:"Surname must not be longer than 30 characters."}),birthDate:he.date().refine(t=>{const a=new Date(t),n=new Date;return a.getTime()<=n.getTime()},{message:"Birth date must be in the past or today"}),nationality:P().min(1,{message:"Nationality is required"}),city:P().min(1,{message:"City is required"}),photo:s?Le().nullable():js(File,{message:"Photo is required"}),bio:P().min(1,{message:"Bio is required"})}),_l=()=>ee({role:P().min(1,{message:"Role is required"})}),Ml=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Username",cell:s=>s.username,sortable:!0},{name:"Email",selector:s=>s.email,sortable:!0},{name:"Role",cell:s=>s.role,grow:.5},{name:"Created At",selector:s=>{const t=new Date(s.createdAt);return e.jsx("div",{className:"",children:t.toLocaleDateString()})},grow:.5}],Ll=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Users",description:"Manage users"}),e.jsx(ne,{apiPath:"user",columns:Ml,title:"User",onDeleteComponent:ce,formSchema:_l,defaultValues:{role:""},isExpandable:!1,isAction:!0})]}),Qe=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/country");if(!n.ok)throw new Error("Failed to fetch countries data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},Ol=s=>{const{currentUser:t}=q(c=>c.user),[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Referee")return;const x=await(await fetch(`/api/referee/get/${t==null?void 0:t._id}`)).json();n(x),o(!1)}catch(u){l(u),o(!1)}finally{o(!1)}})()},[t==null?void 0:t._id,t==null?void 0:t.role,s]),{referee:a,loading:r,error:d}},Bl=({currentUser:s})=>{const t=i.useRef(null),[a,n]=i.useState(),r=Qe(),[o,d]=i.useState(!1),{referee:l,loading:c}=Ol(o),{toast:u}=Y(),x=ie({resolver:oe(vs(!!l)),defaultValues:{name:"",surname:"",nationality:"",city:"",bio:"",birthDate:"",photo:""},mode:"onChange"});i.useEffect(()=>{l&&x.reset({...l})},[l,o]);const h=x.getValues("birthDate"),p=new Date(h),m=r==null?void 0:r.find(f=>f.id.includes(l==null?void 0:l.nationality)),g=async f=>{const j=r.find(N=>N.name.includes(f==null?void 0:f.nationality)),y=new FormData;y.append("photo",a||(l==null?void 0:l.photo)),y.append("name",f.name),y.append("surname",f.surname),y.append("bio",f.bio),y.append("city",f.city),y.append("birthDate",p),y.append("nationality",(j==null?void 0:j.id)||f.nationality),y.append("user",s==null?void 0:s._id);try{(await fetch("/api/referee/add",{method:"POST",body:y})).ok?(u({title:"Success!",description:"Referee profile updated successfully"}),d(!o)):u({title:"Error!",description:"Failed to update referee profile",variant:"destructive"})}catch(N){console.log(N)}};return c?e.jsx(D,{}):e.jsx(E,{className:"px-4 py-8",children:e.jsx(xe,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(g),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"name",label:"Name",type:"text",form:x,name:"name"}),e.jsx(T,{id:"surname",label:"Surname",type:"text",form:x,name:"surname"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"birthDate",label:"Date of Birth",type:"date",form:x,name:"birthDate",isEdit:!0,initialDate:(l==null?void 0:l.birthDate)||new Date,placeholder:"Select date"}),e.jsx(T,{id:"nationality",type:"select",form:x,items:r,label:"Nationality",placeholder:(m==null?void 0:m.name)||"Select nationality",name:"nationality",idFlag:!0})]}),e.jsx(T,{id:"bio",label:"Bio",type:"textarea",form:x,name:"bio"}),e.jsx(T,{id:"city",label:"City",type:"text",form:x,name:"city"}),e.jsx(T,{id:"photo",label:"Photo",type:"file",form:x,name:"photo",fileRef:t,setFile:n,currentUserPhoto:l==null?void 0:l.imageUrl}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500 px-6 py-3 rounded-md text-white font-semibold",children:"Save"})})]})})})},Vl=()=>{const{currentUser:s}=q(t=>t.user);return e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Referee Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fulfill your referee profile"})]}),e.jsx(Q,{}),e.jsx(Bl,{currentUser:s})]})},Zt=()=>{const{currentUser:s}=q(t=>t.user);return s&&(s==null?void 0:s.role)==="Referee"?e.jsx(Me,{}):e.jsx(Ve,{to:"/"})},Ze=s=>{const{currentUser:t}=q(c=>c==null?void 0:c.user),[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Coach")return;const u=await fetch(`/api/coach/get/${t==null?void 0:t._id}`);if(u.ok){const x=await u.json();n(x),o(!1)}else n([])}catch(u){l(u),o(!1)}finally{o(!1)}})()},[t,s]),{coach:a,loading:r,error:d}},zl=({currentUser:s})=>{const t=i.useRef(null),[a,n]=i.useState(),r=Qe(),[o,d]=i.useState(!1),{coach:l,loading:c}=Ze(o),{toast:u}=Y(),x=ie({resolver:oe(vs(!!l)),defaultValues:{name:"",surname:"",nationality:"",city:"",bio:"",birthDate:"",photo:""},mode:"onChange"});i.useEffect(()=>{l&&x.reset({...l})},[l,o]);const h=x.getValues("birthDate"),p=new Date(h),m=r==null?void 0:r.find(f=>f.id.includes(l==null?void 0:l.nationality)),g=async f=>{const j=r==null?void 0:r.find(N=>N.name.includes(f==null?void 0:f.nationality)),y=new FormData;y.append("photo",a||(l==null?void 0:l.photo)),y.append("user",s._id),y.append("name",f.name),y.append("surname",f.surname),y.append("nationality",(j==null?void 0:j.id)||f.nationality),y.append("city",f.city),y.append("bio",f.bio),y.append("birthDate",p);try{(await fetch("/api/coach/create",{method:"POST",body:y})).ok?(u({title:"Success!",description:"Coach profile updated successfully"}),d(!o)):u({title:"Error!",description:"Failed to update coach profile",variant:"destructive"})}catch(N){console.log(N)}};return c?e.jsx(D,{}):e.jsx(E,{className:"px-4 py-8",children:e.jsx(xe,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(g),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"name",label:"Name",type:"text",form:x,name:"name"}),e.jsx(T,{id:"surname",label:"Surname",type:"text",form:x,name:"surname"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"birthDate",label:"Date of Birth",type:"date",form:x,name:"birthDate",isEdit:!0,initialDate:(l==null?void 0:l.birthDate)||new Date,placeholder:"Select date"}),e.jsx(T,{id:"nationality",type:"select",form:x,items:r,label:"Nationality",placeholder:(m==null?void 0:m.name)||"Select nationality",name:"nationality",idFlag:!0})]}),e.jsx(T,{id:"bio",label:"Bio",type:"textarea",form:x,name:"bio"}),e.jsx(T,{id:"city",label:"City",type:"text",form:x,name:"city"}),e.jsx(T,{id:"photo",label:"Photo",type:"file",form:x,name:"photo",fileRef:t,setFile:n,currentUserPhoto:l==null?void 0:l.imageUrl}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500 px-6 py-3 rounded-md text-white font-semibold",children:"Save"})})]})})})},ql=()=>{const{currentUser:s}=q(t=>t.user);return e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Coach Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fulfill your coach profile"})]}),e.jsx(Q,{}),e.jsx(zl,{currentUser:s})]})},Gl=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/coach");if(!n.ok)throw new Error("Failed to fetch coaches data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name+" "+o.surname})))}catch(n){console.log(n)}})()},[]),s},Hl=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/sponsor");if(!n.ok)throw new Error("Failed to fetch sponsors data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},Ul=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/stadium");if(!n.ok)throw new Error("Failed to fetch stadium data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},be=({row:s,onEntityUpdated:t,apiEndpoint:a,formSchema:n,fields:r,title:o,defaultValues:d})=>{const[l,c]=i.useState(!1),[u,x]=i.useState(null),[h,p]=i.useState(!1),{toast:m}=Y(),g=ie({resolver:oe(n(!0)),defaultValues:{...d},mode:"onChange"}),f=async N=>{c(!0);const b=new FormData;for(const v in N)v==="logo"&&!u?b.append(v,u||s.logo):b.append(v,N[v]);try{if(["team","league","country","season","position","stadium"].includes(a)){let R=`/api/${a}/check-${a}-name?name=${N.name}&id=${s._id}`;if(a==="league"&&(R+=`&season=${N.season}`),(await(await fetch(R)).json()).exists){g.setError("name",{type:"manual",message:`${N.name} already exists ${a==="league"?"for this season":""}`}),m({title:"Error!",description:`Name ${N==null?void 0:N.name} already exists ${a==="league"?"for this season":""}`,variant:"destructive"}),c(!1);return}}(await fetch(`/api/admin/${a}/edit/${s._id}`,{method:"POST",body:b})).ok?(m({title:"Success!",description:`${s==null?void 0:s.name} updated successfully`}),t(),p(!1)):m({title:"Error!",description:`Failed to update ${s==null?void 0:s.name}`,variant:"destructive"})}catch(v){console.log(v),m({title:"Error!",description:"An unexpected error occurred",variant:"destructive"})}finally{c(!1)}},y=((N,b)=>N.map(v=>{if(v.type==="select"){const R=v.items.find(I=>I.id===b[v.name])||v.items.find(I=>I.name===b[v.name]);v.defaultValue=R?R.name:`Select ${v.label}`}else v.type==="date"&&(v.initialDate=b[v.name]?new Date(b[v.name]):null);return v}))([...r],s);return e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Ft,{onSubmit:f,label:"Edit",edit:!0,title:`Edit ${o}`,data:s,fields:y,form:g,setFile:x,isOpen:h,onClose:()=>p(!1),onOpen:()=>p(!0),isLoading:l,loadingIcon:e.jsx(Ee,{className:"w-4 h-4 animate-spin"})})})},Jl=s=>ee({name:P().trim().min(4,{message:"Name must be at least 4 characters"}).max(30,{message:"Name must not be longer than 30 characters"}),yearFounded:he.number().gte(0,"Year Founded must be a positive number"),coach:P().nullable(),city:P().trim().min(1,{message:"City is required"}),country:P().min(1,{message:"Country is required"}),sponsor:P().nullable(),logo:s?Le().nullable():js(File,{message:"Logo is required"}),bio:P().trim(),stadium:P().nullable()}),Wl=()=>ee({name:P().trim().min(2,{message:"Name must be at least 2 characters"}).max(30,{message:"Name must not be longer than 30 characters"}),quantity:he.number().gte(0,"Quantity must be a positive number"),condition:P().nullable(),status:P().nullable()}),Yl=()=>{const s=Qe(),t=Gl(),a=Ul(),n=Hl(),r=[{name:"No.",selector:(d,l)=>l+1,grow:0},{name:"Team",selector:d=>d.name,sortable:!0},{name:"Year Founded",selector:d=>d.yearFounded,sortable:!0}],o=[{id:"name",label:"Name",type:"text",name:"name"},{id:"logo",label:"Logo",type:"file",name:"logo"},{id:"bio",label:"Bio",type:"textarea",name:"bio"},{id:"coach",label:"Coach",type:"select",name:"coach",items:t,placeholder:"Select a coach",idFlag:!0},{id:"stadium",label:"Stadium",type:"select",name:"stadium",items:a,placeholder:"Select a Stadium",idFlag:!0},{id:"yearFounded",label:"Founded Year",type:"number",name:"yearFounded"},{id:"country",label:"Country",type:"select",name:"country",items:s,placeholder:"Select a Country",idFlag:!0},{id:"sponsor",label:"Sponsor",type:"select",name:"sponsor",items:n,placeholder:"Select a Sponsor",idFlag:!0},{id:"city",label:"City",type:"text",name:"city"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Teams",description:"Manage teams"}),e.jsx(ne,{apiPath:"team",columns:r,fields:o,title:"Team",onEditComponent:be,onDeleteComponent:ce,formSchema:Jl,defaultValues:{name:"",coach:"",league:"",city:"",country:"",yearFounded:"",sponsor:"",logo:"",stadium:"",bio:""},isExpandable:!1,isAction:!0})]})},ns=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/season");if(!n.ok)throw new Error("Failed to fetch seasons data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},Ql=V.object({names:V.string().min(1,{message:"Please select a team"})}),Zl=({row:s,onEntityUpdated:t})=>{const[a,n]=i.useState([{id:"",name:""}]),[r,o]=i.useState(!1),[d,l]=i.useState(!1),c=ie({resolver:oe(Ql),defaultValues:{names:""},mode:"onChange"});Et(r,()=>{t(),o(!1)});const u=p=>{console.log("teamName: ",p);const m=a.find(g=>g.name.startsWith(p));return m?m.id:""};i.useEffect(()=>{(async()=>{try{const g=await(await fetch("/api/admin/teams/no-league")).json();n(g==null?void 0:g.map(f=>({id:f._id,name:f.name})))}catch(m){return console.log(m),[]}})()},[s]);const x=[{id:"names",label:"Name",type:"select",name:"names",items:a,placeholder:"Select a team",idFlag:"true"}],h=async p=>{console.log("formData: ",p);const m=u(p.names);try{if(!(await fetch(`/api/league/addTeam/${s._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:m})})).ok)throw new Error("Failed to fetch data!");o(!0),l(!1)}catch(g){console.log("Error updating team: ",g)}};return e.jsx("div",{children:e.jsx(Ft,{onSubmit:h,label:"Add",add:!0,title:"Add Team",desc:"Add team to the league",data:s,form:c,fields:x,isOpen:d,onClose:()=>l(!1),onOpen:()=>l(!0)})})},Ss=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:C("w-full caption-bottom text-sm",s),...t})}));Ss.displayName="Table";const Cs=i.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:C("[&_tr]:border-b",s),...t}));Cs.displayName="TableHeader";const Ts=i.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:C("[&_tr:last-child]:border-0",s),...t}));Ts.displayName="TableBody";const Kl=i.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:C("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Kl.displayName="TableFooter";const Ie=i.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:C("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));Ie.displayName="TableRow";const pe=i.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:C("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));pe.displayName="TableHead";const de=i.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:C("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));de.displayName="TableCell";const Xl=i.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:C("mt-4 text-sm text-muted-foreground",s),...t}));Xl.displayName="TableCaption";const ec=({title:s,desc:t,items:a,handleDelete:n})=>e.jsxs(De,{children:[e.jsx(as,{asChild:!0,children:e.jsx(Li,{className:"w-5 h-5 cursor-pointer"})}),e.jsxs(Ae,{className:"sm:max-w-[525px] overflow-y-auto max-h-[400px]",children:[e.jsxs($e,{children:[e.jsx(_e,{children:s}),e.jsx(Oi,{children:t})]}),e.jsxs(Ss,{children:[e.jsx(Cs,{children:e.jsxs(Ie,{className:"justify-between",children:[e.jsx(pe,{children:"Team"}),e.jsx(pe,{children:"Action"})]})}),e.jsx(Ts,{children:Array.isArray(a)&&a.map(r=>e.jsxs(Ie,{children:[e.jsx(de,{children:r.name}),e.jsx(de,{children:e.jsx(Ea,{className:"w-5 h-5 cursor-pointer text-red-600",onClick:()=>n(r._id)})})]},r._id))})]}),e.jsx(Oe,{children:e.jsx(_o,{asChild:!0,children:e.jsx(k,{className:"bg-primary-500 text-white hover:bg-purple-500 hover:text-white",children:"Close"})})})]})]}),sc=({row:s,teams:t,onEntityUpdated:a})=>{const[n,r]=i.useState([]),[o,d]=i.useState(!1),l=t.some(u=>u==="");Et(o,()=>{a(),d(!1)}),i.useEffect(()=>{l||(async()=>{try{const h=await(await fetch("/api/admin/league/teams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teams:t})})).json();r(h)}catch(x){console.log(x)}})()},[t,l]);const c=async u=>{try{const h=await(await fetch(`/api/league/delete/${s._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:u})})).json();if(h.success===!1){console.log(h.message);return}d(!0),r(n.filter(p=>p._id!==u))}catch(x){console.log(x)}};return e.jsx(ec,{title:"Remove Team",desc:"Remove Team From League",row:s,items:n,handleDelete:c})},tc=()=>ee({name:P().min(4,{message:"Name must be at least 4 characters."}).max(30,{message:"Name must not be longer than 30 characters."}).trim(),commissioner:P().min(1,{message:"Commissioner is required"}).trim(),country:P().min(1,{message:"Country is required"}),bio:P().min(1,{message:"Bio is required"}).trim(),season:P().min(1,{message:"Season is required"})}),ac=()=>{const s=Qe(),t=ns(),a=[{name:"No.",selector:(r,o)=>o+1,grow:0},{name:"League",selector:r=>r==null?void 0:r.name,sortable:!0},{name:"Teams",selector:r=>{var o;return(o=r.teams)==null?void 0:o.length},sortable:!0},{name:"Season",selector:r=>r.seasonName,sortable:!0}],n=[{id:"name",label:"Name",type:"text",name:"name"},{id:"country",label:"Country",type:"select",name:"country",items:s,placeholder:"Select a Country",idFlag:!0},{id:"commissioner",label:"Commissioner",type:"text",name:"commissioner"},{id:"bio",label:"Bio",type:"textarea",name:"bio"},{id:"season",label:"Season",type:"select",name:"season",items:t,placeholder:"Select a Season",idFlag:!0}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Leagues",description:"Manage leagues"}),e.jsx(ne,{apiPath:"league",columns:a,fields:n,title:"League",onEditComponent:be,onDeleteComponent:ce,onAddTeamComponent:Zl,onRemoveTeamComponent:sc,formSchema:tc,defaultValues:{name:"",bio:"",commissioner:"",country:"",season:""},isExpandable:!1,isAction:!0})]})},nc=({visibleLinks:s,renderLinks:t})=>{const a=i.useMemo(()=>{switch(s.length){case 1:return"grid-cols-1";case 2:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4";case 5:return"grid-cols-5";case 6:return"grid-cols-6";case 7:return"grid-cols-7";case 8:return"grid-cols-8";default:return"grid-cols-4"}},[s.length]);return e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 z-50 w-full bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg",children:e.jsx("div",{className:`p-2 grid ${a} gap-1`,children:t()})})},rc=[{icon:e.jsx(ua,{className:"w-6 h-6"}),route:"/",label:"Home"},{icon:e.jsx(bt,{className:"w-6 h-6"}),route:"/search",label:"Search"},{icon:e.jsx(vr,{className:"w-6 h-6"}),route:"/post/create",label:"Create Post"},{icon:e.jsx(ms,{className:"w-6 h-6"}),route:"/leagues",label:"Leagues"},{icon:e.jsx(Vs,{className:"w-6 h-6"}),route:"/forum",label:"Team Forum"},{icon:e.jsx(Sr,{className:"w-6 h-6"}),route:"/training",label:"Training"},{icon:e.jsx(Es,{className:"w-6 h-6"}),route:"/dashboard/referee",label:"Dashboard"},{icon:e.jsx(Es,{className:"w-6 h-6"}),route:"/dashboard/admin",label:"Dashboard"},{icon:e.jsx(Es,{className:"w-6 h-6"}),route:"/dashboard/coach",label:"Dashboard"},{icon:e.jsx(Es,{className:"w-6 h-6"}),route:"/dashboard/player",label:"Dashboard"}],ic=i.memo(({link:s,isActive:t,isTrainingNotif:a,isForumNotif:n,isAdminNotif:r})=>e.jsxs(F,{to:s.route,className:`group relative flex items-center
      px-4 py-3 rounded-lg
      transition-all duration-200 ease-in-out
      hover:scale-105
      ${t?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("div",{className:`
        mr-3 transition-transform group-hover:scale-110
        ${t?"text-white":"text-gray-400 group-hover:text-primary-500"}
      `,children:s.icon}),e.jsx("span",{className:`
        text-sm font-medium
        hidden md:block
        transition-colors duration-200
        ${t?"text-white":"text-gray-700 group-hover:text-gray-900"}
      `,children:s.label}),(a||n||r)&&e.jsx($.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},className:`
          absolute top-4 right-4
          w-5 h-5
          ${t?"bg-white":"bg-blue-600"}
          rounded-full
          flex items-center justify-center
          animate-pulse
        `,children:e.jsx("span",{className:`text-[10px] ${t?"text-black":"text-white"} font-bold`,children:""})})]})),oc=()=>{const{pathname:s}=Us(),{currentUser:t}=q(w=>w.user),[a,n]=i.useState({}),r=new Date().getFullYear(),[o,d]=i.useState(0),[l,c]=i.useState(0),[u,x]=i.useState(0),[h,p]=i.useState(!1),{subscribe:m,isConnected:g,unsubscribe:f}=Te();i.useEffect(()=>{if(!(!(t!=null&&t._id)||!g||(t==null?void 0:t.role)!=="Player"))return m("teamTrainingNotificationStatus",w=>{d(w.unreadCount)}),m("unreadTeamTrainingNotification",w=>{d(w.unreadCount)}),m("teamTrainingNotificationStatusAfterDeletion",w=>{d(w.unreadCount)}),()=>{f("teamTrainingNotificationStatus"),f("unreadTeamTrainingNotification"),f("teamTrainingNotificationStatusAfterDeletion")}},[m,t,g,f]),i.useEffect(()=>{if(!(!(t!=null&&t._id)||!g))return m("teamForumNotificationsStatus",w=>{c(w.unreadCount)}),m("teamForumNotificationStatusAfterUpdate",w=>{console.log(w,"data"),c(w.unreadCount)}),m("teamForumNotificationStatusAfterDeletion",w=>{c(w.unreadCount)}),()=>{f("teamForumNotificationsStatus"),f("teamForumNotificationStatusAfterUpdate"),f("teamForumNotificationStatusAfterDeletion")}},[m,t,g,f]),i.useEffect(()=>{(async()=>{if(!(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Player"))try{const A=await fetch(`/api/player/get/${t._id}`);if(!A.ok)throw new Error("Failed to fetch data!");const U=await A.json();n(U)}catch(A){console.error("Error fetching player data:",A)}})()},[t==null?void 0:t._id,t==null?void 0:t.role]),i.useEffect(()=>{(async()=>{var A,U;if(!(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Player"||!((A=a==null?void 0:a.currentTeam)!=null&&A._id)))try{const re=await fetch(`/api/player/trainingNotifications/${(U=a==null?void 0:a.currentTeam)==null?void 0:U._id}/${a==null?void 0:a._id}`);if(!re.ok)throw new Error("Failed to fetch data!");const B=await re.json();d(B.unreadCount)}catch(re){console.error("Error fetching training notifications:",re)}})()},[a,t]),i.useEffect(()=>{(async()=>{try{const U=await(await fetch(`/api/forum/notifications/${t==null?void 0:t._id}/${t==null?void 0:t.role}`)).json();c(U.unreadCount)}catch(A){console.log(A)}})()},[t==null?void 0:t._id,t==null?void 0:t.role]),i.useEffect(()=>{if(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Admin")return;(async()=>{try{const U=await(await fetch("/api/admin/notifications-count")).json();x(U.notificationsCount+U.reportsCount)}catch(A){console.log(A)}})()},[t==null?void 0:t._id,t==null?void 0:t.role]);const j=["Admin","Coach","Referee"].includes(t==null?void 0:t.role),y=(t==null?void 0:t.role)==="Coach"||(a==null?void 0:a.currentTeam)!==void 0,N=["Player","Coach"].includes(t==null?void 0:t.role),b=j||(t==null?void 0:t.role)==="Coach"&&y,v=(t==null?void 0:t.role)==="Coach"||y,R=i.useMemo(()=>rc.filter(w=>{var A,U;return w.route==="/search"?!0:w.route==="/post/create"?b:w.route==="/training"?v:w.route==="/leagues"?!0:w.route==="/forum"?N:w.route.startsWith("/dashboard/")?w.route===`/dashboard/${((A=t==null?void 0:t.role)==null?void 0:A.charAt(0).toLowerCase())+((U=t==null?void 0:t.role)==null?void 0:U.slice(1))}`:["/"].includes(w.route)}),[t==null?void 0:t.role,b,v,N]);i.useEffect(()=>{const w=()=>{p(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const I=()=>R.map(w=>e.jsx(ic,{link:w,isActive:s===w.route,isTrainingNotif:w.route==="/training"&&o>0,isForumNotif:w.route==="/forum"&&l>0,isAdminNotif:w.route==="/dashboard/admin"&&u>0},w.label));return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:`hidden lg:flex lg:flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 w-72 h-[calc(102vh-5rem)] fixed left-0 ${h?"top-[30px] h-[calc(103vh-3rem)]":"top-[64px]"} transition-all duration-0 shadow-lg`,children:[e.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:e.jsx("nav",{className:"space-y-3",children:I()})}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 py-4",children:e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"flex gap-8 p-4",children:[e.jsx(F,{to:"/terms",className:"text-sm text-gray-600 hover:text-primary-500 transition-colors duration-200",children:"Terms"}),e.jsx(F,{to:"/privacy",className:"text-sm text-gray-600 hover:text-primary-500 transition-colors duration-200",children:"Privacy"}),e.jsx(F,{to:"/contact",className:"text-sm text-gray-600 hover:text-primary-500 transition-colors duration-200",children:"Contact"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[" ",r," KickZone"]})]})})]}),e.jsx(nc,{visibleLinks:R,renderLinks:I}),e.jsx("div",{className:"hidden lg:block w-72"})]})},lc=()=>e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(at,{}),e.jsxs("div",{className:"flex flex-1 pb-8",children:[e.jsx(oc,{}),e.jsx("main",{className:"flex-1 p-4",children:e.jsx(Me,{})})]})]}),zn=s=>ee({title:P().min(3,"Title must be at least 3 characters long").max(50,"Title must be less than 50 characters long"),postContent:P().min(3,"Content must be at least 3 characters long"),postPhoto:s?Le().nullable():js(File,{message:"Photo is required"})}),qn=ee({post:P().min(3,{message:"Minimum 3 characters"})}),cc=({postId:s,currentUserImg:t,currentUserId:a,currentUsername:n,isLogged:r,authorId:o,setUpdateSuccess:d})=>{const{register:l,handleSubmit:c,formState:{errors:u,isValid:x},reset:h}=ie({resolver:oe(qn),defaultValues:{post:""}}),{toast:p}=Y(),{emit:m}=Te(),g=async f=>{const j={author:a,commentContent:f.post};try{const y=await fetch(`/api/post/comment/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(y.ok){const N=await y.json();p({title:"Success!",description:"Comment posted successfully"}),d(!0),a!==o&&m("newUnreadNotification",{userId:a,authorId:o,postId:N._id,userImg:t,username:n,type:"comment",action:"create"})}else p({title:"Error!",description:"Failed to post comment",variant:"destructive"});h()}catch(y){console.error("Error submitting comment:",y)}};return e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg p-4 mb-6",children:r?e.jsxs("form",{onSubmit:c(g),className:"flex items-start space-x-4",children:[e.jsx("img",{src:t||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("textarea",{...l("post"),placeholder:"Write a comment...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white",rows:"2"}),u.post&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.post.message})]}),e.jsxs($.button,{whileTap:{scale:.95},type:"submit",disabled:!x,className:`flex items-center justify-center px-4 py-2 rounded-lg text-white ${x?"bg-primary-500 hover:bg-purple-500":"bg-gray-400 cursor-not-allowed"} transition-colors duration-200`,onClick:()=>x&&d(!1),children:[e.jsx(ha,{className:"mr-2"}),"Reply"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:"You must be logged in to comment."}),e.jsx(F,{to:"/sign-in",className:"text-primary-500 hover:text-primary-600 font-medium",children:"Log in to comment"})]})})},Rt=(s,t,a)=>{const[n,r]=i.useState({}),[o,d]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const c=await fetch(`/api/post/get/${s}`);if(!c.ok)throw new Error("Failed to fetch post data!");const u=await c.json();r(u),d(!1)}catch(c){console.log(c),d(!1)}finally{d(!1)}})()},[s,t,a]),{post:n,loading:o}},dc=()=>{var u,x;const{id:s}=te(),{user:t,currentUser:a}=ze(),[n,r]=i.useState(!1),[o,d]=i.useState(!1),{post:l,loading:c}=Rt(s,n,o);return c?e.jsx(D,{}):e.jsxs("section",{className:"relative",children:[e.jsx("div",{children:e.jsx(pt,{id:l._id,currentUserId:(a==null?void 0:a._id)||"",currentUserImg:t==null?void 0:t.imageUrl,currentUsername:a==null?void 0:a.username,parentId:l.parentId,content:l.postContent,author:l.author,title:l.title,initialLikes:l.likes,postPhoto:l.imageUrl,createdAt:l.createdAt,setDeleteSuccess:d,comments:l.children},l._id)}),e.jsx("div",{className:"mt-7",children:e.jsx(cc,{postId:s,currentUserId:a==null?void 0:a._id,currentUsername:a==null?void 0:a.username,currentUserImg:t==null?void 0:t.imageUrl,isLogged:a!==null,authorId:(u=l.author)==null?void 0:u._id,setUpdateSuccess:r})}),e.jsx("div",{className:"mt-10",children:(x=l.children)==null?void 0:x.map(h=>e.jsx(pt,{id:h._id,currentUserId:(a==null?void 0:a._id)||"",currentUserImg:t==null?void 0:t.imageUrl,currentUsername:a==null?void 0:a.username,parentId:h.parentId,content:h.postContent,author:h.author,initialLikes:h.likes,createdAt:h.createdAt,comments:h.children,setDeleteSuccess:d,mainPostAuthorId:l.author._id,isComment:!0},h._id))})]})},rs=Bi,Ke=i.forwardRef(({className:s,...t},a)=>e.jsx(on,{ref:a,className:C("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));Ke.displayName=on.displayName;const ye=i.forwardRef(({className:s,...t},a)=>e.jsx(ln,{ref:a,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));ye.displayName=ln.displayName;const me=i.forwardRef(({className:s,...t},a)=>e.jsx(cn,{ref:a,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));me.displayName=cn.displayName;const mc=fs("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function we({className:s,variant:t,...a}){return e.jsx("div",{className:C(mc({variant:t}),s),...a})}const xc=[{value:"posts",label:"Posts",icon:pa},{value:"replies",label:"Replies",icon:fa}],uc=()=>{var u,x,h;const{id:s}=te(),{user:t,currentUser:a,loading:n}=ze(null,s),[r,o]=i.useState([]),[d,l]=i.useState("posts");if(i.useEffect(()=>{(async()=>{try{const m=await fetch(`/api/user/get-comments/${s}`),g=await m.json();if(!m.ok)throw new Error(g.message);o(g)}catch(m){console.error("Error fetching comments:",m)}})()},[s]),n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(D,{})});const c=p=>new Date(p).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"});return e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-8xl",children:[e.jsx(fe,{}),e.jsxs(E,{className:"bg-white  shadow-xl rounded-lg overflow-hidden",children:[e.jsxs(H,{className:"relative p-0",children:[e.jsx("div",{className:"h-16 bg-gradient-to-r from-purple-300 to-white"}),e.jsx("div",{className:"px-6 pb-6 -mt-24",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-6",children:[e.jsx("img",{src:t.imageUrl||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:t.username,className:"w-36 h-36 rounded-full border-4 border-white dark:border-gray-800 shadow-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.username}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:t.bio||"No bio available"}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(Cr,{className:"w-4 h-4 mr-2"}),t.email]}),e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),e.jsx(we,{variant:"secondary",children:((u=t==null?void 0:t.role)==null?void 0:u.charAt(0).toUpperCase())+((x=t==null?void 0:t.role)==null?void 0:x.slice(1))||"User"})]}),t&&(a==null?void 0:a._id)!==s&&e.jsx(wn,{currentUserId:a==null?void 0:a._id,reportedUserId:s,contentType:"Profile",contentId:s})]})]})]})})]}),e.jsx(L,{className:"p-6",children:e.jsxs(rs,{value:d,onValueChange:l,className:"w-full",children:[e.jsx(Ke,{className:"flex justify-center mb-6  p-1 rounded-lg",children:xc.map(p=>{var m;return e.jsxs(ye,{value:p.value,className:"flex items-center px-4 py-2 space-x-2",children:[e.jsx(p.icon,{className:"w-4 h-4"}),e.jsx("span",{children:p.label}),e.jsx(we,{variant:"secondary",className:"ml-2",children:p.value==="posts"?((m=t==null?void 0:t.posts)==null?void 0:m.length)??0:(r==null?void 0:r.length)??0})]},p.value)})}),e.jsx(me,{value:"posts",children:((h=t==null?void 0:t.posts)==null?void 0:h.length)>0?e.jsx("div",{className:"grid gap-4",children:t.posts.map(p=>e.jsx(F,{to:`/post/${p._id}`,children:e.jsx(E,{className:"hover:shadow-lg transition-all duration-200 hover:scale-[1.01]",children:e.jsxs(L,{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:p.title}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),c(p.createdAt)]})]})})},p._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pa,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"No posts available yet."})]})}),e.jsx(me,{value:"replies",children:(r==null?void 0:r.length)>0?e.jsx("div",{className:"grid gap-4",children:r.map(p=>e.jsx(F,{to:`/post/${p.parentId}`,children:e.jsx(E,{className:"hover:shadow-lg transition-all duration-200 hover:scale-[1.01]",children:e.jsxs(L,{className:"p-4",children:[e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:p.postContent}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),c(p.createdAt)]})]})})},p._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fa,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"No replies available yet."})]})})]})})]})]})})},hc=({data:s})=>e.jsx("article",{className:"flex flex-wrap gap-7",children:s.map(t=>e.jsx(E,{className:"w-[250px] h-[100px] max-sm:w-full hover:bg-purple-200 transition duration-300 ease-in-out",children:e.jsx(F,{to:`/league/${t._id}`,children:e.jsx(H,{className:"items-center pt-10",children:e.jsx(J,{children:t.name})})})},t._id))}),pc=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(!0),r=ns(),[o,d]=i.useState("");return i.useEffect(()=>{if(r.length>0){const l=r[r.length-1].id;d(l)}},[r]),i.useEffect(()=>{o&&(async()=>{try{const u=await(await fetch(`/api/admin/league?season=${o}`)).json();t(u),n(!1)}catch(c){console.log(c),n(!1)}finally{n(!1)}})()},[o]),a?e.jsx(D,{}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-4 md:mb-0 flex items-center",children:[e.jsx(ms,{className:"mr-3 text-yellow-500"}),"Leagues"]}),e.jsx("div",{className:"w-full md:w-auto",children:e.jsxs(Pe,{value:o,onValueChange:l=>d(l),children:[e.jsxs(Se,{className:"w-full md:w-full inline-flex items-center justify-between px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(Fe,{placeholder:"Select Season"}),e.jsx(xs,{className:"ml-2 text-gray-400"})]}),e.jsx(Ce,{children:r==null?void 0:r.map((l,c)=>e.jsx(se,{value:l==null?void 0:l.id,children:l==null?void 0:l.name},c))})]})})]}),e.jsx(Q,{className:"my-6"}),a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(D,{})}):e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 gap-6",children:s.length>0?e.jsx(hc,{data:s}):e.jsx("p",{className:"text-gray-500 text-center col-span-full",children:"No leagues found for the selected season."})})]})})},fc=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!0),[o,d]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const u=await(await fetch(`/api/league/teams-stats/${s}`)).json();a(u),r(!1)}catch(c){d(c),r(!1)}})()},[s]),{teamStats:t,loading:n,error:o}},gc=({leagueId:s})=>{const{teamStats:t}=fc(s),a=async()=>{const o=await(await fetch(`/api/team/download-xlsx/${s}`)).blob(),d=window.URL.createObjectURL(new Blob([o])),l=document.createElement("a");l.href=d,l.setAttribute("download","LeagueStandings.xlsx"),document.body.appendChild(l),l.click(),l.parentNode.removeChild(l)},n=[{name:"#",selector:(r,o)=>o+1,grow:.5,className:"text-sm font-semibold"},{name:"Team",selector:r=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:r.logoUrl||"https://d3awt09vrts30h.cloudfront.net/team_img_default.png",alt:r.name,className:"h-8 w-8 rounded-full object-contain mr-2"}),e.jsx(F,{to:`/league/team/${r.team}`,className:" hover:text-purple-500",children:r.name})]}),grow:2,className:"text-sm"},{name:"Played",selector:r=>r.gamesPlayed,sortable:!0,hide:"sm",className:"text-sm"},{name:"Won",selector:r=>r.wins,sortable:!0,hide:"md",className:"text-sm"},{name:"Drawn",selector:r=>r.draws,sortable:!0,hide:"md",className:"text-sm"},{name:"Lost",selector:r=>r.losses,sortable:!0,hide:"md",className:"text-sm"},{name:"GF",selector:r=>r.goalsFor,sortable:!0,hide:"md",className:"text-sm"},{name:"GA",selector:r=>r.goalsAgainst,sortable:!0,hide:"md",className:"text-sm"},{name:"GD",selector:r=>r.goalDifference,sortable:!0,hide:"lg",className:"text-sm"},{name:"Points",selector:r=>r.points,sortable:!0,className:"text-sm font-semibold"}];return e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx("div",{className:"flex max-sm:my-10 justify-end mb-4",children:e.jsx(k,{className:"bg-primary-500 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded transition-colors duration-300",onClick:a,children:"Download Standings.xlsx"})}),e.jsx(E,{className:"rounded-lg shadow-md grid overflow-hidden",children:e.jsx(rt,{columns:n,data:t,pending:!0})})]})},jc=({data:s})=>{const t="https://futbolistpro-bucket.s3.eu-north-1.amazonaws.com/team_img_default.png";return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-8",children:s.map(a=>e.jsx(F,{to:`/league/team/${a._id}`,className:"transition-transform hover:scale-105",children:e.jsxs(E,{className:"h-full shadow-lg hover:shadow-xl transition-shadow duration-300",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9",children:e.jsx(po.LazyLoadImage,{src:a.logo?a.logoUrl:t,alt:`Logo of ${a.name}`,effect:"blur",className:"object-contain w-full h-36",wrapperClassName:"w-full h-full"})}),e.jsx(L,{className:"p-4",children:e.jsx("h3",{className:"text-xl font-semibold text-center truncate",children:a.name})})]})},a._id))})},is=({leagueId:s,type:t})=>{const[a,n]=i.useState([]),[r,o]=i.useState(!0);i.useEffect(()=>{(async()=>{try{o(!0);const c=await fetch(`/api/player/top-stats/${s}`);if(c.ok){let u=await c.json();u=u.filter(x=>{switch(t){case"goals":return x.goals>0;case"assists":return x.assists>0;case"yellowCards":return x.yellowCards>0;case"redCards":return x.redCards>0;case"cleanSheets":return x.cleanSheets>0;default:return!1}}),n(u)}}catch(c){console.log(c)}finally{o(!1)}})()},[s,t]);const d=[{name:"#",selector:(l,c)=>c+1,grow:.5},{name:"Player",selector:l=>e.jsx("div",{className:"flex items-center",children:e.jsx(F,{to:`/player/${l.playerId}`,className:" hover:text-purple-500",children:l.name})})},{name:"Team",selector:l=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:l.logoUrl,alt:l.name,className:"w-8 h-8 object-contain rounded-full mr-2"}),e.jsx(F,{to:`/league/team/${l.teamId}`,className:" hover:text-purple-500",children:l.team})]}),grow:1,hide:"sm"},{name:t.charAt(0).toUpperCase()+t.slice(1),selector:l=>{switch(t){case"goals":return l.goals;case"assists":return l.assists;case"yellowCards":return l.yellowCards;case"redCards":return l.redCards;case"cleanSheets":return l.cleanSheets;default:return l.goals}},grow:.5}];return r?e.jsx(D,{}):e.jsx(E,{className:"grid mt-5 w-full rounded-none shadow-md",children:e.jsx(rt,{columns:d,data:a,defaultSortFieldId:4,pending:!0})})},Gn=s=>{const[t,a]=i.useState([]),[n,r]=i.useState([{id:"",name:""}]),[o,d]=i.useState(""),[l,c]=i.useState(!0);return i.useEffect(()=>{(async()=>{var x,h;try{if(!s)return;const p=await fetch(`/api/league/teams/${s}`);if(!p.ok)throw new Error("Failed to fetch team data!");const m=await p.json();d((h=(x=m[0])==null?void 0:x.league)==null?void 0:h.name),Array.isArray(m)?(r(m==null?void 0:m.map(g=>({id:g._id,name:g.name}))),a(m)):console.error("Error: data is not an array"),c(!1)}catch(p){console.log(p),c(!1)}finally{c(!1)}})()},[s]),{teams:t,selectTeams:n,loading:l,leagueName:o}},yc=()=>{const s=te().id,{teams:t,loading:a,leagueName:n}=Gn(s);return a?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsx("div",{className:"flex items-center justify-center text-2xl font-bold text-center",children:e.jsx("p",{className:"text-heading1-bold",children:n})}),e.jsx(Q,{}),e.jsxs(rs,{defaultValue:"teams",className:"w-full pt-5",children:[e.jsxs(Ke,{className:"flex flex-wrap text-body-medium gap-3 max-sm:pb-28 max-md:pb-20 max-lg:pb-20 max-xl:pb-20",children:[e.jsx(ye,{value:"teams",children:"Teams"}),e.jsx(ye,{value:"standings",children:"Standings"}),e.jsx(ye,{value:"top_scorers",children:"Top Scorers"}),e.jsx(ye,{value:"top_assistents",children:"Top Assistents"}),e.jsx(ye,{value:"y_cards",children:"Yellow Cards"}),e.jsx(ye,{value:"r_cards",children:"Red Cards"}),e.jsx(ye,{value:"clean_sheets",children:"Clean Sheets"})]}),e.jsx(me,{value:"teams",children:e.jsx(jc,{data:t})}),e.jsx(me,{value:"standings",children:e.jsx(gc,{leagueId:s})}),e.jsx(me,{value:"top_scorers",children:e.jsx(is,{leagueId:s,type:"goals"})}),e.jsx(me,{value:"top_assistents",children:e.jsx(is,{leagueId:s,type:"assists"})}),e.jsx(me,{value:"y_cards",children:e.jsx(is,{leagueId:s,type:"yellowCards"})}),e.jsx(me,{value:"r_cards",children:e.jsx(is,{leagueId:s,type:"redCards"})}),e.jsx(me,{value:"clean_sheets",children:e.jsx(is,{leagueId:s,type:"cleanSheets"})})]})]})},Hn=s=>ee({name:P().min(1,{message:"Name is required"}),surname:P().min(1,{message:"Surname is required"}),nationality:P().min(1,{message:"Nationality is required"}),height:he.number().gte(130,"Height must be greater than 130"),weight:Le().refine(t=>{const a=typeof t=="string"?parseInt(t,10):t;return!isNaN(a)&&a>0},{message:"Weight must be a positive integer"}),position:P().min(1,{message:"Position is required"}),number:Le().refine(t=>{const a=typeof t=="string"?parseInt(t,10):t;return!isNaN(a)&&a>0},{message:"Number must be a positive integer"}),footed:P().min(1,{message:"Footed is required"}),wantedTeam:P().optional(),age:Le().refine(t=>{const a=typeof t=="string"?parseInt(t,10):t;return!isNaN(a)&&a>0},{message:"Age must be a positive integer"}),photo:s?Le().nullable():js(File,{message:"Photo is required"}),bio:P().min(1,{message:"Bio is required"})}),bc=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Surname",selector:s=>s.surname,sortable:!0},{name:"Nationality",selector:s=>s.nationality,sortable:!0},{name:"Position",selector:s=>s.position,sortable:!0},{name:"Team",selector:s=>s.currentTeam,sortable:!0}],Nc=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Players",description:"Manage players"}),e.jsx(ne,{apiPath:"player",columns:bc,title:"Player",onDeleteComponent:ce,formSchema:Hn,isExpandable:!1,isAction:!0})]}),ks=s=>{const{currentUser:t}=q(c=>c.user),[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Player")return;const x=await(await fetch(`/api/player/get/${t==null?void 0:t._id}`)).json();n(x),o(!1)}catch(u){l(u),o(!1)}finally{o(!1)}})()},[t==null?void 0:t._id,t==null?void 0:t.role,s]),{player:a,loading:r,error:d,currentUser:t}},wc=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/position");if(!n.ok)throw new Error("Failed to fetch positions data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},vc=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/team");if(!n.ok)throw new Error("Failed to fetch team data!");const r=await n.json();t(r==null?void 0:r.map(o=>({id:o._id,name:o.name})))}catch(n){console.log(n)}})()},[]),s},Sc=()=>{var N;const s=i.useRef(null),[t,a]=i.useState(),[n,r]=i.useState(!1),o=wc(),d=Qe(),l=vc(),{player:c,loading:u,currentUser:x}=ks(n),h=Ue(),{toast:p}=Y(),m=ie({resolver:oe(Hn(!!c)),defaultValues:{name:"",surname:"",nationality:"",wantedTeam:"",height:"",weight:"",position:"",number:"",footed:"",photo:"",age:"",bio:""},mode:"onChange"}),g=o==null?void 0:o.find(b=>b.id.includes(c==null?void 0:c.position)),f=d==null?void 0:d.find(b=>b.id.includes(c==null?void 0:c.nationality)),j=l==null?void 0:l.find(b=>b.id.includes(c==null?void 0:c.wantedTeam));i.useEffect(()=>{c&&m.reset({...c})},[c,n]);const y=async b=>{const v=d.find(A=>A.id.includes(b==null?void 0:b.nationality)),R=o.find(A=>A.id.includes(b==null?void 0:b.position)),I=l.find(A=>A.id.includes(b==null?void 0:b.wantedTeam)),w=new FormData;w.append("photo",t||(c==null?void 0:c.photo)),w.append("name",b.name),w.append("surname",b.surname),w.append("bio",b.bio),w.append("height",b.height),w.append("weight",b.weight),w.append("age",b.age),w.append("number",b.number),w.append("footed",b.footed),w.append("nationality",(v==null?void 0:v.id)||b.nationality),w.append("position",(R==null?void 0:R.id)||b.position),w.append("wantedTeam",(I==null?void 0:I.id)||b.wantedTeam),w.append("user",x==null?void 0:x._id);try{(await fetch("/api/player/add",{method:"POST",body:w})).ok?(h(Ko(!0)),p({title:"Success!",description:"Referee profile updated successfully"}),r(!n)):p({title:"Error!",description:"Failed to update referee profile",variant:"destructive"})}catch(A){console.log(A)}};return u?e.jsx(D,{}):e.jsx(E,{className:"px-4 py-8",children:e.jsx(xe,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(y),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(T,{id:"name",label:"Name",type:"text",form:m,name:"name",className:"col-span-1"}),e.jsx(T,{id:"surname",label:"Surname",type:"text",form:m,name:"surname",className:"col-span-1"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(T,{id:"photo",label:"Photo",type:"file",form:m,name:"photo",fileRef:s,setFile:a,currentUserPhoto:(c==null?void 0:c.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp"})}),e.jsx("div",{className:"mt-6",children:e.jsx(T,{id:"bio",label:"Bio",type:"textarea",form:m,name:"bio",className:"h-32"})}),e.jsx("div",{className:"mt-6",children:c!=null&&c.currentTeam?e.jsxs("div",{className:"relative",children:[e.jsx(T,{id:"currentTeam",label:"Current Team",name:"currentTeam",type:"select",form:m,isDisabled:!0,placeholder:((N=c==null?void 0:c.currentTeam)==null?void 0:N.name)||"No team",className:"bg-gray-100 cursor-not-allowed"}),e.jsx("div",{className:"absolute top-0 right-0 flex items-center justify-center w-6 h-6 bg-gray-200 rounded-full cursor-pointer group",children:e.jsxs(ft,{children:[e.jsx(gt,{children:e.jsx(Bs,{className:"text-gray-500"})}),e.jsx(qs,{children:"To change your current team, please contact your coach to remove you from it."})]})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(T,{id:"wantedTeam",type:"select",form:m,items:l,label:"Team where you play/you want to play",placeholder:(j==null?void 0:j.name)||"Select Team",name:"wantedTeam",className:"w-full",idFlag:!0}),e.jsx("div",{className:"absolute top-0 right-0 flex items-center justify-center w-6 h-6 bg-gray-200 rounded-full cursor-pointer group",children:e.jsxs(ft,{children:[e.jsx(gt,{children:e.jsx(Bs,{className:"text-gray-500"})}),e.jsx(qs,{children:"If you choose a team, the coach will be notified and will add you to it."})]})})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(T,{id:"nationality",type:"select",form:m,items:d,label:"Nationality",placeholder:(f==null?void 0:f.name)||"Select Nationality",name:"nationality",className:"w-full",idFlag:!0})}),e.jsx(Q,{className:"my-6"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e.jsx(T,{id:"height",label:"Height",type:"number",form:m,name:"height",className:"col-span-1"}),e.jsx(T,{id:"weight",label:"Weight",type:"number",form:m,name:"weight",className:"col-span-1"}),e.jsx(T,{id:"age",label:"Age",type:"number",form:m,name:"age",className:"col-span-1"}),e.jsx(T,{id:"position",label:"Position",type:"select",form:m,name:"position",items:o,placeholder:(g==null?void 0:g.name)||"Select Position",idFlag:!0,className:"col-span-1"}),e.jsx(T,{id:"number",label:"Number",type:"number",form:m,name:"number",className:"col-span-1"}),e.jsx(T,{id:"footed",label:"Footed",type:"select",items:["Left:1","Right:2"],placeholder:(c==null?void 0:c.footed)||"Select Foot",form:m,name:"footed",idFlag:!1,className:"col-span-1"})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded",children:"Save"})})]})})})},Cc=()=>e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Player Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fulfill your player profile"})]}),e.jsx(Q,{}),e.jsx(Sc,{})]}),Kt=()=>{const{currentUser:s}=q(t=>t.user);return s&&(s==null?void 0:s.role)==="Player"||(s==null?void 0:s.role)==="User"?e.jsx(Me,{}):e.jsx(Ve,{to:"/"})},Tc=()=>ee({name:P().min(4,{message:"Country name must be at least 4 characters."}).max(30,{message:"Country name must not be longer than 30 characters."})}),kc=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Country",selector:a=>a.name,sortable:!0}],t=[{id:"name",label:"Name",type:"text",name:"name"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Countries",description:"Manage countries "}),e.jsx(ne,{apiPath:"country",columns:s,fields:t,title:"Country",onEditComponent:be,onDeleteComponent:ce,formSchema:Tc,defaultValues:{name:""},isExpandable:!1,isAction:!0})]})},Pc=()=>ee({name:P().min(1,{message:"Stadium name must be at least 4 characters."}).max(30,{message:"Stadium name must not be longer than 30 characters."}),capacity:Le().refine(s=>{const t=typeof s=="string"?parseInt(s,10):s;return!isNaN(t)&&t>0},{message:"Capacity must be a positive integer"}),country:P().min(1,{message:"Country is required"}),city:P().min(1,{message:"City is required"}),location:P().min(1,{message:"Location is required, coordinates are preferred"}),history:P().min(1,{message:"History is required"})}),Fc=()=>{const s=Qe(),t=[{name:"No.",selector:(n,r)=>r+1,grow:0},{name:"Stadium",selector:n=>n.name,sortable:!0}],a=[{id:"name",label:"Name",type:"text",name:"name"},{id:"capacity",label:"Capacity",type:"number",name:"capacity"},{id:"country",label:"Country",type:"select",name:"country",items:s,defaultValue:"",placeholder:"Select a Country",idFlag:!0},{id:"city",label:"City",type:"text",name:"city"},{id:"location",label:"Location",type:"text",name:"location"},{id:"history",label:"History",type:"textarea",name:"history"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Stadiums",description:"Manage stadiums"}),e.jsx(ne,{apiPath:"stadium",columns:t,fields:a,title:"Stadium",onEditComponent:be,onDeleteComponent:ce,formSchema:Pc,defaultValues:{name:"",capacity:"0",country:"",city:"",location:"",history:""},isExpandable:!1,isAction:!0})]})},Ec=()=>ee({name:P().min(1,{message:"Position name must be at least 4 characters."}).max(30,{message:"Postion name must not be longer than 30 characters."}),shortcut:P().min(2,{message:"Position shortcut must be at least 1 characters."}).max(10,{message:"Position shortcut must not be longer than 5 characters."})}),Rc=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Position",selector:a=>a.name,sortable:!0},{name:"Shortcut",selector:a=>a.shortcut,sortable:!0}],t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"shortcut",label:"Shortcut",type:"text",name:"shortcut"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Position",description:"Manage positions"}),e.jsx(ne,{apiPath:"position",columns:s,fields:t,title:"Position",onEditComponent:be,onDeleteComponent:ce,formSchema:Ec,defaultValues:{name:"",shortcut:""},isExpandable:!1,isAction:!0})]})},Dc=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Surname",selector:s=>s.surname,sortable:!0},{name:"Nationality",selector:s=>s.nationality.name,sortable:!0}],Ic=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Coaches",description:"Manage coaches"}),e.jsx(ne,{apiPath:"coach",columns:Dc,title:"Coach",onDeleteComponent:ce,formSchema:vs,isExpandable:!1,isAction:!0})]}),Ac=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{if(!s)return;const l=await(await fetch(`/api/coach/${s}`)).json();a(l),r(!1)}catch(d){console.log(d),r(!1)}finally{r(!1)}})()},[s]),{coach:t,loading:n}},Ds=({title:s,value:t,icon:a})=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:e.jsx(a,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:s}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:t})]})]}),$c=()=>{var o,d;const s=te().id,{coach:t,loading:a}=Ac(s),[n,r]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(t!=null&&t.currentTeam){const u=await(await fetch(`/api/coach/coach-stats/${s}/${t.currentTeamId}`)).json();r(u)}}catch(c){console.log(c)}})()},[s,t]),a?e.jsx(D,{}):e.jsxs("article",{className:"py-8 space-y-6",children:[e.jsx(fe,{}),e.jsx(Q,{}),e.jsxs(E,{className:"bg-white shadow-lg rounded-lg",children:[e.jsxs(H,{className:"bg-gray-100 p-6 flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden mb-4 md:mb-0 md:mr-6",children:e.jsx("img",{src:(t==null?void 0:t.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:`Photo of ${t==null?void 0:t.name}`,className:"object-cover w-full h-full"})}),e.jsxs("div",{children:[e.jsxs(J,{className:"text-2xl font-bold mb-2",children:[t==null?void 0:t.name," ",t==null?void 0:t.surname]}),e.jsxs(He,{className:"text-gray-600",children:[t==null?void 0:t.bio," | ",t==null?void 0:t.currentTeam]})]})]}),n&&e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Current Team Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ds,{title:"Total Matches",value:n.matches,icon:us}),e.jsx(Ds,{title:"Wins",value:n.wins,icon:ms}),e.jsx(Ds,{title:"Draws",value:n.draws,icon:Tr}),e.jsx(Ds,{title:"Losses",value:n.losses,icon:kr})]}),e.jsx("div",{className:"mt-4 bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["Win Rate:"," ",n.matches?(n.wins/n.matches*100).toFixed(1):0,"%"]})})]}),e.jsxs(L,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"text-gray-500 mr-3 w-5 h-5"}),e.jsx("p",{className:"text-gray-700",children:(o=t.birthDate)==null?void 0:o.toString().slice(0,10)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gs,{className:"text-gray-500 mr-3 w-5 h-5"}),e.jsx("p",{className:"text-gray-700",children:t==null?void 0:t.nationality})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ga,{className:"text-gray-500 mr-3 w-5 h-5"}),e.jsx("p",{className:"text-gray-700",children:t==null?void 0:t.city})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Previous Teams"}),e.jsx("ul",{className:"space-y-2",children:(d=t.teams)==null?void 0:d.map((l,c)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:l.split(":")[0]})]},c))})]})]})]})]})},_c=()=>{var c,u,x;const s=te().id,[t,a]=i.useState([]),[n,r]=i.useState(!0),[o,d]=i.useState(!1),l={lat:parseFloat((c=t==null?void 0:t.location)==null?void 0:c.split(",")[0]),lng:parseFloat((u=t==null?void 0:t.location)==null?void 0:u.split(",")[1])};return i.useEffect(()=>{(async()=>{try{const m=await(await fetch(`/api/admin/stadium/${s}`)).json();a(m),r(!1)}catch(p){console.log(p)}finally{r(!1)}})()},[s]),n?e.jsx(D,{}):e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 md:p-8 lg:p-10",children:[e.jsx(fe,{}),e.jsx(Q,{}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 rounded-full overflow-hidden mb-4 md:mb-0 md:mr-6",children:e.jsx("img",{src:t.imageUrl,alt:`Photo of ${t.name}`,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx(J,{className:"text-heading2-semibold mb-2",children:t.name}),e.jsx(He,{className:"text-gray-600 mb-4",children:t.history}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Country:"}),e.jsx("p",{className:"text-gray-800",children:(x=t==null?void 0:t.country)==null?void 0:x.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"City:"}),e.jsx("p",{className:"text-gray-800",children:t.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:"Capacity:"}),e.jsx("p",{className:"text-gray-800",children:t.capacity?`${t.capacity} seats`:"N/A"})]})]})]})]}),l?e.jsx("div",{className:"mt-6",children:e.jsx(fo,{apiKey:"AIzaSyCoSjgd-AFJhu0QV623MpdoeX_szMxHLAg",children:e.jsxs(go,{defaultZoom:13,defaultCenter:l,mapId:"83ffe8370fbb2e72",gestureHandling:"greedy",style:{height:"400px",width:"100%"},children:[e.jsx(jo,{position:l,onClick:()=>d(!0)}),o&&e.jsx(yo,{position:l,onCloseClick:()=>d(!1),children:e.jsxs("p",{children:[t.name," Stadium"]})})]})})}):null]})},Mc=s=>{const[t,a]=i.useState([{id:"",name:""}]),[n,r]=i.useState(!0),[o,d]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const u=await(await fetch(`/api/player/get-wanted-team/${s}`)).json();a(u.map(x=>({id:x._id,name:x.name+" "+x.surname}))),r(!1)}catch(c){d(c),r(!1)}finally{r(!1)}})()},[s]),{players:t,loading:n,error:o}},Lc=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Surname",selector:s=>s.surname,sortable:!0},{name:"Nationality",selector:s=>s.nationality,sortable:!0},{name:"Position",selector:s=>s.position,sortable:!0}],Oc=()=>ee({player:P().min(1,{message:"Player is required"})}),Bc=({data:s})=>{const{players:t,loading:a}=Mc(s==null?void 0:s._id),n=[{id:"player",label:"Player",type:"select",name:"player",items:t,placeholder:"Select a Player",idFlag:!0}];return a?e.jsx(D,{}):e.jsx(ne,{apiPath:`team-player/${s==null?void 0:s._id}`,columns:Lc,fields:n,title:"Player",onDeleteComponent:ce,formSchema:Oc,isExpandable:!1,isAction:!0,defaultValues:{player:""}})},Vc=()=>{const{coach:s}=Ze(),[t,a]=i.useState([]),[n,r]=i.useState(!0);i.useEffect(()=>{s!=null&&s.currentTeam&&o(s==null?void 0:s.currentTeam)},[s]);const o=async d=>{try{const l=await fetch(`/api/team/${d}`);if(!l.ok)throw new Error("Failed to fetch team data!");const c=await l.json();a(c),r(!1)}catch(l){console.log(l),r(!1)}finally{r(!1)}};return n?e.jsx(D,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Team",description:"Manage your team squad"}),s!=null&&s.currentTeam?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Team: ",t==null?void 0:t.name]}),e.jsxs("p",{className:"text-gray-600",children:["Coach: ",s==null?void 0:s.name," ",s==null?void 0:s.surname]})]}),e.jsx(Bc,{data:t})]}):e.jsx("p",{className:"text-lg text-gray-800 text-center",children:"You are not assigned to any team yet."})]})},zc=(s,t)=>{const[a,n]=i.useState({}),[r,o]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{if(!s)return;const l=await fetch(`/api/player/${s}`);if(!l.ok)throw new Error("Failed to fetch player data!");const c=await l.json();n(c),o(!1)}catch(l){console.log(l)}finally{o(!1)}})()},[s,t]),{player:a,loading:r}},Un=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!0),[o,d]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const u=await(await fetch(`/api/player/player-top-stats/${s}`)).json();a(u),r(!1)}catch(c){d(c),r(!1)}finally{r(!1)}})()},[s]),{playerStats:t,loading:n,error:o}},qc=()=>{var m,g;const s=te().id,{currentUser:t}=q(f=>f.user),[a,n]=i.useState(!1),{player:r,loading:o}=zc(s,a),{playerStats:d}=Un(s),[l,c]=i.useState(!1),{toast:u}=Y();i.useEffect(()=>{t&&s&&(async()=>{try{const y=await(await fetch(`/api/player/is-fan/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t==null?void 0:t._id})})).json();c(y.isFan)}catch(j){console.log(j)}})()},[t,s,a]);const x=async()=>{try{(await fetch(`/api/player/follow/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t==null?void 0:t._id})})).ok?(u({title:"Success!",description:"You are now following this player"}),n(!a)):u({title:"Error!",description:"Failed to follow player",variant:"destructive"})}catch(f){console.log(f)}},h=async()=>{try{(await fetch(`/api/player/unfollow/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t==null?void 0:t._id})})).ok?(u({title:"Success!",description:"You are no longer following this player"}),n(!a)):u({title:"Error!",description:"Failed to unfollow player",variant:"destructive"})}catch(f){console.log(f)}},p=[{name:"Season",selector:f=>f.season,sortable:!0},{name:"Goals",selector:f=>f.goals,sortable:!0,grow:.5},{name:"Assists",selector:f=>f.assists,sortable:!0,grow:.5},{name:"Yellow Cards",selector:f=>f.yellowCards,sortable:!0,grow:.5},{name:"Red Cards",selector:f=>f.redCards,sortable:!0,grow:.5},{name:"Clean Sheets",selector:f=>f.cleanSheets,sortable:!0,grow:.5},{name:"Own Goals",selector:f=>f.ownGoals,sortable:!0,grow:.5},{name:"Minutes Played",selector:f=>f.minutesPlayed,sortable:!0,grow:.5}];return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(D,{size:"large"})}):r?e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-4 py-8",children:[e.jsx(fe,{}),e.jsx(Q,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"col-span-1 lg:col-span-3",children:e.jsx(E,{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx(H,{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[e.jsx("img",{src:(r==null?void 0:r.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:`Photo of ${r==null?void 0:r.name}`,className:"w-32 h-32 rounded-full border-4 border-white mb-4 lg:mb-0 lg:mr-6"}),e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs(J,{className:"text-3xl font-bold text-white mb-2",children:[r==null?void 0:r.name," ",r==null?void 0:r.surname]}),e.jsxs(He,{className:"text-white text-lg",children:[r==null?void 0:r.position," | ",r==null?void 0:r.currentTeam]})]})]}),e.jsxs("div",{className:"mt-4 lg:mt-0",children:[e.jsxs("span",{className:"text-white font-semibold text-lg",children:[(m=r==null?void 0:r.fans)==null?void 0:m.length," fans"]}),t&&e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(k,{className:`bg-white text-blue-500 hover:bg-blue-100 font-semibold py-2 px-4 rounded-full transition-all duration-300 ease-in-out ${l?"opacity-50 cursor-not-allowed":""}`,onClick:x,disabled:l,children:"Follow"}),e.jsx(k,{className:`bg-red-500 text-white hover:bg-red-600 font-semibold py-2 px-4 rounded-full transition-all duration-300 ease-in-out ${l?"":"opacity-50 cursor-not-allowed"}`,onClick:h,disabled:!l,children:"Unfollow"})]})]})]})})})}),e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsxs(E,{className:"h-full",children:[e.jsx(H,{children:e.jsx(J,{className:"text-2xl font-bold",children:"Personal Information"})}),e.jsxs(L,{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"text-gray-500 mr-2 text-xl"}),e.jsxs("p",{className:"text-gray-700",children:[r==null?void 0:r.age," years old"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gs,{className:"text-gray-500 mr-2 text-xl"}),e.jsx("p",{className:"text-gray-700",children:r==null?void 0:r.nationality})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pr,{className:"text-gray-500 mr-2 text-xl"}),e.jsxs("p",{className:"text-gray-700",children:[r==null?void 0:r.height," cm"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fr,{className:"text-gray-500 mr-2 text-xl"}),e.jsxs("p",{className:"text-gray-700",children:[r==null?void 0:r.weight," kg"]})]})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(E,{className:"h-full",children:[e.jsx(H,{children:e.jsx(J,{className:"text-2xl font-bold",children:"Previous Teams"})}),e.jsx(L,{children:e.jsx("ul",{className:"space-y-2",children:(g=r.teams)==null?void 0:g.map((f,j)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(us,{className:"text-gray-500 mr-2"}),e.jsx("span",{className:"text-gray-700",children:f.split(":")[0]})]},j))})})]})}),e.jsx("div",{className:"col-span-1 lg:col-span-3",children:e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-2xl font-bold",children:"Player Stats"})}),e.jsx(L,{children:e.jsx(rt,{columns:p,data:d,pending:o,searchable:!1,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[5,10,15,20]})})]})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Player not found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"The requested player could not be found."}),e.jsx(fe,{className:"mt-4"})]})},Gc=()=>ee({name:P().min(1,{message:"Name is required"}),trainingDate:he.date().refine(s=>{const t=new Date(s),a=new Date;return t.getTime()>=a.getTime()},{message:"Training date must be in the future or today"}),duration:he.number().min(1,{message:"Duration is required"}).max(999,{message:"Duration must be less than 999"}),description:P().optional(),trainingType:P().min(1,{message:"Type is required"}),location:P().min(1,{message:"Location is required"}),notes:P().optional(),equipment:P().optional()}),Hc=()=>ee({name:P().min(1,{message:"Name is required"}),description:P().min(1,{message:"Description is required"})}),Uc=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Training",selector:s=>s.name,sortable:!0},{name:"Duration",selector:s=>s.duration,sortable:!0},{name:"Training Date",selector:s=>{var t;return(t=s.trainingDate)==null?void 0:t.slice(0,10)},sortable:!0},{name:"Location",selector:s=>s.location,sortable:!0}],Jc=()=>{const[s,t]=i.useState([{id:"",name:""}]),{coach:a}=Ze();i.useEffect(()=>{(async()=>{try{if(!(a!=null&&a._id))return;const o=await fetch(`/api/admin/training-type/${a==null?void 0:a._id}`);if(!o.ok)throw new Error(d.message||"Failed to fetch data!");const d=await o.json();t(d==null?void 0:d.map(l=>({id:l._id,name:l.name})))}catch(o){console.log(o)}})()},[a==null?void 0:a._id]);const n=[{id:"name",label:"Name",type:"text",name:"name"},{id:"trainingType",label:"Training Type",type:"select",name:"trainingType",items:s,placeholder:"Select a Type",idFlag:!0},{id:"trainingDate",label:"Training Date",type:"date",name:"trainingDate",placeholder:"Select a Date",time:!0,isPortal:!1},{id:"duration",label:"Duration (in minutes)",type:"number",name:"duration"},{id:"description",label:"Description",type:"textarea",name:"description"},{id:"location",label:"Location",type:"text",name:"location"},{id:"notes",label:"Notes",type:"textarea",name:"notes"},{id:"equipment",label:"Equipment",type:"textarea",name:"equipment"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Trainings",description:"Manage trainings"}),e.jsx(ne,{apiPath:"training",columns:Uc,fields:n,title:"Training",onEditComponent:be,onDeleteComponent:ce,formSchema:Gc,teamId:a==null?void 0:a.currentTeam,objectId:a==null?void 0:a._id,isAction:!0,isExpandable:!1,defaultValues:{name:"",trainingType:"",trainingDate:"",duration:"0",description:"",location:"",notes:"",equipment:""}})]})},Wc=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Type",selector:s=>s.name,sortable:!0}],Yc=()=>{const{coach:s}=Ze(),t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"description",label:"Description",type:"textarea",name:"description"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Training types",description:"Manage training types"}),e.jsx(ne,{apiPath:"training-type",columns:Wc,fields:t,title:"Training Type",objectId:s==null?void 0:s._id,onEditComponent:be,onDeleteComponent:ce,formSchema:Hc,isAction:!0,defaultValues:{name:"",description:""}})]})},Xt=({trainings:s,isArchived:t=!1,currentUser:a,currentTeamId:n,playerId:r})=>{const{emit:o}=Te(),d=u=>{(a==null?void 0:a.role)==="Player"&&o("markTeamTrainingNotificationRead",{teamId:n,userId:r,trainingId:u})},l=()=>{const u={active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800"},x=t?"completed":"active";return e.jsx(we,{className:`${u[x]} text-xs font-medium px-2 py-1 rounded-full hover:bg-blue-300`,children:t?"Completed":"Upcoming"})},c=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4 text-center",children:[t?e.jsx(ht,{className:"text-primary-500 w-16 h-16 opacity-50",strokeWidth:1.5}):e.jsx(Ot,{className:"text-primary-500 w-16 h-16 opacity-80",strokeWidth:1.5}),e.jsxs("p",{className:"text-lg text-gray-500",children:["No ",t?"completed":"active"," trainings at the moment"]}),e.jsx("p",{className:"text-sm text-gray-400",children:t?"Your completed trainings will appear here":"Upcoming trainings will be displayed when scheduled"})]});return e.jsxs(E,{className:"w-full shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between border-b pb-4",children:[e.jsx(J,{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:t?e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"text-primary-500",size:28}),e.jsx("span",{children:"Completed Trainings"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ot,{className:"text-primary-500",size:28}),e.jsx("span",{children:"Upcoming Trainings"})]})}),s&&s.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[s.length," ",t?"Completed":"Upcoming"," Trainings"]})]}),e.jsx(L,{className:"p-0",children:s&&s.length>0?e.jsx("div",{className:"divide-y",children:s.map(u=>{var x;return e.jsxs(F,{to:`/training/${u._id}`,className:"block hover:bg-gray-50 transition-colors duration-200 relative",onClick:()=>d(u._id),children:[(a==null?void 0:a.role)==="Player"&&u.isNew&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:e.jsxs(we,{className:"bg-gray-600 text-white px-3 py-1 rounded-full animate-pulse flex items-center space-x-1",children:[e.jsx(Er,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-bold",children:"New"})]})}),e.jsxs("div",{className:"p-6 flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:u.name}),l()]}),e.jsx("div",{className:"flex items-center space-x-3 text-gray-600",children:e.jsx(we,{variant:"secondary",className:"text-xs",children:(x=u.trainingType)==null?void 0:x.split(":")[1]})})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-2 md:text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 justify-start md:justify-end",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:new Date(u.trainingDate).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 justify-start md:justify-end",children:[e.jsx(Ye,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:new Date(u.trainingDate).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})]})]})]})]},u._id)})}):c()})]})},Jn=(s,t)=>{const[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(!s)return;const x=await(await fetch(`/api/team/${s}`)).json();n(x),o(!1)}catch(u){l(u),o(!1)}finally{o(!1)}})()},[s,t]),{team:a,loading:r,error:d}},Qc=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{if(!s)return;r(!0);const d=await fetch(`/api/admin/training/${s}`);if(!d.ok)throw new Error("Failed to fetch trainings data!");const l=await d.json();a(l)}catch(d){console.log(d)}finally{r(!1)}})()},[s]),{trainings:t,loading:n}},Zc=()=>{var h,p;const{player:s,currentUser:t,loading:a}=ks(),{coach:n,loading:r}=Ze(),{team:o}=Jn(((h=s==null?void 0:s.currentTeam)==null?void 0:h._id)||(n==null?void 0:n.currentTeam)),{trainings:d,loading:l}=Qc((n==null?void 0:n._id)||((p=o==null?void 0:o.coach)==null?void 0:p._id)),[c,u]=i.useState({activeTrainings:[],completedTrainings:[]}),x=a||r||!o||l;return i.useEffect(()=>{if(d&&(t==null?void 0:t.role)==="Player"&&(s!=null&&s._id)){const m=g=>g.map(f=>{var j;return{...f,isNew:!((j=f.isRead)!=null&&j.includes(s._id))&&f.isActive}});u({activeTrainings:m(d.filter(g=>g==null?void 0:g.isActive)),completedTrainings:m(d.filter(g=>g==null?void 0:g.isCompleted))})}else d&&u({activeTrainings:d.filter(m=>m==null?void 0:m.isActive),completedTrainings:d.filter(m=>m==null?void 0:m.isCompleted)})},[d,s==null?void 0:s._id,t==null?void 0:t.role]),x?e.jsx(D,{}):!(n!=null&&n.currentTeam)&&!(s!=null&&s.currentTeam)?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(E,{className:"w-full max-w-md shadow-xl hover:shadow-2xl transition-all duration-300",children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Bt,{className:"mx-auto mb-4 text-primary-500",size:64,strokeWidth:1.5}),e.jsx("p",{className:"text-lg text-gray-800 text-center",children:"You are not assigned to any team yet."})]})})}):e.jsx("div",{className:"py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-8xl mx-auto space-y-8",children:[e.jsx(E,{className:"w-full shadow-lg hover:shadow-xl transition-all duration-300",children:e.jsxs(H,{className:"flex flex-col md:flex-row items-center justify-between p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 md:mb-0",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(Bt,{className:"text-primary-500",size:32})}),e.jsx(J,{className:"text-2xl md:text-3xl font-bold text-gray-800",children:o==null?void 0:o.name})]}),e.jsx("div",{className:"w-32 h-32 rounded-xl overflow-hidden shadow-md",children:e.jsx("img",{src:(o==null?void 0:o.logoUrl)||"https://d3awt09vrts30h.cloudfront.net/team_img_default.png",alt:"Team logo",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})})]})}),e.jsxs(rs,{defaultValue:"active",className:"w-full",children:[e.jsxs(Ke,{className:"grid grid-cols-2 bg-white shadow-md rounded-full p-1 mb-6",children:[e.jsxs(ye,{value:"active",className:"flex items-center space-x-2 rounded-full data-[state=active]:bg-primary-500 data-[state=active]:text-white",children:[e.jsx(Rr,{size:20}),e.jsx("span",{children:"Active Trainings"})]}),e.jsxs(ye,{value:"completed",className:"flex items-center space-x-2 rounded-full data-[state=active]:bg-primary-500 data-[state=active]:text-white",children:[e.jsx(ms,{size:20}),e.jsx("span",{children:"Completed Trainings"})]})]}),e.jsx(me,{value:"active",className:"animate-fade-in",children:e.jsx(Xt,{trainings:c.activeTrainings,currentUser:t,currentTeamId:o==null?void 0:o._id,playerId:s==null?void 0:s._id})}),e.jsx(me,{value:"completed",className:"animate-fade-in",children:e.jsx(Xt,{trainings:c.completedTrainings,isArchived:!0,currentUser:t})})]})]})})},Wn=s=>{const[t,a]=i.useState([{id:"",name:""}]),[n,r]=i.useState([]),[o,d]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{if(!s)return;d(!0);const c=await fetch(`/api/admin/team-player/${s}`);if(!c.ok)throw new Error("Failed to fetch players data!");const u=await c.json();r(u),a(u.map(x=>({id:x._id,name:`${x.name} ${x.surname}`})))}catch(c){console.log(c)}finally{d(!1)}})()},[s]),{playersToSelect:t,players:n,loading:o}},Kc=ee({attendance:xo()}),Xc=()=>ee({player:P().min(1,{message:"Player is required"})}),ed=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Player",selector:s=>`${s.name} ${s.surname}`,sortable:!0}],sd=()=>{var m;const[s,t]=i.useState(null),[a,n]=i.useState(!0),{player:r,currentUser:o}=ks(),{coach:d}=Ze(),{playersToSelect:l}=Wn(d==null?void 0:d.currentTeam),{id:c}=te(),{toast:u}=Y(),x=ie({resolver:oe(Kc),defaultValues:{attendance:!1}}),h=i.useCallback(async()=>{try{n(!0);const g=await fetch(`/api/admin/training/get/${c}`);if(!g.ok)throw new Error("Failed to fetch data!");const f=await g.json();t(f)}catch(g){console.error(g),u({title:"Error",description:"Failed to fetch training details",variant:"destructive"})}finally{n(!1)}},[c,u]);i.useEffect(()=>{h()},[h]),i.useEffect(()=>{var g;s&&r&&x.setValue("attendance",(g=s.participants)==null?void 0:g.includes(r._id))},[s,r,x]);const p=async g=>{try{if((await fetch(`/api/admin/training/attendance/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,playerId:r==null?void 0:r._id})})).ok)u({title:"Success!",description:"Attendance marked successfully"});else throw new Error("Failed to mark attendance")}catch(f){console.error(f),u({title:"Error!",description:"Failed to mark attendance",variant:"destructive"})}};return a?e.jsx(D,{}):e.jsxs("div",{className:"mx-auto px-4 py-8 max-w-8xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx(fe,{}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),new Date(s==null?void 0:s.trainingDate).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(E,{className:"bg-gradient-to-br from-primary-500 to-purple-600 text-white rounded-xl shadow-2xl",children:[e.jsx(H,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(J,{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(ts,{className:"w-8 h-8"}),s==null?void 0:s.name]}),(s==null?void 0:s.isActive)&&e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs",children:"Active"})]})}),e.jsxs(L,{className:"pt-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),e.jsxs("span",{children:[s==null?void 0:s.duration," mins"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dr,{className:"w-5 h-5"}),e.jsx("span",{children:s==null?void 0:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:(m=s==null?void 0:s.trainingType)==null?void 0:m.name})]})]}),(s==null?void 0:s.isActive)&&(o==null?void 0:o.role)==="Player"&&e.jsx(xe,{...x,children:e.jsx("form",{onSubmit:x.handleSubmit(p),className:"mt-6 bg-white/10 p-4 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center justify-center w-full space-y-2 ",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(T,{id:"attendance",type:"checkbox",form:x,name:"attendance",labelName:"Mark Attendance"})}),e.jsx(k,{type:"submit",className:"bg-white text-primary-500 hover:bg-purple-100",children:"Submit Attendance"})]})})})]})]})}),e.jsx("div",{className:"space-y-6",children:["typeDescription","notes","equipment"].map(g=>(s==null?void 0:s[g])&&e.jsxs(E,{className:"bg-gray-100 rounded-xl shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(H,{className:"pb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[g==="typeDescription"?e.jsx(Ir,{className:"w-5 h-5"}):g==="notes"?e.jsx(Vt,{className:"w-5 h-5"}):e.jsx(Vs,{className:"w-5 h-5"}),g==="typeDescription"?"Type Description":g==="notes"?"Coach Notes":"Required Equipment"]})}),e.jsx(L,{children:e.jsx("p",{className:"text-gray-600",children:s[g]})})]},g))})]}),d&&(o==null?void 0:o.role)==="Coach"&&(s==null?void 0:s.participants)&&e.jsxs("div",{className:"mt-18",children:[e.jsx(Q,{className:"mb-6"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-6 flex items-center justify-center gap-3",children:[e.jsx(Vs,{className:"w-7 h-7"}),"Training Participants"]}),e.jsx(ne,{apiPath:"participants",columns:ed,fields:[{id:"player",label:"Player",type:"select",name:"player",items:l,placeholder:"Select a Player",idFlag:!0}],title:"Participant",objectId:c,onDeleteComponent:ce,formSchema:Xc,defaultValues:{player:""},isExpandable:!1,isAction:!0})]})]})},Re=({title:s,linkTo:t,icon:a,notificationCount:n})=>e.jsx("div",{className:"transform hover:scale-105 transition-transform duration-300",children:e.jsxs(F,{to:t,className:"relative flex items-center justify-between p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[a&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:e.jsx(a,{className:"text-2xl text-blue-500 dark:text-blue-400"})}),n>0&&e.jsx("div",{className:"absolute -top-2 -right-2 flex items-center justify-center min-w-6 h-6 px-2 text-xs font-bold text-white bg-red-500 rounded-full",children:n>99?"99+":n})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:s})]}),e.jsx(xa,{className:"text-gray-400 dark:text-gray-500"})]})}),Ps=s=>{const[t,a]=i.useState([]),[n,r]=i.useState([]),[o,d]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const c=await fetch(`/api/season/get-season/${s}`);if(!c.ok)throw new Error("Failed to fetch season data!");const u=await c.json();a(u.season),r(u.leagueName),d(!1)}catch(c){console.log(c),d(!1)}finally{d(!1)}})()},[s]),{season:t,league:n,loading:o}},td=()=>{const s=te().id,{user:t,loading:a}=ze(),{season:n,league:r}=Ps(s);return a?e.jsx(D,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-heading4-medium font-bold text-gray-800",children:"Referee Dashboard"}),e.jsxs("p",{className:"text-body1-bold text-muted-foreground",children:[r," / ",n==null?void 0:n.name]})]}),e.jsx(Q,{})]}),t!=null&&t.isProfileFilled?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ",children:[e.jsx(Re,{title:"Schedule",linkTo:`/dashboard/referee/league/schedule/${s}`}),e.jsx(Re,{title:"Assign Referee",linkTo:`/dashboard/referee/league/assign-referee/${s}`}),e.jsx(Re,{title:"Results",linkTo:`/dashboard/referee/league/results/${s}`}),e.jsx(Re,{title:"Match Details",linkTo:`/dashboard/referee/league/match-details/${s}`})]}):e.jsxs("div",{className:"text-gray-800 text-lg text-center",children:[e.jsx("p",{className:"mb-4",children:"Please fill in your profile to access the dashboard."}),e.jsxs(F,{to:"/user/referee/profile",className:"inline-flex items-center justify-center px-4 py-2 bg-primary-500 hover:bg-purple-500 text-white rounded-md transition-colors duration-300",children:[e.jsx("span",{children:"Complete Profile"}),e.jsx(ps,{className:"ml-2 h-5 w-5"})]})]})]})})},ad=ee({homeTeam:P().min(1,{message:"Home team is required"}),awayTeam:P().min(1,{message:"Away team is required"}),startDate:he.date().refine(s=>{const t=new Date(s),a=new Date;return t.getTime()>=a.getTime()},{message:"Date must be in the future or today"})}),nd=({match:s,teams:t})=>{const{toast:a}=Y(),[n,r]=i.useState(!1),o=ie({resolver:oe(ad),defaultValues:{homeTeam:s==null?void 0:s.homeTeam.id,awayTeam:s==null?void 0:s.awayTeam.id,startDate:s==null?void 0:s.startDate},mode:"onChange"}),d=o.getValues("startDate"),l=new Date(d),c=async u=>{var h,p,m,g;const x={...u,homeTeam:(h=u==null?void 0:u.homeTeam)!=null&&h.id?(p=u==null?void 0:u.homeTeam)==null?void 0:p.id:u==null?void 0:u.homeTeam,awayTeam:(m=u==null?void 0:u.awayTeam)!=null&&m.id?(g=u==null?void 0:u.awayTeam)==null?void 0:g.id:u==null?void 0:u.awayTeam,startDate:l};try{(await fetch(`/api/referee/edit-match/${s==null?void 0:s.matchId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok?(a({title:"Success!",description:"Match updated successfully"}),r(!1)):a({title:"Error!",description:"Failed to update match",variant:"destructive"})}catch(f){console.error(f)}};return e.jsxs(De,{open:n,onOpenChange:r,className:"w-full",children:[e.jsx(as,{asChild:!0,children:e.jsx(k,{variant:"secondary",className:"w-32",children:"Edit Match"})}),e.jsxs(Ae,{className:"sm:max-w-[800px] md:max-w-[900px] lg:max-w-[1000px] h-auto",children:[e.jsxs($e,{children:[e.jsx(_e,{children:"Edit Match"}),e.jsx(Ge,{children:"Make changes to this match here. Click save when you're done."})]}),e.jsx(xe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(c),className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(T,{id:"homeTeam",label:"Home Team",type:"select",form:o,name:"homeTeam",placeholder:(s==null?void 0:s.homeTeam.name)||"Select Home Team",items:t,idFlag:!0})}),e.jsx("div",{children:e.jsx(T,{id:"awayTeam",label:"Away Team",type:"select",form:o,name:"awayTeam",placeholder:(s==null?void 0:s.awayTeam.name)||"Select Away Team",items:t,idFlag:!0})}),e.jsx("div",{children:e.jsx(T,{id:"startDate",label:"Start Date",type:"date",form:o,name:"startDate",placeholder:"Select date",initialDate:s==null?void 0:s.startDate,isEdit:!0,isPortal:!1,time:!0})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(k,{type:"submit",className:"bg-primary-500 text-white hover:bg-purple-500 px-4 py-2 rounded-md",children:"Save"})})]})})]})]})},Yn=i.createContext(null);function it(){const s=i.useContext(Yn);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const Dt=i.forwardRef(({orientation:s="horizontal",opts:t,setApi:a,plugins:n,className:r,children:o,...d},l)=>{const[c,u]=bo({...t,axis:s==="horizontal"?"x":"y"},n),[x,h]=i.useState(!1),[p,m]=i.useState(!1),g=i.useCallback(N=>{N&&(h(N.canScrollPrev()),m(N.canScrollNext()))},[]),f=i.useCallback(()=>{u==null||u.scrollPrev()},[u]),j=i.useCallback(()=>{u==null||u.scrollNext()},[u]),y=i.useCallback(N=>{N.key==="ArrowLeft"?(N.preventDefault(),f()):N.key==="ArrowRight"&&(N.preventDefault(),j())},[f,j]);return i.useEffect(()=>{!u||!a||a(u)},[u,a]),i.useEffect(()=>{if(u)return g(u),u.on("reInit",g),u.on("select",g),()=>{u==null||u.off("select",g)}},[u,g]),e.jsx(Yn.Provider,{value:{carouselRef:c,api:u,opts:t,orientation:s||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:f,scrollNext:j,canScrollPrev:x,canScrollNext:p},children:e.jsx("div",{ref:l,onKeyDownCapture:y,className:C("relative",r),role:"region","aria-roledescription":"carousel",...d,children:o})})});Dt.displayName="Carousel";const It=i.forwardRef(({className:s,...t},a)=>{const{carouselRef:n,orientation:r}=it();return e.jsx("div",{ref:n,className:"overflow-hidden",children:e.jsx("div",{ref:a,className:C("flex",r==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...t})})});It.displayName="CarouselContent";const At=i.forwardRef(({className:s,...t},a)=>{const{orientation:n}=it();return e.jsx("div",{ref:a,role:"group","aria-roledescription":"slide",className:C("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",s),...t})});At.displayName="CarouselItem";const $t=i.forwardRef(({className:s,variant:t="outline",size:a="icon",...n},r)=>{const{orientation:o,scrollPrev:d,canScrollPrev:l}=it();return e.jsxs(k,{ref:r,variant:t,size:a,className:C("absolute  h-8 w-8 rounded-full",o==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:d,...n,children:[e.jsx(Vi,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});$t.displayName="CarouselPrevious";const _t=i.forwardRef(({className:s,variant:t="outline",size:a="icon",...n},r)=>{const{orientation:o,scrollNext:d,canScrollNext:l}=it();return e.jsxs(k,{ref:r,variant:t,size:a,className:C("absolute h-8 w-8 rounded-full",o==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:d,...n,children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});_t.displayName="CarouselNext";const rd=()=>ee({startDate:he.date().refine(s=>{const t=new Date(s),a=new Date;return t.getTime()>a.getTime()},{message:"Date must be in the future"})}),id=()=>{const s=te().id,[t,a]=i.useState([]),[n,r]=i.useState(!1),{season:o,league:d}=Ps(s),{toast:l}=Y(),{selectTeams:c,loading:u}=Gn(s);i.useEffect(()=>{n||a([])},[n]);const x=ie({resolver:oe(rd()),defaultValues:{startDate:""},mode:"onChange"}),h=async(f,j,y)=>{try{const N=await fetch(f,{method:j,headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(N.ok)return N.json();console.error(`Failed to ${j} data`),N.status===405?l({variant:"destructive",title:"Error!",description:"Schedule is already generated. Delete rounds first."}):N.status===406&&l({variant:"destructive",title:"Error!",description:"No teams found in the league. Contact admin."})}catch(N){console.error(`Error while ${j} data:`,N)}},p=async()=>{const{startDate:f}=x.getValues();await h(`/api/referee/generate-schedule/${s}`,"POST",{startDate:f,seasonId:o._id})&&(r(!0),g(),l({title:"Schedule Generated!",description:"Schedule has been generated successfully."}))},m=async()=>{await h(`/api/referee/delete-schedule/${s}?seasonId=${o._id}`,"DELETE"),r(!1),l({title:"Rounds Deleted!",description:"All rounds have been deleted successfully."})},g=async()=>{const f=await h(`/api/referee/get-rounds/${s}?seasonId=${o._id}`);(f==null?void 0:f.length)===0?l({variant:"destructive",title:"Error!",description:"No schedule found. Generate schedule first."}):f&&(a(f),l({title:"Schedule Downloaded!",description:"Schedule has been downloaded successfully."}))};return u?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto py-8 px-4 md:px-6 lg:px-8",children:[e.jsx(X,{title:"Schedule Management",description:"To edit schedule, download it first",sideText:`${d} / ${o==null?void 0:o.name}`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsx(xe,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(p),className:"flex flex-col gap-4",children:[e.jsx(T,{id:"startDate",label:`Date of first match in ${o==null?void 0:o.name}`,type:"date",form:x,name:"startDate",placeholder:"Select date",initialDate:new Date}),e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row",children:e.jsx(k,{type:"submit",className:"bg-primary-500 text-white hover:bg-primary-600 flex-1",children:"Generate Schedule"})})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.jsx(k,{type:"button",className:"bg-primary-500 text-white hover:bg-primary-600 flex-1",onClick:g,children:"Download Schedule"}),e.jsx(st,{type:"button",title:"Delete Schedule",description:"Are you sure you want to delete this schedule?",handleClick:m})]})}),(t==null?void 0:t.length)>0&&e.jsx(Dt,{children:e.jsxs("div",{className:"w-full flex flex-col items-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"Schedule:"}),e.jsxs("div",{className:"w-full max-w-4xl grid gap-8",children:[e.jsx(It,{children:t.map(f=>{var j;return e.jsx(At,{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-slate-300 border overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-800 text-white px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:f.name}),e.jsxs("h3",{className:"text-xl font-semibold",children:[d," / ",o==null?void 0:o.name]})]}),e.jsx("div",{className:"p-6",children:(j=f.matches)==null?void 0:j.map(y=>{var N,b;return e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b last:mb-0 last:pb-0 last:border-none",children:[e.jsxs("div",{className:"flex-1 mr-4",children:[e.jsxs("div",{className:"text-gray-800 font-semibold",children:[(N=y.homeTeam)==null?void 0:N.name," vs ",(b=y.awayTeam)==null?void 0:b.name]}),e.jsx("div",{className:"text-gray-600",children:new Date(y.startDate).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx(nd,{match:y,teams:c})})]},y==null?void 0:y.matchId)})})]})},f._id)})}),e.jsx($t,{className:"absolute left-0 transform -translate-y-1/2 top-1/2 bg-primary-500 text-white hover:bg-primary-600 px-4 py-2 rounded-l-md max-sm:hidden"}),e.jsx(_t,{className:"absolute right-0 transform -translate-y-1/2 top-1/2 bg-primary-500 text-white hover:bg-primary-600 px-4 py-2 rounded-r-md max-sm:hidden"})]})]})})]})},od=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(!0),[r,o]=i.useState(null),d=ns(),[l,c]=i.useState("");return i.useEffect(()=>{var u;if(d.length>0){const x=(u=d[d.length-1])==null?void 0:u.id;console.log(x),c(x)}},[d]),i.useEffect(()=>{l&&(async()=>{try{const x=await fetch(`/api/admin/league?season=${l}`);if(!x.ok)throw new Error("Failed to fetch leagues");const h=await x.json();t(h),n(!1)}catch(x){console.log(x),o("Failed to load leagues. Please try again.")}finally{n(!1)}})()},[l]),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-heading4-medium mb-4",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose a league you want to manage"}),e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(Pe,{value:l,onValueChange:u=>{c(u),o(null)},className:"mr-2",children:[e.jsxs(Se,{className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(Fe,{placeholder:"Select Season"}),e.jsx(xs,{className:"ml-2 text-gray-400"})]}),e.jsx(Ce,{children:d==null?void 0:d.filter(u=>u==null?void 0:u.id).map((u,x)=>e.jsx(se,{value:u==null?void 0:u.id,children:u==null?void 0:u.name},x))})]})}),e.jsx(Q,{}),a&&e.jsx(D,{className:"mt-6"}),r&&e.jsx("p",{className:"text-red-500 mt-6",children:r}),!a&&!r&&e.jsx("article",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6",children:s.map(u=>e.jsx(E,{className:"w-full h-[100px] hover:bg-purple-200 transition duration-300 ease-in-out",children:e.jsx(F,{to:`/dashboard/referee/league/${u._id}`,children:e.jsx(H,{className:"flex items-center justify-center h-full",children:e.jsx(J,{children:u.name})})})},u._id))})]})},ld=()=>{const{user:s,loading:t}=ze(),[a,n]=i.useState(0),[r,o]=i.useState(0);i.useEffect(()=>{if(!s)return;(async()=>{try{const u=await(await fetch("/api/admin/notifications-count")).json();n(u.notificationsCount),o(u.reportsCount)}catch(c){console.error("Failed to fetch notifications:",c)}})()},[s]);const d=[{title:"Role Changes",icon:yt,linkTo:"/dashboard/admin/role-changes",notificationCount:a},{title:"Reports",icon:Ar,linkTo:"/dashboard/admin/reports",notificationCount:r},{title:"Users",icon:Vs,linkTo:"/dashboard/admin/users"},{title:"Players",icon:us,linkTo:"/dashboard/admin/players"},{title:"Coaches",icon:ht,linkTo:"/dashboard/admin/coaches"},{title:"Referees",icon:$r,linkTo:"/dashboard/admin/referees"},{title:"Sponsors",icon:_r,linkTo:"/dashboard/admin/sponsors"},{title:"Teams",icon:ja,linkTo:"/dashboard/admin/teams"},{title:"Leagues",icon:ms,linkTo:"/dashboard/admin/leagues"},{title:"Stadiums",icon:Mr,linkTo:"/dashboard/admin/stadiums"},{title:"Positions",icon:ya,linkTo:"/dashboard/admin/positions"},{title:"Countries",icon:Lr,linkTo:"/dashboard/admin/countries"},{title:"Seasons",icon:Or,linkTo:"/dashboard/admin/seasons"},{title:"About",icon:ds,linkTo:"/dashboard/admin/about"},{title:"Terms",icon:ba,linkTo:"/dashboard/admin/terms"},{title:"Privacy",icon:Br,linkTo:"/dashboard/admin/privacy"},{title:"Contact",icon:Os,linkTo:"/dashboard/admin/contact"},{title:"FAQ",icon:Bs,linkTo:"/dashboard/admin/faq"},{title:"Forum Categories",icon:Vr,linkTo:"/dashboard/admin/forum-category"}];return t?e.jsx(D,{}):e.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-heading4-medium font-bold text-gray-800",children:"Admin Dashboard"}),e.jsx(Q,{})]}),s.isProfileFilled?e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6",children:d.map(l=>e.jsx(Re,{title:l.title,icon:l.icon,linkTo:l.linkTo,notificationCount:l.notificationCount},l.title))}):e.jsxs("div",{className:"text-gray-800 text-lg text-center",children:[e.jsx("p",{className:"mb-4",children:"Please fill in your profile to access the dashboard."}),e.jsxs(F,{to:"/user/admin/profile",className:"inline-flex items-center justify-center px-4 py-2 bg-primary-500 hover:bg-purple-500 text-white rounded-md transition-colors duration-300",children:[e.jsx("span",{children:"Complete Profile"}),e.jsx(ps,{className:"ml-2 h-5 w-5"})]})]})]})},ea=()=>{const{currentUser:s}=q(t=>t.user);return s&&s.role==="Coach"?e.jsx(Me,{}):e.jsx(Ve,{to:"/"})},cd=()=>{const{user:s,loading:t}=ze();return t?e.jsx(D,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-heading4-medium font-bold text-gray-800",children:"Coach Dashboard"}),e.jsx(Q,{})]}),s!=null&&s.isProfileFilled?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ",children:[e.jsx(Re,{title:"Team",linkTo:"/dashboard/coach/team"}),e.jsx(Re,{title:"Training",linkTo:"/dashboard/coach/training"}),e.jsx(Re,{title:"Training Type",linkTo:"/dashboard/coach/training-type"}),e.jsx(Re,{title:"Team Equipment",linkTo:"/dashboard/coach/team-equipment"})]}):e.jsxs("div",{className:"text-gray-800 text-lg text-center",children:[e.jsx("p",{className:"mb-4",children:"Please fill in your profile to access the dashboard."}),e.jsxs(F,{to:"/user/coach/profile",className:"inline-flex items-center justify-center px-4 py-2 bg-primary-500 hover:bg-purple-500 text-white rounded-md transition-colors duration-300",children:[e.jsx("span",{children:"Complete Profile"}),e.jsx(ps,{className:"ml-2 h-5 w-5"})]})]})]})})},dd=zi,Qn=i.forwardRef(({className:s,...t},a)=>e.jsx(dn,{ref:a,className:C("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Qn.displayName=dn.displayName;const md=fs("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-primary-500 text-white",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Zn=i.forwardRef(({className:s,variant:t,...a},n)=>e.jsx(mn,{ref:n,className:C(md({variant:t}),s),...a}));Zn.displayName=mn.displayName;const xd=i.forwardRef(({className:s,...t},a)=>e.jsx(xn,{ref:a,className:C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));xd.displayName=xn.displayName;const Kn=i.forwardRef(({className:s,...t},a)=>e.jsx(un,{ref:a,className:C("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(Aa,{className:"h-4 w-4"})}));Kn.displayName=un.displayName;const Xn=i.forwardRef(({className:s,...t},a)=>e.jsx(hn,{ref:a,className:C("text-sm font-semibold [&+div]:text-xs",s),...t}));Xn.displayName=hn.displayName;const er=i.forwardRef(({className:s,...t},a)=>e.jsx(pn,{ref:a,className:C("text-sm opacity-90",s),...t}));er.displayName=pn.displayName;function ud(){const{toasts:s}=Y();return e.jsxs(dd,{children:[s.map(function({id:t,title:a,description:n,action:r,...o}){return e.jsxs(Zn,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Xn,{children:a}),n&&e.jsx(er,{children:n})]}),r,e.jsx(Kn,{})]},t)}),e.jsx(Qn,{})]})}const hd=({matches:s})=>e.jsx(e.Fragment,{children:s==null?void 0:s.map(t=>e.jsx(F,{to:`/dashboard/referee/league/result/${t._id}`,children:e.jsx(E,{className:"w-full flex p-5 my-5",children:e.jsxs("p",{children:[t.homeTeam.name," vs ",t.awayTeam.name," -"," ",new Date(t.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})]})})},t._id))}),pd=({matches:s})=>e.jsx(e.Fragment,{children:s==null?void 0:s.map(t=>{var a,n;return e.jsx(F,{to:`/dashboard/referee/league/result/${t._id}`,children:e.jsx(E,{className:"w-full flex p-5 my-5",children:e.jsxs("p",{children:[(a=t==null?void 0:t.homeTeam)==null?void 0:a.name," vs ",(n=t==null?void 0:t.awayTeam)==null?void 0:n.name," -"," ",new Date(t.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})]})})},t._id)})}),fd=(s,t)=>{const{currentUser:a}=q(l=>l.user),[n,r]=i.useState([]),[o,d]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{d(!0);const c=await fetch(`/api/referee/completed-matches/${s}?userId=${a==null?void 0:a._id}`);if(!c.ok)throw new Error("Failed to fetch matches data!");const u=await c.json();r(u)}catch(c){console.log(c)}finally{d(!1)}})()},[s,t,a._id]),{matches:n,loading:o}},gd=(s,t)=>{const{currentUser:a}=q(l=>l.user),[n,r]=i.useState([]),[o,d]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{d(!0);const c=await fetch(`/api/referee/filled-matches/${s}?userId=${a==null?void 0:a._id}`);if(!c.ok)throw new Error("Failed to fetch matches data!");const u=await c.json();r(u)}catch(c){console.log(c)}finally{d(!1)}})()},[s,t,a._id]),{matches:n,loading:o}},jd=()=>{const s=te().id,{matches:t,loading:a}=fd(s),{matches:n}=gd(s),{season:r,league:o}=Ps(s);return a?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto px-4 py-8 md:px-6 lg:px-8",children:[e.jsx(X,{title:"Match Results",description:"Manage match results here",sideText:`${o} / ${r==null?void 0:r.name}`}),e.jsxs(rs,{defaultValue:"notFilled",className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[e.jsx(ye,{value:"notFilled",className:"py-2 px-4 bg-gray-200 rounded-md text-gray-600 font-medium hover:bg-gray-300 transition-colors",children:"Not Filled"}),e.jsx(ye,{value:"filled",className:"py-2 px-4 bg-gray-200 rounded-md text-gray-600 font-medium hover:bg-gray-300 transition-colors",children:"Filled"})]}),e.jsx(me,{value:"notFilled",children:e.jsx(hd,{matches:t})}),e.jsx(me,{value:"filled",children:e.jsx(pd,{matches:n})})]})]})},yd=s=>{const[t,a]=i.useState({}),[n,r]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{if(!s)return;r(!0);const d=await fetch(`/api/referee/get-match/${s}`);if(!d.ok)throw new Error("Failed to fetch match data!");const l=await d.json();a(l)}catch(d){console.log(d)}finally{r(!1)}})()},[s]),{match:t,loading:n}},bd=s=>{const[t,a]=i.useState({}),[n,r]=i.useState(!1);return i.useEffect(()=>{(async()=>{try{r(!0);const d=await fetch(`/api/referee/match-result/${s}`);if(!d.ok)throw new Error("Failed to fetch match data!");const l=await d.json();a(l)}catch(d){console.log(d)}finally{r(!1)}})()},[s]),{result:t,loading:n}},sa=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s==null?void 0:s.name,sortable:!0},{name:"Surname",selector:s=>s==null?void 0:s.surname,sortable:!0},{name:"Age",selector:s=>s==null?void 0:s.age,sortable:!0,hide:"sm"},{name:"Pos",selector:s=>s==null?void 0:s.positionShortcut,sortable:!0},{name:"Number",selector:s=>s==null?void 0:s.number,sortable:!0,hide:"md"}],Nd=()=>{var l,c,u,x;const{id:s}=te(),{match:t,loading:a}=yd(s),{result:n}=bd(s),{toast:r}=Y(),o=ie({resolver:oe(dt()),defaultValues:{homeTeamScore:0,awayTeamScore:0},mode:"onChange"});i.useEffect(()=>{var h,p;n&&o.reset({homeTeamScore:((h=n==null?void 0:n.result)==null?void 0:h.homeTeamScore)||0,awayTeamScore:((p=n==null?void 0:n.result)==null?void 0:p.awayTeamScore)||0})},[n,o]);const d=async h=>{try{(await fetch("/api/referee/add-result",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,match:t==null?void 0:t._id,season:t==null?void 0:t.season})})).ok?r({title:"Success!",description:"Match result added successfully"}):r({title:"Error!",description:"Failed to add match result",variant:"destructive"})}catch(p){console.error("Error adding match result:",p)}};return a?e.jsx(D,{}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(fe,{}),e.jsx("div",{className:"mt-8 bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Match Details"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between text-gray-600 mb-6",children:[e.jsx("p",{className:"mb-2 sm:mb-0",children:"Add match result here."}),e.jsxs("p",{children:[(l=t==null?void 0:t.league)==null?void 0:l.name," / ",(c=t==null?void 0:t.season)==null?void 0:c.name]})]}),e.jsx(Q,{className:"my-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Match Date"}),e.jsx("p",{className:"text-gray-600",children:new Date(t.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})})]}),e.jsx(xe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[e.jsx(T,{id:"homeTeamScore",label:`${(u=t==null?void 0:t.homeTeam)==null?void 0:u.name} Score`,type:"number",form:o,name:"homeTeamScore"}),e.jsx(T,{id:"awayTeamScore",label:`${(x=t==null?void 0:t.awayTeam)==null?void 0:x.name} Score`,type:"number",form:o,name:"awayTeamScore"}),e.jsx(k,{type:"submit",disabled:!o.formState.isValid,className:"w-full sm:w-auto bg-primary-500 hover:bg-primary-600 text-white font-semibold py-2 px-6 rounded-md transition duration-300",children:"Save Result"})]})})]})]})}),e.jsx("div",{className:"mt-12 bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsxs("div",{className:"px-6 py-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Player Stats"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Add player stats for this match."}),e.jsx(Q,{className:"my-6"}),(t==null?void 0:t.homeTeam)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:[t.homeTeam.name," players:"]}),e.jsx(ne,{apiPath:`team-player/${t.homeTeam._id}`,columns:sa,title:"Player",formSchema:dt,isAction:!1,isExpandable:!0})]}),(t==null?void 0:t.awayTeam)&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:[t.awayTeam.name," players:"]}),e.jsx(ne,{apiPath:`team-player/${t.awayTeam._id}`,columns:sa,title:"Player",formSchema:dt,isAction:!1,isExpandable:!0})]})]})})]})},Is=({title:s,items:t,icon:a,linkPrefix:n})=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"my-8",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(a,{className:"mr-2"}),s]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mb-4"}),t.map(r=>e.jsx($.div,{whileHover:{scale:1.02},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-4 hover:shadow-md transition-all duration-300",children:e.jsxs(F,{to:`${n}/${r._id}`,className:"flex items-center p-4",children:[e.jsx("img",{src:r.imageUrl||r.logoUrl||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:r.name,className:"rounded-full w-12 h-12 object-cover mr-4"}),e.jsx("div",{className:"flex-grow",children:e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[r.name," ",r.surname]})})]})},r._id))]}),wd=()=>{var d,l,c,u;const[s,t]=i.useState(localStorage.getItem("lastSearch")||""),[a,n]=i.useState({}),[r,o]=i.useState(!1);return i.useEffect(()=>{const h=setTimeout(async()=>{if(!s){n({});return}o(!0);try{const m=await fetch(`/api/player?q=${s}`);if(m.ok){const g=await m.json();n(g)}}catch(m){console.error("Search error:",m)}finally{o(!1)}},300);localStorage.setItem("lastSearch",s);const p=setTimeout(()=>localStorage.removeItem("lastSearch"),6e4);return()=>{clearTimeout(h),clearTimeout(p)}},[s]),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs($.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-8",children:[e.jsx(bt,{className:"text-gray-500 dark:text-gray-400 ml-4"}),e.jsx("input",{type:"text",value:s,onChange:x=>t(x.target.value),placeholder:"Search...",className:"flex-grow py-2 px-4 bg-transparent focus:outline-none dark:text-white"}),s&&e.jsx("button",{onClick:()=>t(""),className:"p-2 focus:outline-none",children:e.jsx(da,{className:"text-gray-500 dark:text-gray-400"})})]}),e.jsx(gs,{children:r?e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-gray-500 dark:text-gray-400 my-8",children:"Loading..."}):s?e.jsxs(e.Fragment,{children:[((d=a.players)==null?void 0:d.length)>0&&e.jsx(Is,{title:"Players",items:a.players,icon:We,linkPrefix:"/player"}),((l=a.coaches)==null?void 0:l.length)>0&&e.jsx(Is,{title:"Coaches",items:a.coaches,icon:zr,linkPrefix:"/coach"}),((c=a.referees)==null?void 0:c.length)>0&&e.jsx(Is,{title:"Referees",items:a.referees,icon:yt,linkPrefix:"/referee"}),((u=a.teams)==null?void 0:u.length)>0&&e.jsx(Is,{title:"Teams",items:a.teams,icon:us,linkPrefix:"/league/team"}),Object.values(a).every(x=>x.length===0)&&e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-gray-500 dark:text-gray-400 my-8",children:"No results found."})]}):e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-gray-500 dark:text-gray-400 my-8",children:"Search for players, coaches, referees, and teams."})})]})},vd=()=>{var h,p,m,g,f,j,y,N,b,v,R,I,w,A,U,re,B;const s=te().id,[t,a]=i.useState({}),[n,r]=i.useState({}),[o,d]=i.useState([]),[l,c]=i.useState([]),[u,x]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const K=await(await fetch(`/api/referee/result-details/${s}`)).json(),le=W=>W.filter(ue=>ue.matchStats.some(G=>G.goals>0||G.yellowCards>0||G.redCards>0||G.ownGoals>0||G.cleanSheets>0));a(K==null?void 0:K.result),r(K==null?void 0:K.match),d(le(K==null?void 0:K.filteredHomeTeamPlayersStats)),c(le(K==null?void 0:K.filteredAwayTeamPlayersStats)),x(!1)}catch(je){console.error(je),x(!1)}})()},[s]),u?e.jsx(D,{}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx(fe,{}),e.jsx(Q,{className:"my-6"}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:e.jsxs("div",{className:"px-8 py-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 sm:space-x-8 mb-4 sm:mb-0",children:[((h=n==null?void 0:n.homeTeam)==null?void 0:h.logo)&&e.jsx("img",{src:(p=n==null?void 0:n.homeTeam)==null?void 0:p.logoUrl,alt:`Logo of ${(m=n==null?void 0:n.homeTeam)==null?void 0:m.name}`,className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300 shadow-sm"}),e.jsx("span",{className:"text-2xl font-semibold text-gray-800",children:(g=n==null?void 0:n.homeTeam)==null?void 0:g.name})]}),e.jsxs("div",{className:"text-5xl font-bold text-primary-600",children:[t==null?void 0:t.homeTeamScore," : ",t==null?void 0:t.awayTeamScore]}),e.jsxs("div",{className:"flex items-center space-x-4 sm:space-x-8",children:[e.jsx("span",{className:"text-2xl font-semibold text-gray-800",children:(f=n==null?void 0:n.awayTeam)==null?void 0:f.name}),((j=n==null?void 0:n.awayTeam)==null?void 0:j.logo)&&e.jsx("img",{src:(y=n==null?void 0:n.awayTeam)==null?void 0:y.logoUrl,alt:`Logo of ${(N=n==null?void 0:n.awayTeam)==null?void 0:N.name}`,className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300 shadow-sm"})]})]}),e.jsx("p",{className:"text-gray-600 text-center text-lg mb-10",children:new Date(n==null?void 0:n.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Match Officials"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Main Referee:"}),e.jsxs(F,{to:`/referee/${(b=n==null?void 0:n.mainReferee)==null?void 0:b._id}`,className:"text-primary-500 hover:underline",children:[(v=n==null?void 0:n.mainReferee)==null?void 0:v.name," ",(R=n==null?void 0:n.mainReferee)==null?void 0:R.surname]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"1st Assistant:"}),e.jsxs(F,{to:`/referee/${(I=n==null?void 0:n.firstAssistantReferee)==null?void 0:I._id}`,className:"text-primary-500 hover:underline",children:[(w=n==null?void 0:n.firstAssistantReferee)==null?void 0:w.name," ",(A=n==null?void 0:n.firstAssistantReferee)==null?void 0:A.surname]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"2nd Assistant:"}),e.jsxs(F,{to:`/referee/${(U=n==null?void 0:n.secondAssistantReferee)==null?void 0:U._id}`,className:"text-primary-500 hover:underline",children:[(re=n==null?void 0:n.secondAssistantReferee)==null?void 0:re.name," ",(B=n==null?void 0:n.secondAssistantReferee)==null?void 0:B.surname]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Home Team Players"}),e.jsx("ul",{className:"space-y-4",children:o==null?void 0:o.map(z=>{var je,K;return e.jsxs("li",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex space-x-2",children:z==null?void 0:z.matchStats.map((le,W)=>e.jsxs("div",{className:"flex items-center",children:[Array.from({length:le.goals}).map((ue,G)=>e.jsx("img",{src:"/football.png",alt:"Goal",className:"w-6 h-6"},G)),Array.from({length:le.yellowCards}).map((ue,G)=>e.jsx("img",{src:"/yellow-card.png",alt:"Yellow Card",className:"w-6 h-6"},G)),Array.from({length:le.redCards}).map((ue,G)=>e.jsx("img",{src:"/red-card.png",alt:"Red Card",className:"w-6 h-6"},G))]},W))}),e.jsxs("span",{className:"text-gray-800",children:[(je=z==null?void 0:z.player)==null?void 0:je.name," ",(K=z==null?void 0:z.player)==null?void 0:K.surname]})]},z._id)})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Away Team Players"}),e.jsx("ul",{className:"space-y-4",children:l==null?void 0:l.map(z=>{var je,K;return e.jsxs("li",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex space-x-2",children:z==null?void 0:z.matchStats.map((le,W)=>e.jsxs("div",{className:"flex items-center",children:[Array.from({length:le.goals}).map((ue,G)=>e.jsx("img",{src:"/football.png",alt:"Goal",className:"w-6 h-6"},G)),Array.from({length:le.yellowCards}).map((ue,G)=>e.jsx("img",{src:"/yellow-card.png",alt:"Yellow Card",className:"w-6 h-6"},G)),Array.from({length:le.redCards}).map((ue,G)=>e.jsx("img",{src:"/red-card.png",alt:"Red Card",className:"w-6 h-6"},G))]},W))}),e.jsxs("span",{className:"text-gray-800",children:[(je=z==null?void 0:z.player)==null?void 0:je.name," ",(K=z==null?void 0:z.player)==null?void 0:K.surname]})]},z._id)})})]})]})]})})]})},Sd=()=>{const s=te().id,{post:t,loading:a}=Rt(s),n=i.useRef(null),[r,o]=i.useState(),[d,l]=i.useState(""),c=ge(),{toast:u}=Y(),x=!!t.parentId,h=ie({resolver:oe(zn(!0)),defaultValues:{title:"",postContent:"",postPhoto:""},mode:"onChange"});i.useEffect(()=>{t&&Object.keys(t).length>0&&h.reset({title:t.title||"",postContent:t.postContent||"",postPhoto:t.photo||""})},[t]),i.useEffect(()=>()=>{d&&URL.revokeObjectURL(d)},[d]);const p=async g=>{const f=new FormData;f.append("title",g==null?void 0:g.title),f.append("postContent",g==null?void 0:g.postContent),f.append("postPhoto",r||(t==null?void 0:t.postPhoto));try{(await fetch(`/api/post/edit/${s}`,{method:"POST",body:f})).ok?(u({title:"Success!",description:"Post updated successfully"}),h.reset(),c("/")):u({title:"Error!",description:"Failed to update post",variant:"destructive"})}catch(j){console.log("Error updating post: ",j)}},m=g=>{const f=g.target.files[0];if(o(f),f){const j=URL.createObjectURL(f);l(j)}};return a?e.jsx(D,{}):e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:e.jsx(xe,{...h,children:e.jsx("form",{onSubmit:h.handleSubmit(p),encType:"multipart/form-data",children:e.jsxs(E,{className:"bg-white shadow-xl rounded-lg overflow-hidden transition-shadow duration-300 hover:shadow-2xl",children:[e.jsx(L,{className:"p-6 space-y-6",children:e.jsxs(L,{className:"p-6 space-y-6",children:[!x&&e.jsx(T,{id:"title",type:"text",label:"Title",form:h,name:"title",placeholder:"Enter post title",className:"mb-4 text-lg font-semibold"}),e.jsx(T,{id:"postContent",type:"textarea",label:"Content",form:h,name:"postContent",placeholder:"Write your post content here...",className:`w-full ${x?"h-40":"h-60"} text-base`}),!x&&t.imageUrl&&e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(T,{id:"photo",type:"file",label:"Photo",form:h,name:"postPhoto",fileRef:n,setFile:o,onChange:m}),e.jsx("img",{src:d||t.imageUrl,alt:"Post",className:"w-20 h-20 object-cover rounded-lg"})]})})]})}),e.jsx(tt,{className:"bg-gray-50 px-6 py-4",children:e.jsxs("div",{className:"flex justify-end gap-4 w-full",children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>c(-1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),e.jsx(k,{type:"submit",className:"px-4 py-2 text-white bg-primary-500 rounded-md shadow-sm hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"})]})})]})})})})},Cd=()=>{const s=te().id,{post:t,loading:a}=Rt(s),n=ge(),{toast:r}=Y(),o=ie({resolver:oe(qn),defaultValues:{post:""},mode:"onChange"});i.useEffect(()=>{o.reset({post:t==null?void 0:t.postContent})},[t,o]);const d=async l=>{try{(await fetch(`/api/post/comment/edit/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(r({title:"Success!",description:"Comment updated successfully"}),n(-1)):r({title:"Error!",description:"Failed to update comment",variant:"destructive"})}catch(c){console.log(c)}};return a?e.jsx(D,{}):e.jsx(xe,{...o,children:e.jsx("form",{onSubmit:o.handleSubmit(d),children:e.jsxs(E,{className:"flex flex-col justify-between h-full",children:[e.jsx("div",{className:" p-4 ",children:e.jsx(T,{id:"post",type:"textarea",label:"Comment",form:o,name:"post",placeholder:"Comment...",className:"w-full h-20"})}),e.jsxs("div",{className:"flex justify-end items-center p-4 gap-4",children:[e.jsx(k,{type:"submit",className:"bg-primary-500 text-white w-full md:w-auto hover:bg-purple-500",children:"Save"}),e.jsx(k,{type:"button",className:"bg-red-600 text-white w-full md:w-auto hover:bg-red-500",onClick:()=>n(-1),children:"Cancel"})]})]})})})},Td=()=>{const s=i.useRef(null),[t,a]=i.useState(null),[n,r]=i.useState(""),[o,d]=i.useState(!1),{currentUser:l}=q(m=>m.user),{toast:c}=Y(),u=ge(),x=ie({resolver:oe(zn(!1)),defaultValues:{title:"",postContent:"",postPhoto:""},mode:"onChange"}),h=async m=>{const g=new FormData;g.append("title",m.title),g.append("postContent",m.postContent),g.append("postPhoto",t),g.append("author",l._id),d(!0);try{(await fetch("/api/post/add",{method:"POST",body:g})).ok?(c({title:"Success!",description:"Post created successfully"}),x.reset(),u("/")):c({title:"Error!",description:"Failed to create post",variant:"destructive"})}catch(f){console.error("Error creating post:",f)}finally{d(!1)}};i.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]);const p=m=>{const g=m.target.files[0];if(a(g),g){const f=URL.createObjectURL(g);r(f)}};return e.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4",children:e.jsx(xe,{...x,children:e.jsx("form",{onSubmit:x.handleSubmit(h),children:e.jsxs(E,{className:"bg-white shadow-lg rounded-xl overflow-hidden",children:[e.jsx(H,{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-6",children:e.jsxs("div",{className:"flex items-center text-white",children:[e.jsx(wt,{className:"text-2xl mr-3"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Post"})]})}),e.jsxs(L,{className:"p-6 space-y-6",children:[e.jsx(T,{id:"title",label:"Title",type:"text",form:x,name:"title",className:"w-full",placeholder:"Enter post title"}),e.jsx(T,{id:"content",label:"Content",type:"textarea",form:x,name:"postContent",className:"w-full",placeholder:"Write your post content here...",rows:6}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(T,{id:"postPhoto",label:"Photo",type:"file",form:x,name:"postPhoto",fileRef:s,onChange:p,setFile:a,className:"w-full"}),n&&e.jsx("img",{src:n,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-primary-600 text-white py-3 px-6 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105",disabled:o,children:o?"Publishing...":"Publish Post"})})]})]})})})})},kd=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{if(!s)return;const l=await(await fetch(`/api/referee/${s}`)).json();a(l),r(!1)}catch(d){console.log(d),r(!1)}finally{r(!1)}})()},[s]),{referee:t,loading:n}},Pd=s=>{const[t,a]=i.useState([]),[n,r]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const l=await(await fetch(`/api/referee/referee-stats/${s}`)).json();a(l),r(!1)}catch(d){console.error(d),r(!1)}finally{r(!1)}})()},[s]),{refereeStats:t,loading:n}},Fd=()=>{var o,d,l;const s=te().id,{referee:t,loading:a}=kd(s),{refereeStats:n,loading:r}=Pd(s);return a||r?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(fe,{}),e.jsx(Q,{className:"my-6"}),e.jsxs(E,{className:"bg-white shadow-xl rounded-lg overflow-hidden",children:[e.jsx(H,{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-white shadow-lg mb-4 md:mb-0 md:mr-6",children:e.jsx("img",{src:(t==null?void 0:t.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:`Photo of ${t==null?void 0:t.name}`,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:[t==null?void 0:t.name," ",t==null?void 0:t.surname]}),e.jsx("p",{className:"text-lg text-blue-100",children:t==null?void 0:t.bio})]})]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Personal Information"}),e.jsx(es,{icon:Nt,label:"Birth Date",value:(d=(o=t.birthDate)==null?void 0:o.toString())==null?void 0:d.slice(0,10)}),e.jsx(es,{icon:Gs,label:"Nationality",value:(l=t==null?void 0:t.nationality)==null?void 0:l.name}),e.jsx(es,{icon:ga,label:"City",value:t==null?void 0:t.city})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Referee Statistics"}),e.jsx(es,{icon:zt,label:"Yellow Cards",value:(n==null?void 0:n.yellowCards)||0,iconColor:"text-yellow-500"}),e.jsx(es,{icon:zt,label:"Red Cards",value:(n==null?void 0:n.redCards)||0,iconColor:"text-red-500"}),e.jsx(es,{icon:qr,label:"Matches",value:(n==null?void 0:n.matches)||0}),e.jsx(Ed,{lastMatchId:n==null?void 0:n.lastMatchId,lastMatchName:n==null?void 0:n.lastMatchName})]})]})})]})]})},es=({icon:s,label:t,value:a,iconColor:n="text-gray-500"})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s,{className:`w-6 h-6 ${n}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:a})]})]}),Ed=({lastMatchId:s,lastMatchName:t})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ts,{className:"w-6 h-6 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Match as Referee"}),s?e.jsx(F,{to:`/results/${s}`,className:"text-lg font-medium text-blue-600 hover:text-blue-800",children:t}):e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"N/A"})]})]}),Rd=ee({mainReferee:P().min(1,{message:"Main Referee is required"}),firstAssistantReferee:P().min(1,{message:"First Assistant is required"}),secondAssistantReferee:P().min(1,{message:"Second Assistant is required"})}).refine(s=>s.mainReferee!==s.firstAssistantReferee,{message:"Main Referee and First Assistant Referee cannot be the same person",path:["firstAssistantReferee"]}).refine(s=>s.mainReferee!==s.secondAssistantReferee,{message:"Main Referee and Second Assistant Referee cannot be the same person",path:["secondAssistantReferee"]}).refine(s=>s.firstAssistantReferee!==s.secondAssistantReferee,{message:"First Assistant Referee and Second Assistant Referee cannot be the same person",path:["secondAssistantReferee"]}),Dd=({match:s,referees:t,isSet:a})=>{var c,u,x;const{toast:n}=Y(),[r,o]=i.useState(!1),d=ie({resolver:oe(Rd),defaultValues:{mainReferee:"",firstAssistantReferee:"",secondAssistantReferee:""},mode:"onChange"});i.useEffect(()=>{var h;s!=null&&s.mainReferee&&(d.setValue("mainReferee",s==null?void 0:s.mainReferee.id),d.setValue("firstAssistantReferee",(h=s==null?void 0:s.firstAssistantReferee)==null?void 0:h.id),d.setValue("secondAssistantReferee",s==null?void 0:s.secondAssistantReferee.id))},[s,d]);const l=async h=>{try{(await fetch(`/api/referee/assign-referees/${s==null?void 0:s.matchId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?(n({title:"Success!",description:"Referees assigned successfully"}),o(!1),a(!0)):n({title:"Error!",description:"Failed to assign referees",variant:"destructive"})}catch(p){console.log(p)}};return e.jsxs(De,{open:r,onOpenChange:o,children:[e.jsx(as,{asChild:!0,children:e.jsx(k,{variant:"secondary",className:"w-32",children:"Assign Referee"})}),e.jsxs(Ae,{className:"sm:max-w-[800px] md:max-w-[900px] lg:max-w-[1000px] h-auto",children:[e.jsxs($e,{children:[e.jsx(_e,{children:"Assign Referee"}),e.jsx(Ge,{children:"Assign referees to matches here."})]}),e.jsx(xe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(l),className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(T,{id:"mainReferee",label:"Main Referee",type:"select",form:d,name:"mainReferee",items:t,placeholder:((c=s==null?void 0:s.mainReferee)==null?void 0:c.name)||"Select Main Referee",idFlag:!0})}),e.jsx("div",{children:e.jsx(T,{id:"firstAssistantReferee",label:"First Assistant",type:"select",form:d,name:"firstAssistantReferee",placeholder:((u=s==null?void 0:s.firstAssistantReferee)==null?void 0:u.name)||"Select First Assistant",items:t,idFlag:!0})}),e.jsx("div",{children:e.jsx(T,{id:"secondAssistantReferee",label:"Second Assistant",type:"select",form:d,name:"secondAssistantReferee",placeholder:((x=s==null?void 0:s.secondAssistantReferee)==null?void 0:x.name)||"Select Second Assistant",items:t,idFlag:!0})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(Oe,{children:e.jsx(k,{type:"submit",className:"bg-primary-500 text-white hover:bg-purple-500 hover:text-white",children:"Save"})})})]})})]})]})},Id=()=>{const[s,t]=i.useState([{id:"",name:""}]);return i.useEffect(()=>{(async()=>{try{const n=await fetch("/api/admin/referee");if(!n.ok)throw new Error("Failed to fetch referees data!");const r=await n.json();t(r.map(o=>({id:o._id,name:`${o.name} ${o.surname}`})))}catch(n){console.log(n)}})()},[]),s},Ad=()=>{const s=te().id,{toast:t}=Y(),[a,n]=i.useState([]),[r,o]=i.useState(!1),{season:d,league:l,loading:c}=Ps(s),u=Id(),x=async()=>{try{const p=await(await fetch(`/api/referee/get-rounds/${s}?seasonId=${d==null?void 0:d._id}`)).json();p.length===0?t({variant:"destructive",title:"Error!",description:"No schedule found. Generate schedule first."}):p&&(n(p),t({title:"Schedule Downloaded!",description:"Schedule has been downloaded successfully."}))}catch(h){console.error(h)}};return i.useEffect(()=>{r&&(x(),o(!1))},[r]),c?e.jsx(D,{}):e.jsxs("div",{className:" text-gray-800 dark:text-white py-8 px-4 md:px-6 lg:px-8",children:[e.jsx(X,{title:"Assign Referee",description:"Assign referees to matches here",sideText:`${l} / ${d==null?void 0:d.name}`}),e.jsx("div",{className:"flex justify-between mb-6",children:e.jsx(k,{type:"button",onClick:x,className:"bg-primary-500 text-white hover:bg-purple-600 px-4 py-2 rounded-md",children:"Download Schedule"})}),(a==null?void 0:a.length)>0&&e.jsx(Dt,{children:e.jsxs("div",{className:"w-full flex flex-col items-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"Schedule:"}),e.jsxs("div",{className:"w-full max-w-4xl grid gap-8",children:[e.jsx(It,{children:a==null?void 0:a.map(h=>{var p;return e.jsx(At,{children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-300 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-500 text-white px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:h==null?void 0:h.name}),e.jsxs("h3",{className:"text-xl font-semibold",children:[l," / ",d==null?void 0:d.name]})]}),e.jsx("div",{className:"p-6",children:(p=h==null?void 0:h.matches)==null?void 0:p.map(m=>{var g,f;return e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200 dark:border-gray-700 last:mb-0 last:pb-0 last:border-none",children:[e.jsxs("div",{className:"flex-1 mr-4",children:[e.jsxs("div",{className:"text-gray-800 dark:text-white font-semibold",children:[(g=m.homeTeam)==null?void 0:g.name," vs ",(f=m.awayTeam)==null?void 0:f.name]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 max-sm:hidden",children:new Date(m==null?void 0:m.startDate).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx(Dd,{match:m,referees:u,isSet:o})})]},m==null?void 0:m.matchId)})})]})},h._id)})}),e.jsx($t,{className:"absolute left-0 transform -translate-y-1/2 top-1/2 bg-primary-500 text-white hover:bg-purple-500 px-4 py-2 rounded-l-md max-sm:hidden"}),e.jsx(_t,{className:"absolute right-0 transform -translate-y-1/2 top-1/2 bg-primary-500 text-white hover:bg-purple-500 px-4 py-2 rounded-r-md max-sm:hidden"})]})]})})]})},$d=()=>e.jsx("div",{className:"w-full flex flex-col justify-center items-center p-4",children:e.jsx("div",{className:" w-full bg-white shadow-xl rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-5xl font-extrabold text-gray-800 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-700 mb-8",children:"The page you're looking for doesn't exist or has been moved. Please check the URL and try again."})]})})}),_d=s=>ee({name:P().trim().min(1,{message:"Name must be at least 4 characters"}).max(30,{message:"Name must not be longer than 30 characters"}),logo:s?Le().nullable():js(File,{message:"Logo is required"}),website:P().trim().min(1,{message:"Website is required"}),description:P().optional(),notes:P().optional()}),Md=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Sponsor",selector:a=>a.name,sortable:!0},{name:"Website",selector:a=>a.website,sortable:!0}],t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"logo",label:"Logo",type:"file",name:"logo"},{id:"website",label:"Website",type:"text",name:"website"},{id:"description",label:"Description",type:"textarea",name:"description"},{id:"notes",label:"Notes",type:"textarea",name:"notes"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Sponsors",description:"Manage sponsors"}),e.jsx(ne,{apiPath:"sponsor",columns:s,fields:t,title:"Sponsor",onEditComponent:be,onDeleteComponent:ce,formSchema:_d,defaultValues:{name:"",logo:"",website:"",description:"",notes:""},isExpandable:!1,isAction:!0})]})},Ld=()=>{const s=te().id,{currentUser:t}=q(m=>m.user),[a,n]=i.useState([]),[r,o]=i.useState(!0),{season:d,league:l}=Ps(s);i.useEffect(()=>{(async()=>{try{const f=await(await fetch(`/api/referee/referee-matches/${s}?userId=${t==null?void 0:t._id}`)).json();n(f),o(!1)}catch(g){console.error(g),o(!1)}})()},[s,t==null?void 0:t._id]);const c=async(m,g)=>{try{const f=await fetch(`/api/referee/download-match-details-pdf/${m}`);if(!f.ok)throw new Error(`Failed to download PDF. Status: ${f.status}`);const j=await f.blob(),y=x(g),N=window.URL.createObjectURL(j),b=document.createElement("a");b.href=N,b.setAttribute("download",`${y}.pdf`),document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(N)}catch(f){console.error("Error downloading PDF:",f)}},u={:"a",:"c",:"e",:"l",:"n",:"o",:"s",:"z",:"z"},x=m=>m.replace(/[]/g,g=>u[g]||g),h=async(m,g)=>{const j=await(await fetch(`/api/referee/download-match-details-xlsx/${m}`)).blob(),y=window.URL.createObjectURL(new Blob([j])),N=document.createElement("a");N.href=y,N.setAttribute("download",`${g}.xlsx`),document.body.appendChild(N),N.click(),N.parentNode.removeChild(N)},p=async(m,g)=>{const j=await(await fetch(`/api/referee/download-match-details-docx/${m}`)).blob(),y=window.URL.createObjectURL(new Blob([j])),N=document.createElement("a");N.href=y,N.setAttribute("download",`${g}.docx`),document.body.appendChild(N),N.click(),N.parentNode.removeChild(N)};return r?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto py-8 px-4 md:px-6 lg:px-8",children:[e.jsx(X,{title:"Match Details",description:"Download match details here before the match starts",sideText:`${l} / ${d==null?void 0:d.name}`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a==null?void 0:a.map(m=>{var g,f;return e.jsx(E,{className:"bg-white rounded-lg shadow-md",children:e.jsxs(L,{className:"flex flex-col p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold",children:[(g=m.homeTeam)==null?void 0:g.name," vs ",(f=m.awayTeam)==null?void 0:f.name]}),e.jsx("p",{className:"text-gray-600",children:new Date(m.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})})]}),e.jsxs(Pn,{children:[e.jsx(Fn,{className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Download"}),e.jsxs(Tt,{className:"bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[e.jsx(kt,{className:"px-4 py-2 text-sm font-medium text-gray-700",children:"Match Details"}),e.jsx(zs,{}),e.jsxs(En,{className:"p-1 ",children:[e.jsx(Je,{onClick:()=>{var j,y;return p(m==null?void 0:m._id,((j=m.homeTeam)==null?void 0:j.name)+" vs "+((y=m.awayTeam)==null?void 0:y.name)+" Match Details")},children:"Download in Word"}),e.jsx(Je,{onClick:()=>{var j,y;return c(m==null?void 0:m._id,((j=m.homeTeam)==null?void 0:j.name)+" vs "+((y=m.awayTeam)==null?void 0:y.name)+" Match Details")},children:"Download in PDF"}),e.jsx(Je,{onClick:()=>{var j,y;return h(m==null?void 0:m._id,((j=m.homeTeam)==null?void 0:j.name)+" vs "+((y=m.awayTeam)==null?void 0:y.name)+" Match Details")},children:"Download in Excel"})]})]})]})]})},m==null?void 0:m._id)})})]})},Od=()=>{const{currentUser:s}=q(c=>c.user),[t,a]=i.useState(!1),n=ge(),{toast:r}=Y(),o=Ue(),d=ie({resolver:oe(ml()),defaultValues:{wantedRole:"",username:"",bio:""},mode:"onChange"});i.useEffect(()=>{s&&d.reset({username:(s==null?void 0:s.username)||"",bio:s==null?void 0:s.bio})},[s]);const l=async c=>{try{a(!0);const u=s==null?void 0:s._id;if((await fetch("/api/auth/complete-onboarding",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,userId:u})})).ok)o(Zo(!0)),await o(cs(u)),r({title:"Onboarding completed",description:"Your profile has been successfully updated!"}),setTimeout(()=>n("/"),1500);else throw new Error("Failed to complete onboarding")}catch(u){r({title:"Error!",description:u.message||"Failed to complete onboarding. Please try again.",variant:"destructive"}),a(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-xl w-full bg-white rounded-xl shadow-lg p-8 transform transition duration-500 hover:shadow-2xl",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center text-gray-800 mb-6",children:"Update Your Profile"}),e.jsx("p",{className:"text-center text-gray-500 mb-8",children:"Fill in the details below to update your profile and choose your role."}),e.jsx(xe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(l),children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{children:e.jsx(T,{id:"username",label:"Username",type:"text",form:d,name:"username",placeholder:"Enter your username"})}),e.jsx("div",{children:e.jsx(T,{id:"bio",label:"Bio",type:"text",form:d,name:"bio",placeholder:"Tell us about yourself"})}),e.jsx("div",{children:e.jsx(T,{id:"wantedRole",label:"Role",type:"select",form:d,items:[{id:1,name:"Player"},{id:2,name:"Coach"},{id:3,name:"Referee"}],name:"wantedRole",placeholder:"Select your role"})})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx(k,{type:"submit",className:`px-6 py-3 text-white bg-primary-500 rounded-md hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-300 ${t?"opacity-70 cursor-not-allowed":""}`,disabled:t,children:"Update Profile"})})]})})]})})},Bd=()=>{const s=Ue(),{currentUser:t,loading:a}=q(r=>r.user),n=!!t;return i.useEffect(()=>{n&&s(cs(t._id))},[s,n,t]),a?e.jsx(D,{}):n&&!t.isOnboardingCompleted?e.jsx(Ve,{to:"/onboarding"}):e.jsx(Me,{})},Vd=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Surname",selector:s=>s.surname,sortable:!0},{name:"Nationality",selector:s=>s.nationality.name,sortable:!0}],zd=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Referees",description:"Manage referees"}),e.jsx(ne,{apiPath:"referee",columns:Vd,title:"Referee",onDeleteComponent:ce,formSchema:vs,isExpandable:!1,isAction:!0})]}),qd=()=>ee({name:P().min(1,{message:"Name is required"}),startDate:he.date({message:"Start date is required"}),endDate:he.date({message:"End date is required"})}).refine(s=>{var t,a;return((t=s==null?void 0:s.endDate)==null?void 0:t.getTime())>((a=s==null?void 0:s.startDate)==null?void 0:a.getTime())},{message:"End date must be after start date",path:["endDate"]}),Gd=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s==null?void 0:s.name,sortable:!0},{name:"Start Date",selector:s=>{var t;return(t=s.startDate)==null?void 0:t.slice(0,10)},sortable:!0},{name:"End Date",selector:s=>{var t;return(t=s.endDate)==null?void 0:t.slice(0,10)},sortable:!0}],Hd=()=>{const s=[{id:"name",label:"Name",type:"text",name:"name"},{id:"startDate",label:"Start Date",type:"date",name:"startDate",placeholder:"Select Start Date",isPortal:!1},{id:"endDate",label:"End Date",type:"date",name:"endDate",placeholder:"Select End Date",isPortal:!1}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Seasons",description:"Manage seasons"}),e.jsx(ne,{apiPath:"season",columns:Gd,fields:s,title:"Season",onEditComponent:be,onDeleteComponent:ce,formSchema:qd,defaultValues:{name:"",startDate:"",endDate:""},isAction:!0,isExpandable:!1})]})},Ud=()=>{const{id:s}=te(),t=ge(),{players:a,loading:n}=Wn(s),r={Goalkeepers:["Goalkeeper"],Defenders:["Center back","Left outside back","Right outside back"],Midfielders:["Defensive midfielder","Center midfielder","Left midfielder","Right midfielder"],Forwards:["Striker","Left winger","Right winger"]},o=d=>{const l=a==null?void 0:a.filter(c=>r[d].includes(c.position));return e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-700",children:d}),e.jsxs(Ss,{children:[e.jsx(Cs,{children:e.jsxs(Ie,{children:[e.jsx(pe,{className:"w-1/5",children:"Image"}),e.jsx(pe,{className:"w-1/5",children:"Name"}),e.jsx(pe,{className:"w-1/5",children:"Surname"}),e.jsx(pe,{className:"w-1/5",children:"Age"}),e.jsx(pe,{className:"w-1/5",children:"Position"})]})}),e.jsx(Ts,{children:l.map(c=>e.jsxs(Ie,{className:"cursor-pointer hover:bg-purple-50 transition-colors duration-200",onClick:()=>t(`/player/${c._id}`),children:[e.jsx(de,{children:e.jsx("img",{src:(c==null?void 0:c.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:`${c.name} ${c.surname}`,className:"w-12 h-12 rounded-full object-cover"})}),e.jsx(de,{children:c.name}),e.jsx(de,{children:c.surname}),e.jsx(de,{children:c.age}),e.jsx(de,{children:c.position})]},c._id))})]})]},d)};return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(D,{})}):e.jsx("div",{className:"p-4",children:a!=null&&a.length?Object.keys(r).map(d=>o(d)):e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center text-gray-600 text-xl",children:"No players found"})})},Jd=()=>{const[s,t]=i.useState([]),[a,n]=i.useState([]),[r,o]=i.useState(!0),d=ns(),[l,c]=i.useState(""),u=te().id;return i.useEffect(()=>{if(d.length>0){const h=d[d.length-1].id;c(h)}},[d]),i.useEffect(()=>{(async()=>{try{const m=await(await fetch(`/api/team/matches/${u}?season=${l}`)).json();t(m),n(m.matches),o(!1)}catch(p){console.log(p),o(!1)}finally{o(!1)}})()},[u,l]),(()=>{s.matches&&s.teamOpponents&&s.matches.forEach((h,p)=>{h.opponent=s.teamOpponents[p]})})(),r?e.jsx(D,{}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("div",{className:"flex justify-end items-center mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Pe,{value:l,onValueChange:h=>{c(h),o(!0)},children:[e.jsx(Se,{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 hover:border-gray-500 bg-white shadow-sm",children:e.jsx(Fe,{placeholder:"Select Season"})}),e.jsx(Ce,{children:d==null?void 0:d.map((h,p)=>e.jsx(se,{value:h==null?void 0:h.id,children:h==null?void 0:h.name},p))})]}),e.jsx(xs,{className:"text-gray-500"})]})}),a.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(h=>e.jsx(F,{to:`/match/${h._id}`,className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform transform hover:scale-105",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:h.round.name}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Date:"," ",new Date(h.startDate).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Opponent: ",h.opponent.name]})]})},h._id))}):e.jsx("p",{className:"text-2xl text-gray-500 mx-auto text-center",children:"No matches found"})]})},Wd=()=>{const s=te().id,[t,a]=i.useState([]),[n,r]=i.useState([]),[o,d]=i.useState(!0),l=ns(),[c,u]=i.useState("");return i.useEffect(()=>{if(l.length>0){const x=l[l.length-1].id;u(x)}},[l]),i.useEffect(()=>{(async()=>{try{const h=await fetch(`/api/team/results/${s}?season=${c}`);if(!h.ok)throw new Error("Failed to fetch results data!");const p=await h.json();a(p.results),r(p.matches),d(!1)}catch(h){console.log(h),d(!1)}finally{d(!1)}})()},[s,c]),o?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end items-center mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Pe,{value:c,onValueChange:x=>{u(x),d(!0)},children:[e.jsx(Se,{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 hover:border-gray-500 bg-white shadow-sm",children:e.jsx(Fe,{placeholder:"Select Season"})}),e.jsx(Ce,{children:l==null?void 0:l.map((x,h)=>e.jsx(se,{value:x==null?void 0:x.id,children:x==null?void 0:x.name},h))})]}),e.jsx(xs,{className:"text-gray-500"})]})}),(n==null?void 0:n.length)>0?e.jsx(E,{className:"mb-5 mt-5",children:e.jsx(L,{className:"p-6",children:n==null?void 0:n.map(x=>e.jsx("div",{className:"border cursor-pointer p-4 rounded-md hover:shadow-md transition-all mb-4 hover:bg-gray-200 ",children:t.filter(h=>h.match===x._id).map(h=>{var p,m;return e.jsx(F,{to:`/results/${h==null?void 0:h._id}`,children:e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md transition-all",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("p",{className:"text-sm text-gray-800 font-semibold",children:[(p=x==null?void 0:x.homeTeam)==null?void 0:p.name," ",h==null?void 0:h.homeTeamScore," :"," ",h==null?void 0:h.awayTeamScore," ",(m=x==null?void 0:x.awayTeam)==null?void 0:m.name]},h==null?void 0:h._id)}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:new Date(x==null?void 0:x.startDate).toLocaleDateString("en-GB",{day:"numeric",month:"long"})}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(x==null?void 0:x.startDate).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})]})]})},h==null?void 0:h._id)})},x==null?void 0:x._id))})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-600",children:"No results found."})})]})},mt=async(s,t,a)=>{try{const n=await fetch(s),r=await n.json();if(!n.ok)throw new Error(r.message);t(r)}catch(n){console.error(n)}finally{a(!1)}},Yd=()=>{var c,u;const{id:s}=te(),[t,a]=i.useState({redCards:[],yellowCards:[],goalsScored:[],goalsLost:[],wins:null,draws:null,losses:null}),n=ns(),[r,o]=i.useState(""),[d,l]=i.useState(!0);return i.useEffect(()=>{if(n.length>0){const x=n[n.length-1].id;o(x)}},[n]),i.useEffect(()=>{r&&(l(!0),mt(`/api/team/team-cards/${s}?season=${r}`,x=>{a(h=>({...h,redCards:x.redCards,yellowCards:x.yellowCards}))},l),mt(`/api/team/team-goals/${s}?season=${r}`,x=>{a(h=>({...h,goalsScored:x.goalsScored,goalsLost:x.goalsLost}))},l),mt(`/api/team/team-outcomes/${s}?season=${r}`,x=>{a(h=>({...h,wins:x.wins,draws:x.draws,losses:x.losses}))},l))},[s,r]),d?e.jsx(D,{}):e.jsxs("div",{className:"max-w-6xl mx-auto py-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Team Statistics"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Statistics Overview"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Pe,{value:r,onValueChange:x=>{o(x),l(!0)},children:[e.jsx(Se,{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 hover:border-gray-500",children:e.jsx(Fe,{placeholder:"Select Season"})}),e.jsx(Ce,{children:n==null?void 0:n.map((x,h)=>e.jsx(se,{value:x==null?void 0:x.id,children:x==null?void 0:x.name},h))})]}),e.jsx(xs,{className:"text-gray-500"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("h4",{className:"text-xl font-semibold text-gray-700",children:[(c=t.yellowCards[0])==null?void 0:c.league," - ",(u=t.yellowCards[0])==null?void 0:u.season]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 my-8",children:[e.jsx(xt,{title:"Wins",value:t.wins||0,icon:e.jsx(Na,{className:"text-green-500"}),color:"green-500"}),e.jsx(xt,{title:"Draws",value:t.draws||0,icon:e.jsx(Gr,{className:"text-blue-500"}),color:"blue-500"}),e.jsx(xt,{title:"Losses",value:t.losses||0,icon:e.jsx(Hr,{className:"text-gray-500"}),color:"gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-8",children:[e.jsx(As,{title:"Goals Scored",items:t.goalsScored,icon:e.jsx(qt,{className:"w-5 h-5 text-black"})}),e.jsx(As,{title:"Goals Lost",items:t.goalsLost,icon:e.jsx(qt,{className:"w-5 h-5 text-red-500"})}),e.jsx(As,{title:"Yellow Cards",items:t.yellowCards,icon:e.jsx(Gt,{className:"w-5 h-5 text-yellow-500"})}),e.jsx(As,{title:"Red Cards",items:t.redCards,icon:e.jsx(Gt,{className:"w-5 h-5 text-red-500"})})]})]})]})},xt=({title:s,value:t,icon:a,color:n})=>e.jsxs("div",{className:`bg-gray-100 p-6 rounded-lg shadow-md text-${n}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[a,e.jsx("h4",{className:"text-xl font-semibold text-gray-800 ml-2",children:s})]}),e.jsx("p",{className:`text-4xl font-bold text-${n}`,children:t})]}),As=({title:s,items:t,icon:a})=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("h4",{className:"text-xl font-semibold text-gray-800 ml-2",children:s})}),t==null?void 0:t.map((n,r)=>e.jsx("div",{className:"mb-4 ml-8",children:e.jsxs("p",{className:"text-body-medium flex items-center gap-2 text-gray-700",children:[a," ",n==null?void 0:n.count]})},r))]}),Qd=[{value:"results",label:"Results",icon:e.jsx(Ur,{})},{value:"matches",label:"Matches",icon:e.jsx(Jr,{})},{value:"squad",label:"Squad",icon:e.jsx(Wr,{})},{value:"teamStats",label:"Team Stats",icon:e.jsx(Yr,{})}],Zd=()=>{var m,g,f;const{currentUser:s}=q(j=>j.user),{id:t}=te(),[a,n]=i.useState(!1),{team:r,loading:o}=Jn(t,a),[d,l]=i.useState(!1),{toast:c}=Y(),[u,x]=i.useState("results");i.useEffect(()=>{s&&t&&(async()=>{try{const N=await(await fetch(`/api/team/is-fan/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s==null?void 0:s._id})})).json();l(N.isFan)}catch(y){console.error("Error checking fan status:",y)}})()},[s,t,a]);const h=async j=>{try{(await fetch(`/api/team/${j}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s==null?void 0:s._id})})).ok?(c({title:"Success!",description:`You are now ${j==="follow"?"following":"no longer following"} this team`}),n(!a)):c({title:"Error!",description:`Failed to ${j} team`,variant:"destructive"})}catch(y){console.error(`Error ${j}ing team:`,y)}},p=async()=>{try{const j=await fetch(`/api/team/download-pdf/${t}`);if(!j.ok)throw new Error(`Failed to download PDF. Status: ${j.status}`);const y=await j.blob(),N=r==null?void 0:r.name.replace(/[]/g,R=>({:"a",:"c",:"e",:"l",:"n",:"o",:"s",:"z",:"z"})[R]||R),b=window.URL.createObjectURL(y),v=document.createElement("a");v.href=b,v.setAttribute("download",`${N}.pdf`),document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b)}catch(j){console.error("Error downloading PDF:",j),c({title:"Error",description:"Failed to download PDF",variant:"destructive"})}};return o?e.jsx(D,{}):e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"min-h-screen",children:e.jsxs("div",{className:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx($.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:e.jsx(fe,{})}),e.jsx(Q,{className:"my-6"}),e.jsxs($.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-8 sm:p-10",children:[e.jsxs($.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.4,duration:.5},className:"flex flex-col md:flex-row items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start mb-6 md:mb-0",children:[e.jsx("h1",{className:"text-heading2-semibold font-bold text-gray-900 mb-2",children:r==null?void 0:r.name}),e.jsxs("p",{className:"text-lg text-gray-600",children:[(m=r==null?void 0:r.fans)==null?void 0:m.length," fans"]}),s&&e.jsxs($.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},className:"flex mt-4 space-x-4",children:[e.jsx(k,{onClick:()=>h("follow"),disabled:d,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Follow"}),e.jsx(k,{onClick:()=>h("unfollow"),disabled:!d,className:"bg-red-600 hover:bg-red-700 text-white",children:"Unfollow"})]})]}),(r==null?void 0:r.logoUrl)&&e.jsx($.img,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.6,duration:.5,type:"spring",stiffness:200},src:r.logoUrl||"https://d3awt09vrts30h.cloudfront.net/team_img_default.png",alt:`Logo of ${r==null?void 0:r.name}`,className:"w-40 h-40 rounded-full object-contain shadow-lg"})]}),e.jsx($.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.5},className:"text-gray-600 mb-8",children:r.bio}),e.jsxs($.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.5},className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(ta,{founded:r.yearFounded,stadium:r.stadium,country:(g=r.country)==null?void 0:g.name}),e.jsx(ta,{league:(f=r.league)==null?void 0:f.name,coach:r.coach,onDownload:p})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-8 sm:p-10",children:e.jsxs(rs,{defaultValue:"results",onValueChange:x,children:[e.jsx(Ke,{className:"flex justify-center space-x-4 mb-8",children:Qd.map(j=>e.jsxs(ye,{value:j.value,className:"flex items-center justify-center space-x-2 text-purple-600 font-semibold cursor-pointer transition-all duration-200 ease-in-out hover:bg-purple-600 hover:text-white px-4 py-2 rounded-md",children:[e.jsx($.div,{children:i.cloneElement(j.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"hidden sm:inline",children:j.label})]},j.label))}),e.jsx(gs,{mode:"wait",children:e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[e.jsx(me,{value:"results",children:e.jsx(Wd,{})}),e.jsx(me,{value:"matches",children:e.jsx(Jd,{})}),e.jsx(me,{value:"squad",children:e.jsx(Ud,{})}),e.jsx(me,{value:"teamStats",children:e.jsx(Yd,{})})]},u)})]})})]})]})})},ta=({founded:s,stadium:t,country:a,league:n,coach:r,onDownload:o})=>e.jsxs("div",{className:"space-y-4",children:[s&&e.jsx(os,{label:"Founded",value:s}),t&&e.jsx(os,{label:"Stadium",value:e.jsx(F,{to:`/stadium/${t._id}`,children:e.jsx(we,{variant:"outline",className:"cursor-pointer hover:bg-purple-100",children:t.name})})}),a&&e.jsx(os,{label:"Country",value:a}),n&&e.jsx(os,{label:"League",value:n}),r&&e.jsx(os,{label:"Coach",value:e.jsx(F,{to:`/coach/${r._id}`,children:e.jsx(we,{variant:"outline",className:"cursor-pointer hover:bg-purple-100",children:`${r.name} ${r.surname}`})})}),o&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 font-semibold mb-2",children:"Download team info:"}),e.jsx(k,{onClick:o,className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded transition-colors duration-200",children:"Download PDF"})]})]}),os=({label:s,value:t})=>e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-700 font-semibold mb-1",children:[s,":"]}),e.jsx("div",{className:"text-gray-600",children:t})]}),Kd=({conversation:s,isActive:t,isUnread:a})=>{const{currentUser:n}=q(d=>d.user),[r,o]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const l=await fetch(`/api/user/get-user-info/${n==null?void 0:n._id}?conversationId=${s._id}`);if(!l.ok)throw new Error("Failed to fetch user");const c=await l.json();o(c)}catch(l){console.error("Error fetching user:",l)}})()},[s,n]),e.jsx($.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`relative flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors duration-200 group ${t?"bg-blue-100":"hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center flex-grow mr-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:(r==null?void 0:r.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:r==null?void 0:r.name,className:"mr-3 w-10 h-10 rounded-full object-cover"}),a&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white"})]}),e.jsx("div",{className:"flex-grow min-w-0",children:e.jsxs("div",{className:"font-semibold truncate flex items-center",children:[r==null?void 0:r.name," ",r==null?void 0:r.surname,a&&e.jsx("span",{className:"ml-2 text-xs text-blue-500 font-normal",children:"New"})]})})]})})},Xd=({message:s,own:t})=>e.jsxs("div",{className:`mb-2 ${t?"text-right":"text-left"}`,children:[e.jsx("span",{className:`inline-block p-2 rounded-lg ${t?"bg-blue-500 text-white":"bg-gray-200"}`,children:s==null?void 0:s.text}),e.jsx("div",{className:"text-small-regular text-gray-500 ml-1",children:Js(s==null?void 0:s.createdAt)})]}),em=({currentId:s,setCurrentChat:t,onSelectUser:a,setIsConversationOpen:n})=>{const[r,o]=i.useState([]),[d,l]=i.useState([]),[c,u]=i.useState(""),[x,h]=i.useState(!1);i.useEffect(()=>{const m=async()=>{try{h(!0);const f=await fetch(`/api/user/get-accounts?term=${c}`);if(!f.ok)throw new Error("Failed to fetch accounts");const j=await f.json();o(j.filter(y=>y._id!==s))}catch(f){console.error("Error fetching accounts:",f)}finally{h(!1)}},g=setTimeout(()=>{c&&m()},300);return()=>clearTimeout(g)},[c,s]),i.useEffect(()=>{l(r.filter(m=>d.includes(m._id)))},[]);const p=async m=>{try{const g=await fetch(`/api/conversations/find/${s}/${m._id}`);if(!g.ok)throw new Error("Failed to fetch conversation");const f=await g.json();t(f),n(!0),a(m)}catch(g){console.error("Error starting conversation:",g)}};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qe,{type:"text",placeholder:"Search users...",value:c,onChange:m=>u(m.target.value),className:"pl-10 w-full py-2 px-8 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(Qr,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 ",size:18})]}),e.jsx(gs,{children:c.length>0&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-lg shadow-md overflow-hidden",children:x?e.jsx("div",{className:"flex items-center justify-center p-4 text-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-4 border-blue-500 border-t-transparent border-solid rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500",children:"Searching..."})]})}):r.length>0?r.map(m=>e.jsxs($.div,{whileHover:{backgroundColor:"#f3f4f6"},onClick:()=>p(m),className:"flex items-center p-3 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("img",{src:m.imageUrl||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:`${m.name} ${m.surname}`,className:"w-10 h-10 rounded-full mr-3 object-cover"}),e.jsx("div",{children:e.jsx("h3",{className:"font-medium text-gray-800",children:`${m.name} ${m.surname}`})})]},m._id)):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found"})})})]})},sm=({conversation:s,userId:t,onConversationDeleted:a})=>{const[n,r]=i.useState(!1),{toast:o}=Y(),d=c=>{c.stopPropagation(),r(!0)},l=async()=>{try{if(!(await fetch(`/api/conversations/delete/${s._id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})).ok)throw new Error("Failed to delete conversation");o({title:"Success",description:"Conversation deleted successfully"}),a(s._id)}catch(c){console.error("Error deleting conversation:",c),o({title:"Error",description:"Failed to delete conversation",variant:"destructive"})}r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0 ",children:e.jsx(k,{variant:"ghost",size:"icon",onClick:d,className:"text-gray-400 hover:text-red-500 focus:ring-2 focus:ring-red-500 focus:outline-none transition-colors duration-200",children:e.jsx(Zr,{className:"h-5 w-5 "})})}),e.jsx(Ys,{open:n,onOpenChange:r,children:e.jsxs(Qs,{children:[e.jsxs(Zs,{children:[e.jsx(ys,{children:"Delete Conversation"}),e.jsx(bs,{children:"Are you sure you want to delete this conversation? This action cannot be undone."})]}),e.jsxs(Ks,{children:[e.jsx(et,{children:"Cancel"}),e.jsx(Xs,{onClick:l,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})},aa=async s=>{const t=await fetch(`/api/conversations/unread/${s}`);if(!t.ok)throw new Error("Failed to fetch unread messages");return await t.json()},na=async(s,t)=>{if(!(await fetch(`/api/conversations/mark-as-read/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})).ok)throw new Error("Failed to mark conversation as read")},tm=()=>{var ve,Fs,Mt,Lt;const{user:s}=ze(),[t,a]=i.useState(null),[n,r]=i.useState([]),[o,d]=i.useState(null),[l,c]=i.useState(null),[u,x]=i.useState([]),[h,p]=i.useState(""),[m,g]=i.useState(null),[f,j]=i.useState(!1),[y,N]=i.useState(!1),[b,v]=i.useState(!1),[R,I]=i.useState(null),[w,A]=i.useState(null),[U,re]=i.useState([]),{emit:B,subscribe:z,isConnected:je,unsubscribe:K}=Te(),le=i.useRef(null);i.useEffect(()=>{const M=_=>{g({sender:_.senderId,text:_.text,createdAt:Date.now()}),(!o||o._id!==_.conversationId)&&re(ae=>ae.includes(_.conversationId)?ae:[...ae,_.conversationId])};return z("getMessage",M),()=>{K("getMessage",M)}},[z,o,K]),i.useEffect(()=>{m&&(o!=null&&o.members.includes(m.sender))&&x(M=>[...M,m])},[m,o]),i.useEffect(()=>{je&&B("addUser",t)},[t,B,je]),i.useEffect(()=>{var M;(M=le.current)==null||M.scrollIntoView({behavior:"smooth"})},[u]);const W=i.useCallback(async()=>{if(t)try{const M=await fetch(`/api/conversations/${t}`);if(!M.ok)throw new Error("Failed to fetch conversations");const _=await M.json();r(_.conversations),re(_.unreadConversations)}catch(M){console.error("Error fetching conversations:",M)}},[t]);i.useEffect(()=>{t&&W()},[t,b]),i.useEffect(()=>(z("conversationCreated",()=>{W()}),()=>{K("conversationCreated")}),[z,W,K]),i.useEffect(()=>{const M=async()=>{try{if(!o){j(!1);return}j(!0);const _=await fetch(`/api/messages/${o==null?void 0:o._id}`);if(!_.ok)throw new Error("Failed to fetch messages");const ae=await _.json();x(ae)}catch(_){console.error("Error fetching messages:",_)}finally{j(!1)}};x([]),M()},[o]),i.useEffect(()=>{(async()=>{try{if(!(s!=null&&s.isProfileFilled))return;const _=await fetch(`/api/user/get-account-id/${s==null?void 0:s._id}`);if(!_.ok)throw new Error("Failed to fetch account id");const ae=await _.json();a(ae)}catch(_){console.error("Error fetching account id:",_)}})()},[s]),i.useEffect(()=>{o&&t?(async()=>{try{if(!o)return;const _=o.members.find(Ne=>Ne===t);if(!_)return;const ae=await fetch(`/api/user/get-user-info/${_}?conversationId=${o==null?void 0:o._id}`);if(!ae.ok)throw new Error("Failed to fetch chat partner");const Xe=await ae.json();c(Xe)}catch(_){console.error("Error fetching chat partner:",_)}})():c(null)},[o,t]);const ue=async M=>{if(M.preventDefault(),!h.trim())return;let _=o;if(!_&&R)try{_=await ke(R._id),d(_),A(_._id),B("newConversation",{receiverId:R._id})}catch(Ne){console.error("Error checking/creating conversation:",Ne);return}const ae=(R==null?void 0:R._id)||_.members.find(Ne=>Ne!==t),Xe={conversation:_._id,sender:t,receiver:ae,text:h};B("sendMessage",{conversationId:_._id,senderId:t,receiverId:ae,text:h});try{N(!0);const Ne=await fetch("/api/messages/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(!Ne.ok)throw new Error("Failed to send message");const nr=await Ne.json();x(rr=>[...rr,nr]),p(""),I(null)}catch(Ne){console.error("Error sending message:",Ne)}finally{N(!1)}},G=async M=>{if((o==null?void 0:o._id)!==M._id){d(M),I(null),x([]),j(!0),A(M._id),re(_=>_.filter(ae=>ae!==M._id));try{await na(M._id,t),B("messagesRead",{readerId:t,conversationId:M._id}),B("updateUnreadMessageCount",{userId:t,count:await aa(t)})}catch(_){console.error("Error marking conversation as read:",_)}}};i.useEffect(()=>{o&&t&&B("messagesRead",{userId:t,conversationId:o._id})},[o,t,B]);const O=async M=>{if((R==null?void 0:R._id)!==M._id){I(M),x([]),j(!1);const _=n.find(ae=>ae.members.includes(M._id));_?(d(_),A(_._id),j(!0)):(d(null),A(null),j(!1))}},Z=M=>{r(_=>_.filter(ae=>ae._id!==M)),(o==null?void 0:o._id)===M&&(d(null),c(null),I(null),x([]))},ke=async M=>{try{const _=await fetch(`/api/conversations/find/${t}/${M}`);if(_.ok){const Ne=await _.json();if(Ne)return Ne}const ae=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:t,receiverId:M})});if(!ae.ok)throw new Error("Failed to create conversation");const Xe=await ae.json();return r(Ne=>[...Ne,Xe]),Xe}catch(_){return console.error("Error checking/creating conversation:",_),null}};return s!=null&&s.isProfileFilled?e.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto p-4 max-w-7xl h-[calc(100vh-80px)]",children:[e.jsx("h1",{className:"text-4xl font-extrabold mb-6 text-gray-800",children:"Messages"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsx("div",{className:"lg:col-span-1 bg-white rounded-lg shadow-xl overflow-hidden",children:e.jsxs(rs,{defaultValue:"conversations",className:"h-full flex flex-col",children:[e.jsxs(Ke,{className:"mb-4 p-2 bg-gradient-to-r from-gray-100 to-gray-200",children:[e.jsx(ye,{value:"conversations",className:"flex-1",children:"Conversations"}),e.jsx(ye,{value:"search",className:"flex-1",children:"Search"})]}),e.jsx(me,{value:"conversations",className:"flex-grow overflow-y-auto p-4",children:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{className:"space-y-2 p-2",children:n.map(M=>e.jsx($.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{G(M),re(_=>_.filter(ae=>ae!==M._id))},className:"cursor-pointer",children:e.jsx(Kd,{conversation:M,isActive:M._id===w,isUnread:U.includes(M._id)})},M._id))}):e.jsx("div",{className:"flex items-center justify-center h-full w-full p-6",children:e.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center bg-white-100 rounded-lg p-8 max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Conversations Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start a new chat by searching for a user or connecting with contacts."})]})})})}),e.jsx(me,{value:"search",className:"flex-grow overflow-y-auto p-4",children:e.jsx(em,{currentId:t,setCurrentChat:d,onSelectUser:O,setIsConversationOpen:v})})]})}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-xl overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between px-6 py-3 bg-white border-b shadow-sm",children:(R||l)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:((ve=R||l)==null?void 0:ve.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:(Fs=R||l)==null?void 0:Fs.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-gray-100"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("h2",{className:"text-base font-medium text-gray-900",children:`${(Mt=R||l)==null?void 0:Mt.name} ${(Lt=R||l)==null?void 0:Lt.surname}`})})]}),e.jsx("div",{className:"flex items-center space-x-3",children:o&&e.jsxs(e.Fragment,{children:[e.jsx(sm,{conversation:o,userId:t,onConversationDeleted:Z}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>{d(null),A(null)},className:"bg-gray-0 text-gray-500 hover:bg-gray-100 focus:ring-2 focus:ring-red-500 focus:outline-none transition-colors duration-200",children:e.jsx(Kr,{className:"w-5 h-5"})})]})})]})}),o||R?e.jsx(e.Fragment,{children:f?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:e.jsx(e.Fragment,{children:u.map((M,_)=>e.jsx("div",{ref:le,children:e.jsx(Xd,{message:M,own:M.sender===t})},M._id||_))})}),e.jsx("div",{className:"p-4 bg-gray-100",children:s.isProfileFilled?e.jsxs("form",{onSubmit:ue,className:"flex items-center",children:[e.jsx(qe,{type:"text",placeholder:"Type a message...",value:h,onChange:M=>p(M.target.value),onFocus:async()=>{o&&(await na(o==null?void 0:o._id,t),B("messagesRead",{readerId:t,conversationId:o._id}),B("updateUnreadMessageCount",{userId:t,count:await aa(t)}))},className:"flex-grow mr-2 p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-primary-500"}),e.jsxs(k,{type:"submit",className:"bg-primary-500 hover:bg-primary-600 text-white p-3 rounded-lg transition-colors duration-200 flex items-center",disabled:!h.trim()||y,children:[e.jsx(Xr,{size:18,className:"mr-2"}),"Send"]})]}):e.jsx("div",{className:"text-yellow-600 bg-yellow-100 p-3 rounded-lg",children:"Please complete your profile before sending messages."})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"Select a conversation or search for a user to start chatting"})})]})]})]}):e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto p-4 max-w-7xl h-[calc(100vh-80px)] flex flex-col items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Profile Incomplete"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"To start chatting, you need to complete your profile information first."}),e.jsx(F,{to:"/user/profile",className:"bg-primary-500 hover:bg-primary-600 text-white py-2 px-4 rounded-lg transition-colors duration-200",children:"Complete Profile"})]})})},am=()=>V.object({term:V.string().min(3,"Term is required"),content:V.string().min(3,"Content is required"),active:V.boolean()}),nm=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Term",selector:a=>a.term,sortable:!0},{name:"Active",selector:a=>a.active?"Yes":"No",sortable:!0}],t=[{id:"term",label:"Term",type:"text",name:"term"},{id:"content",label:"Content",type:"textarea",name:"content"},{id:"active",label:"Active",type:"checkbox",name:"active"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Terms",description:"Manage terms"}),e.jsx(ne,{apiPath:"terms",columns:s,fields:t,title:"Terms",onEditComponent:be,onDeleteComponent:ce,formSchema:am,defaultValues:{term:"",content:"",active:!0},isExpandable:!1,isAction:!0})]})},rm=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const d=await(await fetch("/api/admin/terms")).json();t(d),n(!1)}catch(o){console.log(o),n(!1)}})()},[]),a?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-heading3-bold mb-6",children:"Terms and Conditions"}),s.filter(r=>r.active).map((r,o)=>e.jsxs(E,{className:"mb-4",children:[e.jsx(H,{children:e.jsx(J,{children:r.term})}),e.jsx(L,{children:e.jsx("p",{className:"text-gray-700",children:r.content})})]},r._id||o))]})},im=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(null);i.useEffect(()=>{(async()=>{try{const d=await fetch("/api/admin/faq");if(!d.ok)throw new Error("Failed to fetch faqs");const l=await d.json();t(l)}catch(d){console.error("Error fetching faqs:",d)}})()},[]);const r=o=>{n(a===o?null:o)};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"space-y-4",children:s.filter(o=>o.active).map((o,d)=>e.jsx(om,{question:o.question,answer:o.answer,isOpen:a===d,onToggle:()=>r(d)},d))})})},om=({question:s,answer:t,isOpen:a,onToggle:n})=>e.jsxs("div",{className:"border-b border-gray-200 py-4",children:[e.jsxs("button",{className:"flex w-full items-center justify-between text-left",onClick:n,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),a?e.jsx(ei,{className:"h-5 w-5 text-gray-500"}):e.jsx(si,{className:"h-5 w-5 text-gray-500"})]}),a&&e.jsx("div",{className:"mt-2 text-gray-600",children:e.jsx("p",{children:t})})]}),$s=({icon:s,label:t,value:a})=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx(s,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:a})]})]}),lm=()=>{const[s,t]=i.useState({}),[a,n]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const o=await fetch("/api/admin/contactOne");if(!o.ok)throw new Error("Failed to fetch contact info");const d=await o.json();t(d),n(!1)}catch(o){console.error("Error fetching contact info:",o),n(!1)}})()},[]),a?e.jsx(D,{}):e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-2xl font-bold",children:"Contact Information"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx($s,{icon:We,label:"Contact Person",value:s.name+" "+s.lastName}),e.jsx($s,{icon:ti,label:"Email Address",value:s.email}),e.jsx($s,{icon:ai,label:"Phone Number",value:s.phone}),e.jsx($s,{icon:ua,label:"Office Location",value:s.address})]})]}),e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-2xl font-bold",children:"Frequently Asked Questions"})}),e.jsx(L,{children:e.jsx(im,{})})]})]})})},cm=()=>V.object({term:V.string().min(3,"Term is required"),content:V.string().min(3,"Content is required"),active:V.boolean()}),dm=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Term",selector:a=>a.term,sortable:!0},{name:"Active",selector:a=>a.active?"Yes":"No",sortable:!0}],t=[{id:"term",label:"Term",type:"text",name:"term"},{id:"content",label:"Content",type:"textarea",name:"content"},{id:"active",label:"Active",type:"checkbox",name:"active"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Privacy Policy",description:"Manage privacy policy "}),e.jsx(ne,{apiPath:"privacy",columns:s,fields:t,title:"Privacy",onEditComponent:be,onDeleteComponent:ce,formSchema:cm,defaultValues:{term:"",content:"",active:!0},isExpandable:!1,isAction:!0})]})},mm=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const d=await(await fetch("/api/admin/privacy")).json();t(d),n(!1)}catch(o){console.log(o),n(!1)}})()},[]),a?e.jsx(D,{}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-heading3-bold mb-6",children:"Privacy Policy"}),s.filter(r=>r.active).map((r,o)=>e.jsxs(E,{className:"mb-4",children:[e.jsx(H,{children:e.jsx(J,{children:r.term})}),e.jsx(L,{children:e.jsx("p",{className:"text-gray-700",children:r.content})})]},r._id||o))]})},xm=s=>V.object({title:V.string().min(3,"Title is required"),description:V.string().min(3,"Description is required"),mission:V.string().min(3,"Mission is required"),whyUs:V.string().min(3,"Why Us is required"),logo:s?V.any().nullable():V.instanceof(File,{message:"Logo is required"})}),um=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Title",selector:a=>a.title,sortable:!0}],t=[{id:"title",label:"Title",type:"text",name:"title"},{id:"description",label:"Description",type:"textarea",name:"description"},{id:"mission",label:"Mission",type:"textarea",name:"mission"},{id:"whyUs",label:"Why Us",type:"textarea",name:"whyUs"},{id:"logo",label:"Photo",type:"file",name:"logo"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"About Us",description:"Manage about us"}),e.jsx(ne,{apiPath:"about",columns:s,fields:t,title:"About Us",onEditComponent:be,onDeleteComponent:ce,formSchema:xm,defaultValues:{title:"",description:"",mission:"",whyUs:"",logo:""},isExpandable:!1,isAction:!0})]})},hm=()=>{const[s,t]=i.useState(null),[a,n]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const d=await(await fetch("/api/admin/aboutOne")).json();t(d),n(!1)}catch(o){console.error(o),n(!1)}})()},[]),a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(D,{className:"w-12 h-12 text-primary"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:s&&e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl lg:text-7xl",children:s.title}),e.jsx("p",{className:"mt-6 max-w-2xl mx-auto text-xl text-gray-500",children:s.description})]}),e.jsx("div",{className:"mt-16",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},className:"relative aspect-video rounded-xl overflow-hidden shadow-2xl",children:e.jsx("img",{className:"absolute inset-0 w-full h-full object-cover",src:s.imageUrl,alt:"KickZone in Action"})})}),e.jsxs("div",{className:"mt-20 grid gap-16 lg:grid-cols-2",children:[e.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4,duration:.5},children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Our Mission"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600 leading-relaxed",children:s.mission})]}),e.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.5},children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Why KickZone?"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600 leading-relaxed",children:s.whyUs})]})]})]})})},ra=({match:s,isPlayed:t})=>e.jsx(E,{className:"mb-4 hover:shadow-lg transition-shadow duration-300",children:e.jsx(L,{className:"p-4",children:e.jsxs(F,{to:t?`/results/${s==null?void 0:s.resultId}`:`/match/${s==null?void 0:s.matchId}`,className:"block",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:s.league}),e.jsx("span",{className:"text-sm font-semibold",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"mr-1 text-blue-500",children:""}),new Date(s==null?void 0:s.startDate).toLocaleString("en-UK",{hour:"numeric",minute:"numeric"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:s.homeTeam}),e.jsx("span",{className:"text-lg font-bold",children:t?`${s==null?void 0:s.homeScore} : ${s==null?void 0:s.awayScore}`:"vs"}),e.jsx("span",{className:"font-semibold",children:s.awayTeam})]})]})})}),ia=({title:s,description:t})=>e.jsxs(Ys,{variant:"default",className:"mb-4",children:[e.jsx(ni,{className:"h-4 w-4"}),e.jsx(ys,{children:s}),e.jsx(bs,{children:t})]}),pm=()=>{const[s,t]=i.useState([]),[a,n]=i.useState([]),[r,o]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const c=await(await fetch("/api/admin/today-matches")).json();t(c),o(!1)}catch(l){console.log(l)}})()},[]),i.useEffect(()=>{(async()=>{try{o(!0);const c=await(await fetch("/api/admin/recent-results")).json();n(c),o(!1)}catch(l){console.log(l)}})()},[]),r?e.jsx(D,{}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(E,{className:"md:col-span-1",children:[e.jsx(H,{className:"bg-gradient-to-r from-primary-500 to-purple-500 text-white",children:e.jsxs(J,{className:"flex items-center text-2xl",children:[e.jsx("span",{className:"mr-2",children:""}),"Today's Matches"]})}),e.jsx(L,{className:"p-4",children:s.length>0?s.map(d=>e.jsx(ra,{match:d,isPlayed:!1},d==null?void 0:d.matchId)):e.jsx(ia,{title:"No Matches Today",description:"There are no scheduled matches for today. Check back later for updates!"})})]}),e.jsxs(E,{className:"md:col-span-1",children:[e.jsx(H,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs(J,{className:"flex items-center text-2xl",children:[e.jsx("span",{className:"mr-2",children:""}),"Recent Results"]})}),e.jsx(L,{className:"p-4",children:a.length>0?a.map(d=>e.jsx(ra,{match:d,isPlayed:!0},d==null?void 0:d.resultId)):e.jsx(ia,{title:"No Recent Results",description:"There are no recent match results available at the moment."})})]})]})})},fm=()=>{var o,d;const s=te().id,[t,a]=i.useState([]),[n,r]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const c=await fetch(`/api/match/overview/${s}`);if(!c.ok)throw new Error("Failed to fetch match overview");const u=await c.json();a(u),r(!1)}catch(c){console.log(c)}finally{r(!1)}})()},[s]),n?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsx(Q,{}),e.jsxs(E,{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx(H,{className:"bg-gradient-to-r from-primary-500 to-purple-500 text-white p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(J,{className:"text-2xl font-bold",children:t==null?void 0:t.league}),e.jsx(we,{variant:"secondary",className:"text-sm hover:bg-slate-100",children:t==null?void 0:t.season})]})}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[e.jsx(oa,{team:t==null?void 0:t.homeTeam,isHome:!0}),e.jsx("div",{className:"text-4xl font-bold my-4 md:my-0",children:"VS"}),e.jsx(oa,{team:t==null?void 0:t.awayTeam,isHome:!1})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-gray-600",children:[e.jsx(ut,{icon:ri,label:"Date & Time",value:new Date(t==null?void 0:t.startDate).toLocaleString("en-UK",{hour:"numeric",minute:"numeric",day:"numeric",month:"short"})}),e.jsx(ut,{icon:ya,label:"Venue",value:(d=(o=t.homeTeam)==null?void 0:o.stadium)==null?void 0:d.name}),e.jsx(ut,{icon:We,label:"Referee",value:(t==null?void 0:t.mainReferee)??"Not assigned"})]})]})]})]})},oa=({team:s,isHome:t})=>e.jsxs("div",{className:`flex flex-col items-center ${t?"md:items-end":"md:items-start"}`,children:[e.jsx("img",{src:s==null?void 0:s.logoUrl,alt:`${s==null?void 0:s.name} logo`,className:"w-16 h-16 mb-2"}),e.jsx("h2",{className:"text-xl font-semibold",children:s==null?void 0:s.name})]}),ut=({icon:s,label:t,value:a})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{className:"text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t}),e.jsx("p",{className:"font-medium",children:a})]})]}),gm=()=>V.object({question:V.string().min(3,"Question is required"),answer:V.string().min(3,"Answer is required"),active:V.boolean()}),jm=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Question",selector:a=>a.question,sortable:!0},{name:"Active",selector:a=>a.active?"Yes":"No",sortable:!0}],t=[{id:"question",label:"Question",type:"textarea",name:"question"},{id:"answer",label:"Answer",type:"textarea",name:"answer"},{id:"active",label:"Active",type:"checkbox",name:"active"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"FAQ",description:"Manage FAQ"}),e.jsx(ne,{apiPath:"faq",columns:s,fields:t,title:"FAQ",onEditComponent:be,onDeleteComponent:ce,formSchema:gm,defaultValues:{question:"",answer:"",active:!0},isExpandable:!1,isAction:!0})]})},ym=()=>V.object({name:V.string().min(3,"Name is required"),lastName:V.string().min(3,"Last name is required"),email:V.string().email("Invalid email"),phone:V.string().min(3,"Phone is required"),address:V.string().min(3,"Address is required"),active:V.boolean()}),bm=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Name",selector:a=>a.name+" "+a.lastName,sortable:!0},{name:"E-mail",selector:a=>a.email,sortable:!0},{name:"Active",selector:a=>a.active?"Yes":"No",sortable:!0}],t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"lastName",label:"Last Name",type:"text",name:"lastName"},{id:"email",label:"E-mail",type:"email",name:"email"},{id:"phone",label:"Phone",type:"text",name:"phone"},{id:"address",label:"Address",type:"text",name:"address"},{id:"active",label:"Active",type:"checkbox",name:"active"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Contact",description:"Manage contact information"}),e.jsx(ne,{apiPath:"contact",columns:s,fields:t,title:"Contact",onEditComponent:be,onDeleteComponent:ce,formSchema:ym,defaultValues:{name:"",lastName:"",email:"",phone:"",address:"",active:!0},isExpandable:!1,isAction:!0})]})},Nm=s=>{const{currentUser:t}=q(c=>c==null?void 0:c.user),[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{if(!(t!=null&&t._id)||(t==null?void 0:t.role)!=="Admin")return;const u=await fetch(`/api/admin/get/${t==null?void 0:t._id}`);if(u.ok){const x=await u.json();n(x),o(!1)}else n([])}catch(u){l(u),o(!1)}finally{o(!1)}})()},[t,s]),{admin:a,loading:r,error:d}},wm=({currentUser:s})=>{const t=i.useRef(null),[a,n]=i.useState(),r=Qe(),[o,d]=i.useState(!1),{admin:l,loading:c}=Nm(o),{toast:u}=Y(),x=ie({resolver:oe(vs(!!l)),defaultValues:{name:"",surname:"",nationality:"",city:"",bio:"",birthDate:"",photo:""},mode:"onChange"});i.useEffect(()=>{l&&x.reset({...l})},[l,o]);const h=x.getValues("birthDate"),p=new Date(h),m=r==null?void 0:r.find(f=>f.id.includes(l==null?void 0:l.nationality)),g=async f=>{const j=r.find(N=>N.name.includes(f==null?void 0:f.nationality)),y=new FormData;y.append("photo",a||(l==null?void 0:l.photo)),y.append("user",s._id),y.append("name",f.name),y.append("surname",f.surname),y.append("nationality",(j==null?void 0:j.id)||f.nationality),y.append("city",f.city),y.append("bio",f.bio),y.append("birthDate",p);try{(await fetch("/api/admin/add",{method:"POST",body:y})).ok?(u({title:"Success!",description:"Admin profile updated successfully"}),d(!o)):u({title:"Error!",description:"Failed to update admin profile",variant:"destructive"})}catch(N){console.log(N)}};return c?e.jsx(D,{}):e.jsx(E,{className:"px-4 py-8",children:e.jsx(xe,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(g),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"name",label:"Name",type:"text",form:x,name:"name"}),e.jsx(T,{id:"surname",label:"Surname",type:"text",form:x,name:"surname"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(T,{id:"birthDate",label:"Date of Birth",type:"date",form:x,name:"birthDate",isEdit:!0,initialDate:(l==null?void 0:l.birthDate)||new Date,placeholder:"Select date"}),e.jsx(T,{id:"nationality",type:"select",form:x,items:r,label:"Nationality",placeholder:(m==null?void 0:m.name)||"Select nationality",name:"nationality"})]}),e.jsx(T,{id:"bio",label:"Bio",type:"textarea",form:x,name:"bio"}),e.jsx(T,{id:"city",label:"City",type:"text",form:x,name:"city"}),e.jsx(T,{id:"photo",label:"Photo",type:"file",form:x,name:"photo",fileRef:t,setFile:n,currentUserPhoto:l==null?void 0:l.imageUrl}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500 px-6 py-3 rounded-md text-white font-semibold",children:"Save"})})]})})})},vm=()=>{const{currentUser:s}=q(t=>t.user);return e.jsxs("div",{className:"space-y-6 max-w-screen-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Admin Profile"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fulfill your admin profile"})]}),e.jsx(Q,{}),e.jsx(wm,{currentUser:s})]})},Sm=({item:s,onRead:t})=>{var a,n,r;return e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},layout:!0,children:e.jsx(E,{className:`hover:shadow-lg transition-all duration-300 border-l-4 ${s.isRead?"bg-gray-50 dark:bg-gray-800 border-l-transparent":"bg-white dark:bg-gray-700 border-l-blue-500"} `,children:e.jsx(L,{className:"p-4 relative",children:e.jsx(F,{to:`/post/${s.postId}`,onClick:()=>t(s._id),className:"block",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[((a=s.senderId)==null?void 0:a.imageUrl)&&e.jsx("img",{src:((n=s.senderId)==null?void 0:n.imageUrl)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:"Profile",className:`w-10 h-10 rounded-full object-cover border-2 transition-all duration-300 ${s.isRead?"border-gray-200 dark:border-gray-600":"border-blue-100 dark:border-blue-900"}`}),e.jsx("div",{className:`absolute -bottom-1 -right-1 p-1 rounded-full ${s.type==="comment"?"bg-blue-500":""}`,children:s.type==="comment"?e.jsx(ha,{className:"w-3 h-3 text-white"}):e.jsx("span",{className:"block w-3 h-3",children:""})}),!s.isRead&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("p",{className:`text-sm ${s.isRead?"text-gray-600 font-normal":"text-gray-800 font-medium"} dark:text-gray-200`,children:[e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:(r=s.senderId)==null?void 0:r.username})," ",s.type==="comment"?"replied to":"liked"," your post"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.createdAt).toLocaleString("en-UK",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})})]}),!s.isRead&&e.jsx("div",{className:"shrink-0",children:e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-200",children:"New"})})]})})})})})},la=async s=>{const t=await fetch(`/api/notifications/details/${s}`);if(!t.ok)throw new Error("Failed to fetch notifications");return await t.json()},Cm=async(s,t,a,n)=>{if(!(await fetch(`/api/notifications/delete/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:t,postId:a,type:n})})).ok)throw new Error("Failed to delete notification from database")},Tm=async(s,t)=>{if(!(await fetch(`/api/notifications/mark-as-read/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:t})})).ok)throw new Error("Failed to mark notification as read")},km=async s=>{if(!(await fetch(`/api/notifications/mark-all-as-read/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s})})).ok)throw new Error("Failed to mark all notifications as read")},Pm=async s=>{const t=await fetch(`/api/notifications/unread-count/${s}`);if(!t.ok)throw new Error("Failed to fetch unread count");return await t.json()},Fm=()=>{const{currentUser:s}=q(m=>m.user),[t,a]=i.useState([]),[n,r]=i.useState(!0),{emit:o,socket:d,subscribe:l,unsubscribe:c}=Te(),u=i.useCallback(async()=>{if(s!=null&&s._id)try{const m=await la(s._id);a(m.notifications)}catch(m){console.error(m)}finally{r(!1)}},[s==null?void 0:s._id]);i.useEffect(()=>{u()},[u]);const x=i.useCallback(async m=>{a(g=>g.filter(f=>{var j;return!(((j=f.senderId)==null?void 0:j._id)===m.senderId&&f.postId===m.postId&&f.type===m.type)}));try{await Cm(m.authorId,m.senderId,m.postId,m.type)}catch(g){console.error("Error deleting notification:",g)}},[]);i.useEffect(()=>{if(!d)return;const m=async g=>{const f=t.find(j=>{var y;return((y=j.senderId)==null?void 0:y._id)===g.senderId&&j.postId===g.postId&&j.type===g.type});if(f){a(j=>j.map(y=>y._id===f._id?{...y,isRead:!1}:y));return}try{const y=(await la(s._id)).notifications.find(N=>{var b;return((b=N.senderId)==null?void 0:b._id)===g.senderId&&N.postId===g.postId&&N.type===g.type});y&&a(N=>[{_id:y._id,senderId:{_id:y.senderId._id,username:y.senderId.username,imageUrl:y.senderId.imageUrl},type:y.type,postId:y.postId,createdAt:y.createdAt,isRead:!1},...N])}catch(j){console.error(j)}};return()=>{c("getNotification",m),c("removeNotification",x)}},[d,l,c,x,s==null?void 0:s._id,t]);const h=i.useCallback(async m=>{var f;a(j=>j.map(y=>y._id===m?{...y,isRead:!0}:y));const g=t.find(j=>j._id===m);if(g)try{await Tm(s==null?void 0:s._id,m),o("updateUnreadNotificationCount",{userId:s==null?void 0:s._id,count:(await Pm(s==null?void 0:s._id)).unreadCount}),o("newUnreadNotification",{userId:s==null?void 0:s._id,authorId:(f=g.senderId)==null?void 0:f._id,postId:g.postId,type:g.type,action:"read",notificationId:m})}catch(j){console.error("Error marking notification as read:",j),a(y=>y.map(N=>N._id===m?{...N,isRead:!1}:N))}},[t,o,s==null?void 0:s._id]),p=i.useCallback(async()=>{a(m=>m.map(g=>({...g,isRead:!0})));try{await km(s._id),o("updateUnreadNotificationCount",{userId:s==null?void 0:s._id,count:0}),t.forEach(m=>{var g;m.isRead||o("newUnreadNotification",{userId:s==null?void 0:s._id,authorId:(g=m.senderId)==null?void 0:g._id,postId:m.postId,type:m.type,action:"read",notificationId:m._id})})}catch(m){console.error("Error marking all notifications as read:",m),a(g=>g.map(f=>({...f,isRead:!1})))}},[t,o,s==null?void 0:s._id]);return n?e.jsx(D,{}):e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs(E,{className:"bg-white dark:bg-gray-800 shadow-xl",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between",children:[e.jsx(J,{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200",children:"Notifications"}),(t==null?void 0:t.length)>0&&e.jsx(k,{onClick:p,variant:"outline",className:"text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:"Mark all as read"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:e.jsx(gs,{children:(t==null?void 0:t.length)>0?t.map(m=>e.jsx(Sm,{item:m,onRead:h},m._id)):e.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:[e.jsx(ss,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No new notifications"})]})})})})]})})},Em=i.createContext(null),Rm=({children:s})=>{const t=Te();return e.jsx(Em.Provider,{value:t,children:s})},Dm=()=>{const[s,t]=i.useState([]),[a,n]=i.useState([]),[r,o]=i.useState(!0),[d,l]=i.useState(!1),{currentUser:c}=q(m=>m.user),u=Ue(),x=ge();i.useEffect(()=>{(async()=>{try{o(!0);const[g,f]=await Promise.all([fetch(`/api/user/get-role-change-notifications/${c._id}`),fetch(`/api/user/get-content-notif/${c._id}`)]),j=await g.json(),y=await f.json();t(j),n(y)}catch(g){console.error("Error fetching notifications:",g)}finally{o(!1)}})()},[c._id]);const h=async m=>{try{if(l(!0),(await fetch("/api/user/mark-content-notification-as-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c==null?void 0:c._id,notificationId:m})})).ok)n(f=>f.filter(j=>j._id!==m)),x("/");else throw new Error("Failed to mark notification as read")}catch(g){console.error("Error marking content notification as read:",g)}finally{l(!1)}},p=async()=>{try{if(!(await fetch("/api/user/mark-role-change-notification-as-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c==null?void 0:c._id})})).ok)throw new Error("Failed to mark notifications as read")}catch(m){console.error("Error marking notifications as read:",m)}u(Cn()),x("/sign-in")};return r?e.jsx(D,{}):e.jsx("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-8xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl",children:"Notifications"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Recent account changes and content notifications"})]}),e.jsxs(Ys,{children:[e.jsx(gn,{asChild:!0,children:e.jsxs(k,{variant:"destructive",className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Logout"]})}),e.jsxs(Qs,{children:[e.jsxs(Zs,{children:[e.jsx(ys,{children:"Are you sure you want to logout?"}),e.jsx(bs,{children:"You will be redirected to the login page and your current session will end."})]}),e.jsxs(Ks,{children:[e.jsx(et,{children:"Cancel"}),e.jsx(Xs,{onClick:p,className:"bg-red-500 hover:bg-red-600",children:"Logout"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Role Change Notifications"}),s.length===0?e.jsx(E,{className:"text-center py-12 bg-white shadow-md",children:e.jsxs(L,{children:[e.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No role change notifications"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No recent changes to your account role."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(m=>e.jsxs(E,{className:`hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 ${m.isRead?"":"border-2 border-primary-500"}`,children:[e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Na,{className:"h-5 w-5 text-green-500"}),"Role Changed to"," ",m.role.charAt(0).toUpperCase()+m.role.slice(1)]}),e.jsx(He,{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleString()})]}),e.jsx(L,{children:e.jsx("p",{className:"text-gray-600",children:m.message})})]},m._id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Content Deleted Notifications"}),a.length===0?e.jsx(E,{className:"text-center py-12 bg-white shadow-md",children:e.jsxs(L,{children:[e.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No content deleted notifications"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No recent content deletions."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(m=>e.jsxs(E,{className:`hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 ${m.isRead?"":"border-2 border-primary-500"}`,children:[e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(hs,{className:"h-5 w-5 text-red-500"}),"Content Deleted"]}),e.jsx(He,{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleString()})]}),e.jsxs(L,{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:[m.contentType," removed due to"," ",m.reason.replace(/_/g," ")]}),m.description&&e.jsxs("p",{className:"text-sm text-gray-500 italic",children:['`"`',m.description,'`"`']}),e.jsx(k,{onClick:()=>h(m._id),className:"mt-4 w-full bg-primary-500 hover:bg-purple-500",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Marking as Read..."})]}):e.jsx("span",{children:"Mark as Read and Go Home"})})]})]},m._id))})]})]})]})})},Im=[{name:"No.",selector:(s,t)=>t+1,grow:0},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Quantity",selector:s=>s.quantity,sortable:!0},{name:"Condition",selector:s=>s.condition,sortable:!0},{name:"Last Checked",selector:s=>s.updatedAt.split("T")[0],sortable:!0},{name:"Status",selector:s=>e.jsx(we,{className:Am(s.status),children:s.status}),sortable:!0}],Am=s=>{switch(s){case"Available":return"bg-green-100 text-green-800 hover:bg-green-200";case"In Use":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"Needs Replacement":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},$m=()=>{const{coach:s}=Ze(),t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"quantity",label:"Quantity",type:"number",name:"quantity"},{id:"condition",label:"Condition",type:"select",name:"condition",items:[{name:"Good"},{name:"Fair"},{name:"Poor"}],placeholder:"Select a Condition",idFlag:!1},{id:"status",label:"Status",type:"select",name:"status",items:[{name:"Available"},{name:"In Use"},{name:"Needs Replacement"}],placeholder:"Select a Status",idFlag:!1}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Team Equipment",description:"Manage team equipment"}),e.jsx(ne,{apiPath:"team-equipment",columns:Im,fields:t,objectId:s==null?void 0:s.currentTeam,title:"Team Equipment",onEditComponent:be,onDeleteComponent:ce,formSchema:Wl,isAction:!0,isExpandable:!1,defaultValues:{name:"",quantity:"0",condition:"",status:""}})]})},_m=()=>{const{user:s,loading:t}=ze();return t?e.jsx(D,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-heading4-medium font-bold text-gray-800",children:"Player Dashboard"}),e.jsx(Q,{})]}),s!=null&&s.isProfileFilled?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ",children:[e.jsx(Re,{title:"Schedule",linkTo:"/dashboard/player/schedule"}),e.jsx(Re,{title:"Statistics",linkTo:"/dashboard/player/stats"})]}):e.jsxs("div",{className:"text-gray-800 text-lg text-center",children:[e.jsx("p",{className:"mb-4",children:"Please fill in your profile to access the dashboard."}),e.jsxs(F,{to:"/user/player/profile",className:"inline-flex items-center justify-center px-4 py-2 bg-primary-500 hover:bg-purple-500 text-white rounded-md transition-colors duration-300",children:[e.jsx("span",{children:"Complete Profile"}),e.jsx(ps,{className:"ml-2 h-5 w-5"})]})]})]})})},Mm=()=>{const{player:s}=ks(),[t,a]=i.useState([]),[n,r]=i.useState(!0);if(i.useEffect(()=>{(async()=>{var c;try{r(!0);const x=await(await fetch(`/api/team/matches/${(c=s==null?void 0:s.currentTeam)==null?void 0:c._id}`)).json();a(x==null?void 0:x.matches)}catch(u){console.log(u)}finally{r(!1)}})()},[s==null?void 0:s.currentTeam]),n)return e.jsx(D,{});const o=l=>new Date(l).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d=l=>new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(X,{title:"Matches",description:"Upcoming matches"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 pt-3 gap-4",children:t==null?void 0:t.map(l=>e.jsxs(E,{className:"hover:shadow-lg transition-shadow duration-200",children:[e.jsx(H,{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:l.league.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:l.round.name})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"text-lg font-semibold text-center",children:l.homeTeam.name}),e.jsx("div",{className:"text-sm text-gray-500",children:"vs"}),e.jsx("div",{className:"text-lg font-semibold text-center",children:l.awayTeam.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),o(l.startDate)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),d(l.startDate)," - ",d(l.endDate)]})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${l.isCompleted?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:l.isCompleted?"Completed":"Upcoming"})})]})})]},l._id))})]})},_s=({icon:s,label:t,value:a})=>e.jsx(E,{className:"overflow-hidden",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full bg-blue-50 p-3",children:e.jsx(s,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:a})})]})]})})}),Lm=()=>{const{player:s,loading:t}=ks(),{playerStats:a}=Un(s==null?void 0:s._id),n=(a==null?void 0:a[0])||null;return t?e.jsx(D,{}):!n||!s?e.jsx("div",{className:"p-6",children:e.jsx(E,{children:e.jsx(L,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx(Hs,{className:"w-12 h-12 text-yellow-500"}),e.jsx("h3",{className:"text-xl font-bold",children:"No Stats Available Yet"}),e.jsx("p",{className:"text-slate-400",children:"Your statistics will appear here after your first match."})]})})})}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-8xl mx-auto space-y-6",children:[e.jsx(X,{title:"My Performance",description:"Track your progress and achievements"}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:`grid grid-cols-1 gap-6 md:grid-cols-2 ${n.cleanSheets===0?"lg:grid-cols-3":"lg:grid-cols-4"}`,children:[e.jsx(_s,{icon:us,label:"Goals",value:n.goals}),e.jsx(_s,{icon:ii,label:"Assists",value:n.assists}),n.cleanSheets===0?null:e.jsx(_s,{icon:ja,label:"Clean Sheets",value:n.cleanSheets}),e.jsx(_s,{icon:Ye,label:"Minutes Played",value:n.minutesPlayed})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-gray-900",children:"Goal Contributions"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Goals + Assists"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:n.goals+n.assists})]}),e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-gray-100",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${n.goals/(n.goals+n.assists)*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Goals (",n.goals,")"]}),e.jsxs("span",{children:["Assists (",n.assists,")"]})]})]})})]}),e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-gray-900",children:"Discipline Record"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-amber-50 p-4",children:[e.jsx("span",{className:"font-medium text-amber-700",children:"Yellow Cards"}),e.jsx("span",{className:"text-2xl font-bold text-amber-700",children:n.yellowCards})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-rose-50 p-4",children:[e.jsx("span",{className:"font-medium text-rose-700",children:"Red Cards"}),e.jsx("span",{className:"text-2xl font-bold text-rose-700",children:n.redCards})]})]})})]})]})]})]})})},Om=s=>{const{currentUser:t}=q(c=>c.user),[a,n]=i.useState([{id:"",name:"",count:0}]),[r,o]=i.useState(!0),[d,l]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const x=await(await fetch(`/api/admin/team-forum-categories/${t==null?void 0:t._id}/${t==null?void 0:t.role}`)).json();n(x==null?void 0:x.map(h=>({id:h==null?void 0:h._id,name:h==null?void 0:h.name,count:h==null?void 0:h.count}))),o(!1)}catch(u){l(u),o(!1)}finally{o(!1)}})()},[s,t]),{categories:a,loading:r,error:d}},Bm=()=>{const[s,t]=i.useState([{id:"",name:""}]),[a,n]=i.useState(!0),[r,o]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const c=await(await fetch("/api/admin/team-forum-categories")).json();t(c==null?void 0:c.map(u=>({id:u==null?void 0:u._id,name:u==null?void 0:u.name}))),n(!1)}catch(l){o(l),n(!1)}finally{n(!1)}})()},[]),{categoriesToSelect:s,loading:a,error:r}},Vm=()=>ee({title:P().min(5,"Title must be at least 5 characters").max(100,"Title must be at most 100 characters"),category:P().min(1,"Category must be selected"),content:P().min(20,"Content must be at least 20 characters").max(400,"Content must be at most 400 characters")}),zm=({author:s,isChanged:t})=>{const[a,n]=i.useState(!1),[r,o]=i.useState(!1),{categoriesToSelect:d}=Bm(),{emit:l}=Te(),c=ie({resolver:oe(Vm()),defaultValues:{title:"",content:"",category:""},mode:"onChange"}),u=async x=>{try{o(!0);const h=await fetch("/api/forum/new-thread",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,authorId:s._id,authorModel:s.role})});if(!h.ok)throw new Error("Cannot create new thread");const p=await h.json();l("initializeTeamForumNotifications",{teamId:p.teamId,threadId:p._id}),o(!0),t(m=>!m),c.reset()}catch(h){console.log(h)}finally{o(!1)}n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(k,{onClick:()=>n(!0),className:"bg-primary-500 hover:bg-purple-500 my-4",children:"New Thread"}),e.jsx(De,{open:a,onOpenChange:n,children:e.jsxs(Ae,{className:"sm:max-w-2xl",children:[e.jsx($e,{children:e.jsx(_e,{children:"Create New Thread"})}),e.jsx(xe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(T,{id:"title",label:"Title",type:"text",form:c,name:"title",placeholder:"Enter thread title..."})}),e.jsx("div",{className:"space-y-2",children:e.jsx(T,{id:"category",label:"Category",type:"select",form:c,name:"category",placeholder:"Select a category",items:d,idFlag:!0})}),e.jsx("div",{className:"space-y-2",children:e.jsx(T,{id:"content",label:"Content",type:"textarea",form:c,name:"content",placeholder:"Write your thread content...",className:"max-h-[150px]"})}),e.jsx(Oe,{children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500",disabled:r,children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsx("p",{children:"Create Thread"})})})]})})]})})]})},qm=({threads:s})=>{const[a,n]=i.useState(1),r=Math.ceil((s==null?void 0:s.length)/5),o=s==null?void 0:s.slice((a-1)*5,a*5),d=l=>{l==="prev"&&a>1?n(c=>c-1):l==="next"&&a<r&&n(c=>c+1)};return e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[o==null?void 0:o.map(l=>{var c,u,x;return e.jsx(E,{className:"hover:shadow-md transition-shadow",children:e.jsx(F,{to:`/forum/${l==null?void 0:l._id}`,children:e.jsx(L,{className:"p-6 ",children:e.jsxs("div",{className:"flex items-start gap-4 ",children:[e.jsx(Ns,{className:"h-10 w-10",children:e.jsx(ws,{src:((c=l.author)==null?void 0:c.avatar)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:(u=l.author)==null?void 0:u.name})}),e.jsxs("div",{className:"flex-1 min-w-0 ",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[(l==null?void 0:l.isPinned)&&e.jsx(qi,{className:"h-4 w-4 text-primary-500"}),e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:l==null?void 0:l.title})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:l==null?void 0:l.preview}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 ",children:[e.jsx("span",{className:"font-medium",children:(x=l.author)==null?void 0:x.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oi,{className:"h-4 w-4"}),l==null?void 0:l.repliesCount]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vt,{className:"h-4 w-4"}),l==null?void 0:l.likesCount]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),Js(l==null?void 0:l.createdAt)]})]})]})]})})})},l==null?void 0:l._id)}),s.length>0?e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>d("prev"),disabled:a===1,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",a," of ",r]}),e.jsx("button",{onClick:()=>d("next"),disabled:a===r,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]}):e.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center py-28",children:"No threads found"})]})},Gm=Hi,Hm=Ui,sr=i.forwardRef(({className:s,align:t="center",sideOffset:a=4,...n},r)=>e.jsx(Gi,{children:e.jsx(fn,{ref:r,align:t,sideOffset:a,className:C("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));sr.displayName=fn.displayName;const Um=({userId:s,role:t})=>{const[a,n]=i.useState([]),[r,o]=i.useState(0),[d,l]=i.useState(""),{subscribe:c,emit:u,isConnected:x,unsubscribe:h}=Te();i.useEffect(()=>{(async()=>{try{const f=await(await fetch(`/api/forum/notifications/${s}/${t}`)).json();n(f.notifications),l(f.teamId),o(f.unreadCount)}catch(g){console.log(g)}})()},[s,t]),i.useEffect(()=>{if(!(!s||!x))return c("teamForumNotificationsStatus",m=>{o(m.unreadCount)}),c("teamForumNotificationDetails",m=>{n(g=>g.some(j=>j._id===m.notification._id)?g.map(j=>j._id===m.notification._id?m.notification:j):[m.notification,...g])}),c("teamForumNotificationStatusAfterUpdate",m=>{o(m.unreadCount)}),c("teamForumNotificationStatusAfterDeletion",m=>{o(m.unreadCount)}),()=>{h("teamForumNotificationsStatus"),h("teamForumNotificationDetails"),h("teamForumNotificationStatusAfterUpdate"),h("teamForumNotificationStatusAfterDeletion")}},[c,s,x,h]);const p=m=>{u("markTeamForumNotificationRead",{teamId:d,userId:s,notificationId:m}),n(g=>g.filter(f=>f._id!==m))};return e.jsxs(Gm,{children:[e.jsxs(Hm,{className:"relative",children:[e.jsx(ss,{className:"w-6 h-6"}),r>0&&e.jsx(we,{variant:"destructive",className:"absolute -top-2 -right-2 px-1.5 py-0.5 text-xs",children:r})]}),e.jsx(sr,{className:"w-80",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-lg flex items-center",children:[e.jsx(li,{className:"mr-2"})," Forum Notifications"]}),(a==null?void 0:a.length)===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No new notifications"}):a==null?void 0:a.map(m=>e.jsx("div",{className:"border-b pb-2 last:border-b-0",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs(F,{to:`/forum/${m==null?void 0:m.threadId}`,children:[e.jsx("p",{className:"text-sm font-medium",children:(m==null?void 0:m.type)==="newThread"?"New Thread Created":"New Comment"}),e.jsx("p",{className:"text-xs text-gray-600",children:m.title||m.content})]}),e.jsx("button",{onClick:()=>p(m._id),className:"text-xs text-gray-500 hover:text-gray-800",children:"Mark Read"})]})},m._id))]})})]})},Jm=()=>{const[s,t]=i.useState("all"),[a,n]=i.useState([]),[r,o]=i.useState([]),[d,l]=i.useState(!0),[c,u]=i.useState(!1),[x,h]=i.useState(""),{currentUser:p}=q(j=>j.user),{categories:m,loading:g}=Om(c),f=[{id:"all",name:"All Topics",count:a.length},...m||[]];return i.useEffect(()=>{try{(async()=>{l(!0);const N=await(await fetch(`/api/forum/threads/${p==null?void 0:p._id}/${p==null?void 0:p.role}`)).json();n(N)})()}catch(j){console.log(j)}finally{l(!1)}},[c,p]),i.useEffect(()=>{let j=a;s!=="all"&&(j=j.filter(y=>y.category===s)),x&&(j=j.filter(y=>y.title.toLowerCase().includes(x.toLowerCase()))),o(j)},[s,x,a]),e.jsxs("div",{className:"max-w-8xl mx-auto p-6",children:[e.jsx(X,{title:"Team Forum",description:"Connect, discuss, and stay updated with your team",isBack:!1}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx(zm,{author:p,isChanged:u}),e.jsx(Um,{userId:p==null?void 0:p._id,role:p==null?void 0:p.role})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4",children:e.jsx(qe,{placeholder:"Search discussions...",className:"max-w-md",value:x,onChange:j=>h(j.target.value)})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{className:"text-lg",children:"Categories"})}),e.jsx(L,{children:g?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(D,{})}):e.jsx("nav",{className:"space-y-2",children:f.map(j=>e.jsxs("button",{onClick:()=>t(j==null?void 0:j.id),className:`w-full text-left px-3 py-2 rounded-lg flex justify-between items-center ${s===(j==null?void 0:j.id)?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[e.jsx("span",{children:j==null?void 0:j.name}),e.jsx("span",{className:"text-sm text-gray-500",children:(j==null?void 0:j.id)==="all"?a.length:j==null?void 0:j.count})]},j==null?void 0:j.id))})})]})}),d?e.jsx("div",{className:"lg:col-span-3 flex justify-center py-4",children:e.jsx(D,{})}):e.jsx(qm,{threads:r})]})]})},tr=({title:s,description:t,isOpen:a,onClose:n,onConfirm:r,isDeleting:o})=>e.jsx(De,{open:a,onOpenChange:n,children:e.jsxs(Ae,{children:[e.jsx($e,{children:e.jsx(_e,{children:s})}),e.jsx("p",{children:t}),e.jsxs(Oe,{children:[e.jsx(k,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:r,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Delete"})})})]})]})}),Wm=({thread:s,comment:t,currentUserId:a,editingCommentId:n,editingCommentContent:r,isLikingComment:o,onCommentChange:d,onCommentSubmit:l,onCommentEditStart:c,onCommentEditChange:u,onCommentEditSubmit:x,onCommentDelete:h,onCommentLike:p})=>{var b;const[m,g]=i.useState(!1),[f,j]=i.useState(null),y=v=>{j(v),g(!0)},N=()=>{f&&(h(f),g(!1),j(null))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-8 space-y-4 p-4",children:[e.jsxs("h3",{className:"font-semibold",children:["Comments (",s.repliesCount,")"]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx(Be,{value:t,onChange:v=>d(v.target.value),placeholder:"Write a comment...",className:"min-h-[100px]"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500",children:"Add Comment"})})]}),e.jsx("div",{className:"space-y-4",children:(b=s.replies)==null?void 0:b.map(v=>{var R,I,w,A;return e.jsx(E,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ns,{className:"h-8 w-8",children:e.jsx(ws,{src:((R=v.author)==null?void 0:R.avatar)||"/default-avatar.png",alt:(I=v.author)==null?void 0:I.name})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-medium",children:(w=v.author)==null?void 0:w.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:Js(v.createdAt)}),a===v.user&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>c(v._id,v.content),children:e.jsx(wt,{className:"h-3 w-3 text-primary-500"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>y(v._id),children:e.jsx(hs,{className:"h-3 w-3 text-red-500"})})]})]})]}),n===v._id?e.jsxs("form",{onSubmit:U=>{U.preventDefault(),x(v._id)},className:"mt-2",children:[e.jsx(Be,{value:r,onChange:U=>u(U.target.value),className:"min-h-[80px] mb-2"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{type:"button",variant:"outline",size:"sm",onClick:()=>c(null,""),children:"Cancel"}),e.jsx(k,{type:"submit",size:"sm",children:"Save"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 mt-2",children:v.content}),e.jsx("div",{className:"flex items-center gap-4 mt-2",children:e.jsxs(k,{variant:"ghost",size:"sm",onClick:()=>p(v._id),disabled:o,className:`flex items-center gap-2 ${(A=v.likes)!=null&&A.includes(a)?"text-primary-500":""}`,children:[e.jsx(vt,{className:"h-3 w-3"}),v.likesCount||0]})})]})]})]})})},v._id)})})]}),e.jsx(tr,{title:"Delete Comment",description:"Are you sure you want to delete this comment? This action cannot be undone.",isOpen:m,onClose:()=>g(!1),onConfirm:N})]})},Ym=s=>{const t=ge(),[a,n]=i.useState(),[r,o]=i.useState(!1),[d,l]=i.useState(""),[c,u]=i.useState(""),[x,h]=i.useState(!1),[p,m]=i.useState(),[g,f]=i.useState(!1),[j,y]=i.useState(null),[N,b]=i.useState(""),[v,R]=i.useState(!1),[I,w]=i.useState(!0),[A,U]=i.useState(!1),{emit:re}=Te(),B=i.useCallback(async()=>{try{const Z=await(await fetch(`/api/forum/thread/${s}`)).json();return n(Z),l(Z==null?void 0:Z.teamId),w(!1),Z}catch(O){console.error("Error fetching thread:",O)}finally{w(!1)}},[s]);return{thread:a,likeThread:async(O,Z)=>{if(!r)try{o(!0),(await fetch(`/api/forum/thread/${s}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:O,role:Z})})).ok&&await B()}catch(ke){console.error("Error liking thread:",ke)}finally{setTimeout(()=>o(!1),500)}},fetchThread:B,isLiking:r,comment:c,setComment:u,isEditing:x,setIsEditing:h,editData:p,setEditData:m,isDeleteDialogOpen:g,setIsDeleteDialogOpen:f,editingCommentId:j,setEditingCommentId:y,editingCommentContent:N,setEditingCommentContent:b,isLikingComment:v,isLoading:I,isDeleting:A,handleComment:async(O,Z,ke)=>{O.preventDefault();try{(await fetch(`/api/forum/thread/${s}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:c,userId:Z,model:ke})})).ok&&(u(""),await B())}catch(ve){console.error("Error adding comment:",ve)}},handleCommentEdit:async(O,Z)=>{try{(await fetch(`/api/forum/comment/edit/${O}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:Z})})).ok&&(y(null),b(""),await B())}catch(ke){console.error("Error updating comment:",ke)}},handleCommentDelete:async O=>{console.log(O);try{(await fetch(`/api/forum/comment/delete/${O}`,{method:"DELETE"})).ok&&await B()}catch(Z){console.error("Error deleting comment:",Z)}},handleEdit:async O=>{O==null||O.preventDefault();try{(await fetch(`/api/forum/thread/edit/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(h(!1),await B())}catch(Z){console.error("Error updating thread:",Z)}},handleDelete:async()=>{try{U(!0),(await fetch(`/api/forum/thread/delete/${s}`,{method:"DELETE"})).ok&&(re("removeTeamForum",{teamId:d}),t(-1))}catch(O){console.error("Error deleting thread:",O)}finally{U(!1)}},handleCommentLike:async(O,Z,ke)=>{if(!v)try{R(!0),(await fetch(`/api/forum/comment/${O}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Z,role:ke})})).ok&&await B()}catch(ve){console.error("Error liking comment:",ve)}finally{setTimeout(()=>R(!1),500)}}}},Qm=({thread:s,isEditing:t,editData:a,isLiking:n,currentUserId:r,onEditChange:o,onEditSubmit:d,onEditCancel:l,onEditToggle:c,onDeleteClick:u,onLike:x})=>{var h,p,m,g;return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex justify-between items-start p-4",children:[t?e.jsx(qe,{value:a.title,onChange:f=>o({...a,title:f.target.value}),className:"text-heading4-medium "}):e.jsx(J,{className:"text-heading4-medium ",children:s.title}),r===(s==null?void 0:s.user)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:c,children:e.jsx(wt,{className:"h-4 w-4 text-primary-500"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:u,children:e.jsx(hs,{className:"h-4 w-4 text-red-500"})})]})]})}),e.jsxs("div",{className:"space-y-4 px-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ns,{className:"h-10 w-10",children:e.jsx(ws,{src:((h=s.author)==null?void 0:h.avatar)||"https://d3awt09vrts30h.cloudfront.net/blank-profile-picture.webp",alt:(p=s.author)==null?void 0:p.name})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(m=s.author)==null?void 0:m.name}),e.jsx("p",{className:"text-sm text-gray-500",children:Js(s==null?void 0:s.createdAt)})]})]}),t?e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsx(Be,{value:a.content,onChange:f=>o({...a,content:f.target.value}),className:"min-h-[200px] "}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),e.jsx(k,{type:"submit",className:"bg-primary-500 hover:bg-purple-500",children:"Save Changes"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700",children:s.content}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(k,{variant:"ghost",size:"sm",onClick:x,disabled:n,className:`flex items-center gap-2 ${(g=s.likes)!=null&&g.includes()?"text-primary-500":""}`,children:[e.jsx(vt,{className:"h-4 w-4"}),s.likesCount]})})]})]})]})},Zm=()=>{const s=te().id,{currentUser:t}=q(B=>B.user),{thread:a,isLiking:n,fetchThread:r,likeThread:o,comment:d,setComment:l,isEditing:c,setIsEditing:u,editData:x,setEditData:h,isDeleteDialogOpen:p,setIsDeleteDialogOpen:m,editingCommentId:g,setEditingCommentId:f,editingCommentContent:j,setEditingCommentContent:y,isLikingComment:N,isLoading:b,isDeleting:v,handleComment:R,handleCommentEdit:I,handleCommentDelete:w,handleCommentLike:A,handleEdit:U,handleDelete:re}=Ym(s);return i.useEffect(()=>{r().then(B=>{B&&h({title:B.title,content:B.content})})},[s,r]),b?e.jsx(D,{}):e.jsxs("div",{className:"max-w-8xl mx-auto p-6",children:[e.jsx(fe,{}),e.jsxs(E,{children:[e.jsx(Qm,{thread:a,isEditing:c,editData:x,isLiking:n,currentUserId:t==null?void 0:t._id,onEditChange:h,onEditSubmit:U,onEditCancel:()=>u(!1),onEditToggle:()=>u(!c),onDeleteClick:()=>m(!0),onLike:()=>o(t==null?void 0:t._id,t==null?void 0:t.role)}),e.jsx(L,{className:"space-y-4",children:e.jsx(Wm,{thread:a,comment:d,currentUserId:t==null?void 0:t._id,editingCommentId:g,editingCommentContent:j,isLikingComment:N,onCommentChange:l,onCommentSubmit:B=>R(B,t==null?void 0:t._id,t==null?void 0:t.role),onCommentEditStart:(B,z)=>{f(B),y(z)},onCommentEditChange:y,onCommentEditSubmit:B=>I(B,j),onCommentDelete:w,onCommentLike:B=>A(B,t==null?void 0:t._id,t==null?void 0:t.role)})})]}),e.jsx(tr,{title:"Delete Thread",description:`Are you sure you want to delete this thread? This action cannot be\r
          undone.`,isOpen:p,onClose:()=>m(!1),onConfirm:re,isDeleting:v})]})},Km=()=>V.object({name:V.string().min(3,"Name is required").max(30,"Name is too long"),description:V.string().min(3,"Description is required").max(200,"Description is too long"),order:V.coerce.number().gte(0,"Order must be a positive number"),isActive:V.boolean()}),Xm=()=>{const s=[{name:"No.",selector:(a,n)=>n+1,grow:0},{name:"Name",selector:a=>a.name,sortable:!0},{name:"Order",selector:a=>a.order,sortable:!0},{name:"Active",selector:a=>a.isActive?"Yes":"No",sortable:!0}],t=[{id:"name",label:"Name",type:"text",name:"name"},{id:"description",label:"Description",type:"textarea",name:"description"},{id:"order",label:"Order",type:"number",name:"order"},{id:"isActive",label:"Active",type:"checkbox",name:"isActive"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{title:"Forum Categories",description:"Manage Team Forum Categories"}),e.jsx(ne,{apiPath:"team-forum-categories",columns:s,fields:t,title:"Forum Category",onEditComponent:be,onDeleteComponent:ce,formSchema:Km,defaultValues:{name:"",description:"",order:0,isActive:!0},isExpandable:!1,isAction:!0})]})},ex=()=>{const{currentUser:s}=q(t=>t.user);return!s||s!=null&&s.isRoleChangeNotificationRead?e.jsx(Ve,{to:"/",replace:!0}):e.jsx(Me,{})},sx=()=>{const{currentUser:s}=q(t=>t.user);return!s||(s==null?void 0:s.role)==="Player"?e.jsx(Ve,{to:"/",replace:!0}):e.jsx(Me,{})},ca=()=>{const{currentUser:s}=q(t=>t.user);return!s||(s==null?void 0:s.role)!=="Player"&&(s==null?void 0:s.role)!=="Coach"?e.jsx(Ve,{to:"/",replace:!0}):e.jsx(Me,{})},tx=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(!1),[r,o]=i.useState(!0),[d,l]=i.useState(!1),[c,u]=i.useState(""),[x,h]=i.useState(null),{toast:p}=Y(),m=["User","Referee","Coach","Player","Admin"];i.useEffect(()=>{g()},[d]);const g=async()=>{try{o(!0);const v=await(await fetch("/api/admin/role-changes")).json();t(v)}catch{p({title:"Error",description:"Failed to fetch role changes",variant:"destructive"})}finally{o(!1)}},f=async()=>{if(!(!c||!x))try{if(l(!0),!(await fetch(`/api/admin/update-role/${x._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newRole:c})})).ok)throw new Error("Failed to update role");p({title:"Success",description:`Role updated successfully for ${x.username}`}),n(!1),await g()}catch{p({title:"Error",description:"Failed to update role",variant:"destructive"})}finally{l(!1)}},j=b=>{n(b),b||(u(""),h(null))},y=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=({change:b})=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:b==null?void 0:b.username}),e.jsx("span",{className:"text-sm text-gray-500",children:b==null?void 0:b.email})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Role"}),e.jsx(we,{variant:"outline",children:b.role?b.role:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Wanted Role"}),e.jsx(we,{className:"bg-primary-500 hover:bg-purple-500",children:b.wantedRole})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),e.jsx("p",{className:"text-sm",children:y(b.createdAt)})]}),e.jsxs(De,{open:a,onOpenChange:j,children:[e.jsx(as,{asChild:!0,children:e.jsx(k,{variant:"outline",disabled:d,onClick:()=>{h(b),u(b.wantedRole)},className:"w-full mt-2",children:"Change Role"})}),e.jsxs(Ae,{className:"sm:max-w-[425px]",children:[e.jsxs($e,{children:[e.jsx(_e,{children:"Update User Role"}),e.jsxs(Ge,{children:["Change role for ",x==null?void 0:x.username]})]}),e.jsx("div",{className:"my-4",children:e.jsxs(Pe,{value:c,onValueChange:u,children:[e.jsx(Se,{className:"w-full",children:e.jsx(Fe,{placeholder:"Select new role"})}),e.jsx(Ce,{children:m.map(v=>e.jsx(se,{value:v,children:v},v))})]})}),e.jsx(Oe,{children:e.jsx(k,{onClick:f,disabled:d||!c,className:"w-full bg-primary-500 hover:bg-purple-500",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Setting..."})]}):e.jsx("span",{children:"Set Role"})})})]})]})]})});return r?e.jsx(D,{}):e.jsxs("div",{className:"max-w-8xl mx-auto p-4 md:p-6 space-y-4 md:space-y-6",children:[e.jsx(fe,{}),e.jsxs(E,{children:[e.jsx(H,{children:e.jsx(J,{children:"Recent Role Changes"})}),e.jsxs(L,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(Ss,{children:[e.jsx(Cs,{children:e.jsxs(Ie,{children:[e.jsx(pe,{children:"User"}),e.jsx(pe,{children:"Current Role"}),e.jsx(pe,{children:"Wanted Role"}),e.jsx(pe,{children:"Date"}),e.jsx(pe,{children:"Actions"})]})}),e.jsxs(Ts,{children:[s.map(b=>e.jsxs(Ie,{children:[e.jsx(de,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:b==null?void 0:b.username}),e.jsx("span",{className:"text-sm text-gray-500",children:b==null?void 0:b.email})]})}),e.jsx(de,{children:e.jsx(we,{variant:"outline",children:b.role?b.role:"-"})}),e.jsx(de,{children:e.jsx(we,{className:"bg-primary-500 hover:bg-purple-500",children:b.wantedRole})}),e.jsx(de,{children:y(b.createdAt)}),e.jsx(de,{children:e.jsx(De,{open:a,onOpenChange:j,children:e.jsx(as,{asChild:!0,children:e.jsx(k,{variant:"outline",disabled:d,onClick:()=>{h(b),u(b.wantedRole)},children:"Change Role"})})})})]},b._id)),s.length===0&&e.jsx(Ie,{children:e.jsx(de,{colSpan:5,className:"text-center text-gray-500",children:"No role changes found"})})]})]})}),e.jsx("div",{className:"md:hidden space-y-4",children:s.length>0?s.map(b=>e.jsx(N,{change:b},b._id)):e.jsx("div",{className:"text-center py-6 text-gray-500",children:"No role changes found"})})]})]}),e.jsx(De,{open:a,onOpenChange:j,children:e.jsxs(Ae,{className:"sm:max-w-[425px]",children:[e.jsxs($e,{children:[e.jsx(_e,{children:"Update User Role"}),e.jsxs(Ge,{children:["Change role for ",x==null?void 0:x.username]})]}),e.jsx("div",{className:"my-4",children:e.jsxs(Pe,{value:c,onValueChange:u,children:[e.jsx(Se,{className:"w-full",children:e.jsx(Fe,{placeholder:"Select new role"})}),e.jsx(Ce,{children:m.map(b=>e.jsx(se,{value:b,children:b},b))})]})}),e.jsx(Oe,{children:e.jsx(k,{onClick:f,disabled:d||!c,className:"w-full bg-primary-500 hover:bg-purple-500",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Setting..."})]}):e.jsx("span",{children:"Set Role"})})})]})})]})},jt=s=>{const t={Pending:"bg-yellow-100 text-yellow-800 border-yellow-200",Under_review:"bg-blue-100 text-blue-800 border-blue-200",Resolved:"bg-green-100 text-green-800 border-green-200",Dismissed:"bg-red-100 text-red-800 border-red-200"};return e.jsx(we,{variant:"outline",className:`${t[s]} px-2 py-1`,children:s.replace("_"," ").toUpperCase()})},ax=({report:s,setSelectedReport:t,setIsDetailsDialogOpen:a})=>e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4 border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Reported By"}),e.jsx(F,{to:`/profile/${s.reportedBy._id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:s.reportedBy.username})]}),jt(s.status)]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Reported User"}),e.jsx(F,{to:`/profile/${s.reportedUser._id}`,className:"text-blue-600 hover:text-blue-800",children:s.reportedUser.username})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Content Type"}),e.jsx(F,{to:`${s.contentType==="Post"?"/post":"/comment"}/${s.contentId}`,className:"text-blue-600 hover:text-blue-800",children:s.contentType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Reason"}),e.jsx("p",{className:"text-gray-900",children:s.reason})]}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>{t(s),a(!0)},className:"w-full mt-2",children:"View Details"})]})}),nx=()=>{const s=ge(),[t,a]=i.useState([]),[n,r]=i.useState(null),[o,d]=i.useState("all"),[l,c]=i.useState(!1),[u,x]=i.useState(""),[h,p]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const b=await(await fetch("/api/admin/reports")).json();a(b),p(!1)}catch(N){console.error("Failed to fetch reports:",N)}finally{p(!1)}})()},[]);const m=o==="all"?t:t.filter(y=>y.status===o),g=async y=>{if(n)try{(await fetch(`/api/admin/report/${n._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y,adminNotes:u,actionTaken:y==="Resolved"?"Warning":y==="Dismissed"?"No_action":"Content_removed"})})).ok&&(a(t.map(b=>b._id===n._id?{...b,status:y,adminNotes:u}:b)),c(!1),r(null))}catch(N){console.error("Failed to update report:",N)}},f=()=>{n!=null&&n.contentType&&(n!=null&&n.contentId)&&s("/dashboard/admin/content-management",{state:{contentType:n.contentType,contentId:n.contentId,reportId:n._id,reason:n.reason}})},j=()=>{var y;(y=n==null?void 0:n.reportedUser)!=null&&y._id&&s("/dashboard/admin/user-management",{state:{userId:n.reportedUser._id,username:n.reportedUser.username,reportId:n._id}})};return h?e.jsx(D,{}):e.jsxs("div",{className:"p-4 max-w-8xl mx-auto",children:[e.jsx(fe,{className:"mb-4"}),e.jsxs(E,{className:"w-full shadow-lg",children:[e.jsx(H,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx(J,{className:"text-2xl font-bold",children:"Reports Management"}),e.jsxs(Pe,{onValueChange:d,value:o,children:[e.jsx(Se,{className:"w-full md:w-[200px]",children:e.jsx(Fe,{placeholder:"Filter by Status"})}),e.jsxs(Ce,{children:[e.jsx(se,{value:"All",children:"All Reports"}),e.jsx(se,{value:"Pending",children:"Pending"}),e.jsx(se,{value:"Under_review",children:"Under Review"}),e.jsx(se,{value:"Resolved",children:"Resolved"}),e.jsx(se,{value:"Dismissed",children:"Dismissed"})]})]})]})}),e.jsxs(L,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs(Ss,{children:[e.jsx(Cs,{children:e.jsxs(Ie,{children:[e.jsx(pe,{className:"font-semibold",children:"Reported By"}),e.jsx(pe,{className:"font-semibold",children:"Reported User"}),e.jsx(pe,{className:"font-semibold",children:"Content Type"}),e.jsx(pe,{className:"font-semibold",children:"Reason"}),e.jsx(pe,{className:"font-semibold",children:"Status"}),e.jsx(pe,{className:"font-semibold",children:"Actions"})]})}),e.jsxs(Ts,{children:[m==null?void 0:m.map(y=>e.jsxs(Ie,{className:"hover:bg-gray-50",children:[e.jsx(de,{children:e.jsx(F,{to:`/profile/${y.reportedBy._id}`,className:"text-blue-600 hover:text-blue-800",children:y.reportedBy.username})}),e.jsx(de,{children:e.jsx(F,{to:`/profile/${y.reportedUser._id}`,className:"text-blue-600 hover:text-blue-800",children:y.reportedUser.username})}),e.jsx(de,{children:(()=>{switch(y.actionTaken){case"Content_removed":return e.jsx("span",{className:"text-red-500",children:"Content Removed"});case"User_banned":return e.jsx("span",{className:"text-red-500",children:"User Banned"});default:return e.jsx(F,{to:`${y.contentType==="Post"||y.contentType==="Comment"?"/post":y.contentType==="Profile"?"/profile":""}/${y.contentId}`,className:"text-blue-600 hover:text-blue-800",children:y.contentType})}})()}),e.jsx(de,{className:"max-w-xs truncate",children:y.reason}),e.jsx(de,{children:jt(y.status)}),e.jsx(de,{children:e.jsx(k,{variant:"outline",size:"sm",onClick:()=>{r(y),c(!0)},className:"hover:bg-gray-100",children:"View Details"})})]},y._id)),(m==null?void 0:m.length)===0&&e.jsx(Ie,{children:e.jsx(de,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center text-gray-500",children:[e.jsx(ds,{size:24,className:"mb-2"}),e.jsx("p",{children:"No reports found"})]})})})]})]})}),e.jsx("div",{className:"md:hidden",children:(m==null?void 0:m.length)>0?m.map(y=>e.jsx(ax,{report:y,setSelectedReport:r,setIsDetailsDialogOpen:c},y._id)):e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center text-gray-500",children:[e.jsx(ds,{size:24,className:"mb-2"}),e.jsx("p",{children:"No reports found"})]})})})]})]}),e.jsx(De,{open:l,onOpenChange:c,children:e.jsxs(Ae,{className:"sm:max-w-[700px] sm:max-h-[70vh] max-sm:h-[70vh] lg:max-h-[85vh] overflow-scroll ",children:[e.jsx($e,{children:e.jsx(_e,{className:"text-2xl font-bold mb-4",children:"Report Details"})}),e.jsx(Ge,{}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Reported By"}),e.jsx(F,{to:`/profile/${n.reportedBy._id}`,className:"text-blue-600 hover:text-blue-800",children:n.reportedBy.username})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Reported User"}),e.jsx(F,{to:`/profile/${n.reportedUser._id}`,className:"text-blue-600 hover:text-blue-800",children:n.reportedUser.username})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Content Type"}),(()=>{switch(n.actionTaken){case"Content_removed":return e.jsx("span",{className:"text-red-500",children:"Content Removed"});case"User_banned":return e.jsx("span",{className:"text-red-500",children:"User Banned"});default:return e.jsx(F,{to:`${n.contentType==="Post"||n.contentType==="Comment"?"/post":n.contentType==="Profile"?"/profile":""}/${n.contentId}`,className:"text-blue-600 hover:text-blue-800",children:n.contentType})}})()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ci,{className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),jt(n.status)]})]})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Reason"}),e.jsx("p",{className:"text-gray-700",children:n.reason})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:n.description})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Hs,{className:"text-yellow-500"}),"Available Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.contentId&&e.jsxs(k,{variant:"destructive",onClick:f,className:"flex items-center justify-center gap-2",disabled:n.actionTaken==="Content_removed"||n.contentType==="Profile",children:[e.jsx(hs,{}),"Manage Content"]}),e.jsxs(k,{variant:"destructive",onClick:j,className:"flex items-center justify-center gap-2",disabled:n.actionTaken==="User_banned",children:[e.jsx(wa,{}),"Manage User"]})]}),e.jsx(Be,{placeholder:"Add admin notes...",value:u||(n==null?void 0:n.adminNotes)||"",onChange:y=>x(y.target.value),className:"min-h-[100px] w-full"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsx(k,{variant:"outline",onClick:()=>g("under_review"),className:"flex-1",children:"Start Review"}),e.jsx(k,{variant:"destructive",onClick:()=>g("resolved"),className:"flex-1",children:"Take Action"}),e.jsx(k,{variant:"secondary",onClick:()=>g("dismissed"),className:"flex-1",children:"Dismiss Report"})]})]})]})]})})]})},rx={Inappropriate_content:"Inappropriate Content",Harassment:"Harassment",Spam:"Spam",Misinformation:"Misinformation",Hate_speech:"Hate Speech",Violence:"Violence",Copyright_infringement:"Copyright Infringement",Impersonation:"Impersonation",Other:"Other"},ix=()=>{const s=Us(),t=ge(),[a,n]=i.useState("7"),[r,o]=i.useState(""),[d,l]=i.useState(""),{userId:c,username:u,reportId:x}=s.state||{},{currentUser:h}=q(N=>N.user),[p,m]=i.useState(!1),[g,f]=i.useState({}),j=()=>{const N={};return a||(N.banDuration="Ban duration is required"),r||(N.banReason="Ban reason must be selected"),d.trim()||(N.banDescription="Ban description is required"),f(N),Object.keys(N).length===0},y=async()=>{if(j())try{m(!0),(await fetch(`/api/admin/ban-user/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration:parseInt(a),reason:r,description:d,reportId:x,bannedBy:h._id})})).ok&&(t("/dashboard/admin/reports"),m(!1))}catch(N){console.error("Failed to ban user:",N)}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsxs(E,{className:"w-full",children:[e.jsx(H,{children:e.jsxs(J,{children:["User Management - ",u]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ban Duration (days)"}),e.jsxs(Pe,{value:a,onValueChange:n,children:[e.jsx(Se,{children:e.jsx(Fe,{})}),e.jsxs(Ce,{children:[e.jsx(se,{value:"1",children:"1 day"}),e.jsx(se,{value:"3",children:"3 days"}),e.jsx(se,{value:"7",children:"7 days"}),e.jsx(se,{value:"14",children:"14 days"}),e.jsx(se,{value:"30",children:"30 days"}),e.jsx(se,{value:"permanent",children:"Permanent"})]})]}),g.banDuration&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.banDuration})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ban Reason"}),e.jsxs(Pe,{onValueChange:o,value:r,children:[e.jsx(Se,{children:e.jsx(Fe,{placeholder:"Select a reason"})}),e.jsx(Ce,{children:Object.entries(rx).map(([N,b])=>e.jsx(se,{value:N,children:b},N))})]}),g.banReason&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.banReason}),e.jsx("label",{className:"block text-sm font-medium my-2",children:"Ban Description"}),e.jsx(Be,{value:d,onChange:N=>l(N.target.value),placeholder:"Enter information about why the user is being banned..."})," ",g.banDescription&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.banDescription})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(k,{variant:"destructive",className:"flex items-center gap-2",onClick:y,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Banning..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{}),e.jsx("span",{children:"Ban User"})]})})})]})]})]})},ox=()=>{const{currentUser:s}=q(p=>p.user),t=Us(),a=ge(),[n,r]=i.useState(""),{contentType:o,contentId:d,reportId:l,reason:c}=t.state||{},[u,x]=i.useState(!1),h=async()=>{try{x(!0),(await fetch(`/api/admin/content/delete/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({reasonInfo:n,reportId:l,reason:c,contentModel:o,deletedBy:s._id})})).ok&&a("/dashboard/admin/reports")}catch(p){console.error("Failed to delete content:",p)}finally{x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsxs(E,{className:"w-full",children:[e.jsx(H,{children:e.jsxs(J,{children:["Content Management - ",o]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 mb-2",children:[e.jsx(Hs,{}),e.jsx("span",{className:"font-medium",children:"Warning"})]}),e.jsx("p",{className:"text-yellow-600",children:"You are about to delete content. This action cannot be undone."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deletion Reason"}),e.jsx(Be,{value:n,onChange:p=>r(p.target.value),placeholder:"Enter reason for content deletion...",className:"h-24"})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(k,{variant:"destructive",className:"flex items-center gap-2",onClick:h,disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{}),e.jsx("span",{children:"Delete Content"})]})})})]})]})]})},lx=()=>e.jsx(Rm,{children:e.jsxs(or,{children:[e.jsx(ud,{}),e.jsxs(Qi,{children:[e.jsx(S,{path:"/sign-in",element:e.jsx(Nl,{})}),e.jsx(S,{path:"/sign-up",element:e.jsx(wl,{})}),e.jsx(S,{path:"/onboarding",element:e.jsx(Od,{})}),e.jsxs(S,{element:e.jsx(Bd,{}),children:[e.jsxs(S,{path:"/",element:e.jsx(lc,{}),children:[e.jsx(S,{path:"/",element:e.jsx(Ho,{})}),e.jsx(S,{path:"*",element:e.jsx($d,{})}),e.jsx(S,{path:"/post/:id",element:e.jsx(dc,{})}),e.jsxs(S,{path:"/post",element:e.jsx(sx,{}),children:[e.jsx(S,{path:"/post/create",element:e.jsx(Td,{})}),e.jsx(S,{path:"/post/edit/:id",element:e.jsx(Sd,{})})]}),e.jsx(S,{path:"/post/comment/edit/:id",element:e.jsx(Cd,{})}),e.jsx(S,{path:"/notifications",element:e.jsx(Fm,{})}),e.jsx(S,{path:"/search",element:e.jsx(wd,{})}),e.jsx(S,{path:"/profile/:id",element:e.jsx(uc,{})}),e.jsx(S,{path:"/messages",element:e.jsx(tm,{})}),e.jsx(S,{path:"/leagues",element:e.jsx(pc,{})}),e.jsx(S,{path:"/league/:id",element:e.jsx(yc,{})}),e.jsx(S,{path:"/league/team/:id",element:e.jsx(Zd,{})}),e.jsx(S,{path:"/coach/:id",element:e.jsx($c,{})}),e.jsx(S,{path:"/referee/:id",element:e.jsx(Fd,{})}),e.jsx(S,{path:"/stadium/:id",element:e.jsx(_c,{})}),e.jsx(S,{path:"/player/:id",element:e.jsx(qc,{})}),e.jsxs(S,{path:"/training",element:e.jsx(ca,{}),children:[e.jsx(S,{path:"/training",element:e.jsx(Zc,{})}),e.jsx(S,{path:"/training/:id",element:e.jsx(sd,{})})]}),e.jsx(S,{path:"/results/:id",element:e.jsx(vd,{})}),e.jsx(S,{path:"/match/:id",element:e.jsx(fm,{})}),e.jsx(S,{path:"/terms",element:e.jsx(rm,{})}),e.jsx(S,{path:"/privacy",element:e.jsx(mm,{})}),e.jsx(S,{path:"/contact",element:e.jsx(lm,{})}),e.jsx(S,{path:"/about",element:e.jsx(hm,{})}),e.jsx(S,{path:"/explore",element:e.jsx(pm,{})}),e.jsxs(S,{path:"/forum",element:e.jsx(ca,{}),children:[e.jsx(S,{path:"/forum",element:e.jsx(Jm,{})}),e.jsx(S,{path:"/forum/:id",element:e.jsx(Zm,{})})]}),e.jsx(S,{path:"/admin-alerts",element:e.jsx(ex,{}),children:e.jsx(S,{path:"/admin-alerts",element:e.jsx(Dm,{})})}),e.jsxs(S,{path:"/dashboard/referee",element:e.jsx(Zt,{}),children:[e.jsx(S,{path:"/dashboard/referee",element:e.jsx(od,{})}),e.jsx(S,{path:"/dashboard/referee/league/:id",element:e.jsx(td,{})}),e.jsx(S,{path:"/dashboard/referee/league/schedule/:id",element:e.jsx(id,{})}),e.jsx(S,{path:"/dashboard/referee/league/results/:id",element:e.jsx(jd,{})}),e.jsx(S,{path:"/dashboard/referee/league/result/:id",element:e.jsx(Nd,{})}),e.jsx(S,{path:"/dashboard/referee/league/assign-referee/:id",element:e.jsx(Ad,{})}),e.jsx(S,{path:"/dashboard/referee/league/match-details/:id",element:e.jsx(Ld,{})})]}),e.jsxs(S,{path:"/dashboard/admin",element:e.jsx(Qt,{}),children:[e.jsx(S,{path:"/dashboard/admin",element:e.jsx(ld,{})}),e.jsx(S,{path:"/dashboard/admin/users",element:e.jsx(Ll,{})}),e.jsx(S,{path:"/dashboard/admin/teams",element:e.jsx(Yl,{})}),e.jsx(S,{path:"/dashboard/admin/leagues",element:e.jsx(ac,{})}),e.jsx(S,{path:"/dashboard/admin/players",element:e.jsx(Nc,{})}),e.jsx(S,{path:"/dashboard/admin/stadiums",element:e.jsx(Fc,{})}),e.jsx(S,{path:"/dashboard/admin/coaches",element:e.jsx(Ic,{})}),e.jsx(S,{path:"/dashboard/admin/referees",element:e.jsx(zd,{})}),e.jsx(S,{path:"/dashboard/admin/positions",element:e.jsx(Rc,{})}),e.jsx(S,{path:"/dashboard/admin/countries",element:e.jsx(kc,{})}),e.jsx(S,{path:"/dashboard/admin/seasons",element:e.jsx(Hd,{})}),e.jsx(S,{path:"/dashboard/admin/sponsors",element:e.jsx(Md,{})}),e.jsx(S,{path:"/dashboard/admin/terms",element:e.jsx(nm,{})}),e.jsx(S,{path:"/dashboard/admin/privacy",element:e.jsx(dm,{})}),e.jsx(S,{path:"/dashboard/admin/about",element:e.jsx(um,{})}),e.jsx(S,{path:"/dashboard/admin/contact",element:e.jsx(bm,{})}),e.jsx(S,{path:"/dashboard/admin/faq",element:e.jsx(jm,{})}),e.jsx(S,{path:"/dashboard/admin/forum-category",element:e.jsx(Xm,{})}),e.jsx(S,{path:"/dashboard/admin/role-changes",element:e.jsx(tx,{})}),e.jsx(S,{path:"/dashboard/admin/reports",element:e.jsx(nx,{})}),e.jsx(S,{path:"/dashboard/admin/user-management",element:e.jsx(ix,{})}),e.jsx(S,{path:"/dashboard/admin/content-management",element:e.jsx(ox,{})})]}),e.jsxs(S,{path:"/dashboard/coach",element:e.jsx(ea,{}),children:[e.jsx(S,{path:"/dashboard/coach",element:e.jsx(cd,{})}),e.jsx(S,{path:"/dashboard/coach/team",element:e.jsx(Vc,{})}),e.jsx(S,{path:"/dashboard/coach/training",element:e.jsx(Jc,{})}),e.jsx(S,{path:"/dashboard/coach/training-type",element:e.jsx(Yc,{})}),e.jsx(S,{path:"/dashboard/coach/team-equipment",element:e.jsx($m,{})})]}),e.jsxs(S,{path:"/dashboard/player",element:e.jsx(Kt,{}),children:[e.jsx(S,{path:"/dashboard/player",element:e.jsx(_m,{})}),e.jsx(S,{path:"/dashboard/player/schedule",element:e.jsx(Mm,{})}),e.jsx(S,{path:"/dashboard/player/stats",element:e.jsx(Lm,{})})]})]}),e.jsxs(S,{path:"/user",element:e.jsx(Cl,{}),children:[e.jsx(S,{path:"/user/profile",element:e.jsx(Pl,{})}),e.jsx(S,{path:"/user/referee",element:e.jsx(Zt,{}),children:e.jsx(S,{path:"/user/referee/profile",element:e.jsx(Vl,{})})}),e.jsx(S,{path:"/user/settings",element:e.jsx(Dl,{})}),e.jsx(S,{path:"/user/player",element:e.jsx(Kt,{}),children:e.jsx(S,{path:"/user/player/profile",element:e.jsx(Cc,{})})}),e.jsx(S,{path:"/user/coach",element:e.jsx(ea,{}),children:e.jsx(S,{path:"/user/coach/profile",element:e.jsx(ql,{})})}),e.jsx(S,{path:"/user/admin",element:e.jsx(Qt,{}),children:e.jsx(S,{path:"/user/admin/profile",element:e.jsx(vm,{})})})]})]})]})]})}),cx=Co({user:Xo}),dx={key:"root",storage:vo,version:1},mx=wo(dx,cx),ar=to({reducer:mx,middleware:s=>s({serializableCheck:!1})}),xx=No(ar);ir.createRoot(document.getElementById("root")).render(e.jsx(Zi,{store:ar,children:e.jsx(So,{loading:null,persistor:xx,children:e.jsx(lx,{})})}));
